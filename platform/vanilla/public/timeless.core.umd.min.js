var Timeless=(()=>{var ba=Object.create;var ut=Object.defineProperty,Ca=Object.defineProperties,xa=Object.getOwnPropertyDescriptor,wa=Object.getOwnPropertyDescriptors,Oa=Object.getOwnPropertyNames,Mt=Object.getOwnPropertySymbols,Pa=Object.getPrototypeOf,Cn=Object.prototype.hasOwnProperty,us=Object.prototype.propertyIsEnumerable;var bn=(r,t,e)=>t in r?ut(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,h=(r,t)=>{for(var e in t||(t={}))Cn.call(t,e)&&bn(r,e,t[e]);if(Mt)for(var e of Mt(t))us.call(t,e)&&bn(r,e,t[e]);return r},$=(r,t)=>Ca(r,wa(t));var pe=(r,t)=>{var e={};for(var n in r)Cn.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&Mt)for(var n of Mt(r))t.indexOf(n)<0&&us.call(r,n)&&(e[n]=r[n]);return e};var R=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Ue=(r,t)=>{for(var e in t)ut(r,e,{get:t[e],enumerable:!0})},hs=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Oa(t))!Cn.call(r,s)&&s!==e&&ut(r,s,{get:()=>t[s],enumerable:!(n=xa(t,s))||n.enumerable});return r};var ht=(r,t,e)=>(e=r!=null?ba(Pa(r)):{},hs(t||!r||!r.__esModule?ut(e,"default",{value:r,enumerable:!0}):e,r)),_a=r=>hs(ut({},"__esModule",{value:!0}),r);var l=(r,t,e)=>bn(r,typeof t!="symbol"?t+"":t,e);var N=(r,t,e)=>new Promise((n,s)=>{var o=u=>{try{a(e.next(u))}catch(p){s(p)}},i=u=>{try{a(e.throw(u))}catch(p){s(p)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(o,i);a((e=e.apply(r,t)).next())});var Ie=R((Mc,ms)=>{"use strict";ms.exports=TypeError});var gs=R(()=>{});var mt=R((Lc,Is)=>{var An=typeof Map=="function"&&Map.prototype,wn=Object.getOwnPropertyDescriptor&&An?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,It=An&&wn&&typeof wn.get=="function"?wn.get:null,ys=An&&Map.prototype.forEach,Ln=typeof Set=="function"&&Set.prototype,On=Object.getOwnPropertyDescriptor&&Ln?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Nt=Ln&&On&&typeof On.get=="function"?On.get:null,vs=Ln&&Set.prototype.forEach,ka=typeof WeakMap=="function"&&WeakMap.prototype,pt=ka?WeakMap.prototype.has:null,Ma=typeof WeakSet=="function"&&WeakSet.prototype,ft=Ma?WeakSet.prototype.has:null,Ha=typeof WeakRef=="function"&&WeakRef.prototype,Ss=Ha?WeakRef.prototype.deref:null,Aa=Boolean.prototype.valueOf,La=Object.prototype.toString,Ia=Function.prototype.toString,Na=String.prototype.match,In=String.prototype.slice,Pe=String.prototype.replace,Ba=String.prototype.toUpperCase,Ts=String.prototype.toLowerCase,Ds=RegExp.prototype.test,Es=Array.prototype.concat,me=Array.prototype.join,Fa=Array.prototype.slice,bs=Math.floor,Dn=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Pn=Object.getOwnPropertySymbols,Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,We=typeof Symbol=="function"&&typeof Symbol.iterator=="object",dt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===We||!0)?Symbol.toStringTag:null,Rs=Object.prototype.propertyIsEnumerable,Cs=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function xs(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Ds.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-bs(-r):bs(r);if(n!==r){var s=String(n),o=In.call(t,s.length+1);return Pe.call(s,e,"$&_")+"."+Pe.call(Pe.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pe.call(t,e,"$&_")}var kn=gs(),ws=kn.custom,Os=Hs(ws)?ws:null,ks={__proto__:null,double:'"',single:"'"},$a={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Is.exports=function r(t,e,n,s){var o=e||{};if(Ce(o,"quoteStyle")&&!Ce(ks,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ce(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var i=Ce(o,"customInspect")?o.customInspect:!0;if(typeof i!="boolean"&&i!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ce(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ce(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t=="undefined")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Ls(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return a?xs(t,u):u}if(typeof t=="bigint"){var p=String(t)+"n";return a?xs(t,p):p}var d=typeof o.depth=="undefined"?5:o.depth;if(typeof n=="undefined"&&(n=0),n>=d&&d>0&&typeof t=="object")return Mn(t)?"[Array]":"[Object]";var c=sl(o,n);if(typeof s=="undefined")s=[];else if(As(s,t)>=0)return"[Circular]";function f(b,E,w){if(E&&(s=Fa.call(s),s.push(E)),w){var x={depth:o.depth};return Ce(o,"quoteStyle")&&(x.quoteStyle=o.quoteStyle),r(b,x,n+1,s)}return r(b,o,n+1,s)}if(typeof t=="function"&&!Ps(t)){var m=Ga(t),y=Lt(t,f);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(y.length>0?" { "+me.call(y,", ")+" }":"")}if(Hs(t)){var g=We?Pe.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Rn.call(t);return typeof t=="object"&&!We?ct(g):g}if(tl(t)){for(var S="<"+Ts.call(String(t.nodeName)),v=t.attributes||[],C=0;C<v.length;C++)S+=" "+v[C].name+"="+Ms(Va(v[C].value),"double",o);return S+=">",t.childNodes&&t.childNodes.length&&(S+="..."),S+="</"+Ts.call(String(t.nodeName))+">",S}if(Mn(t)){if(t.length===0)return"[]";var T=Lt(t,f);return c&&!rl(T)?"["+Hn(T,c)+"]":"[ "+me.call(T,", ")+" ]"}if(Ka(t)){var _=Lt(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!Rs.call(t,"cause")?"{ ["+String(t)+"] "+me.call(Es.call("[cause]: "+f(t.cause),_),", ")+" }":_.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+me.call(_,", ")+" }"}if(typeof t=="object"&&i){if(Os&&typeof t[Os]=="function"&&kn)return kn(t,{depth:d-n});if(i!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Ja(t)){var D=[];return ys&&ys.call(t,function(b,E){D.push(f(E,t,!0)+" => "+f(b,t))}),_s("Map",It.call(t),D,c)}if(Za(t)){var F=[];return vs&&vs.call(t,function(b){F.push(f(b,t))}),_s("Set",Nt.call(t),F,c)}if(Qa(t))return _n("WeakMap");if(el(t))return _n("WeakSet");if(Xa(t))return _n("WeakRef");if(Wa(t))return ct(f(Number(t)));if(Ya(t))return ct(f(Dn.call(t)));if(za(t))return ct(Aa.call(t));if(Ua(t))return ct(f(String(t)));if(typeof window!="undefined"&&t===window)return"{ [object Window] }";if(typeof globalThis!="undefined"&&t===globalThis||typeof global!="undefined"&&t===global)return"{ [object globalThis] }";if(!qa(t)&&!Ps(t)){var V=Lt(t,f),L=Cs?Cs(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",K=!L&&dt&&Object(t)===t&&dt in t?In.call(_e(t),8,-1):A?"Object":"",W=L||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",P=W+(K||A?"["+me.call(Es.call([],K||[],A||[]),": ")+"] ":"");return V.length===0?P+"{}":c?P+"{"+Hn(V,c)+"}":P+"{ "+me.call(V,", ")+" }"}return String(t)};function Ms(r,t,e){var n=e.quoteStyle||t,s=ks[n];return s+r+s}function Va(r){return Pe.call(String(r),/"/g,"&quot;")}function Ne(r){return!dt||!(typeof r=="object"&&(dt in r||typeof r[dt]!="undefined"))}function Mn(r){return _e(r)==="[object Array]"&&Ne(r)}function qa(r){return _e(r)==="[object Date]"&&Ne(r)}function Ps(r){return _e(r)==="[object RegExp]"&&Ne(r)}function Ka(r){return _e(r)==="[object Error]"&&Ne(r)}function Ua(r){return _e(r)==="[object String]"&&Ne(r)}function Wa(r){return _e(r)==="[object Number]"&&Ne(r)}function za(r){return _e(r)==="[object Boolean]"&&Ne(r)}function Hs(r){if(We)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Rn)return!1;try{return Rn.call(r),!0}catch(t){}return!1}function Ya(r){if(!r||typeof r!="object"||!Dn)return!1;try{return Dn.call(r),!0}catch(t){}return!1}var ja=Object.prototype.hasOwnProperty||function(r){return r in this};function Ce(r,t){return ja.call(r,t)}function _e(r){return La.call(r)}function Ga(r){if(r.name)return r.name;var t=Na.call(Ia.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function As(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,n=r.length;e<n;e++)if(r[e]===t)return e;return-1}function Ja(r){if(!It||!r||typeof r!="object")return!1;try{It.call(r);try{Nt.call(r)}catch(t){return!0}return r instanceof Map}catch(t){}return!1}function Qa(r){if(!pt||!r||typeof r!="object")return!1;try{pt.call(r,pt);try{ft.call(r,ft)}catch(t){return!0}return r instanceof WeakMap}catch(t){}return!1}function Xa(r){if(!Ss||!r||typeof r!="object")return!1;try{return Ss.call(r),!0}catch(t){}return!1}function Za(r){if(!Nt||!r||typeof r!="object")return!1;try{Nt.call(r);try{It.call(r)}catch(t){return!0}return r instanceof Set}catch(t){}return!1}function el(r){if(!ft||!r||typeof r!="object")return!1;try{ft.call(r,ft);try{pt.call(r,pt)}catch(t){return!0}return r instanceof WeakSet}catch(t){}return!1}function tl(r){return!r||typeof r!="object"?!1:typeof HTMLElement!="undefined"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function Ls(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,n="... "+e+" more character"+(e>1?"s":"");return Ls(In.call(r,0,t.maxStringLength),t)+n}var s=$a[t.quoteStyle||"single"];s.lastIndex=0;var o=Pe.call(Pe.call(r,s,"\\$1"),/[\x00-\x1f]/g,nl);return Ms(o,"single",t)}function nl(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+Ba.call(t.toString(16))}function ct(r){return"Object("+r+")"}function _n(r){return r+" { ? }"}function _s(r,t,e,n){var s=n?Hn(e,n):me.call(e,", ");return r+" ("+t+") {"+s+"}"}function rl(r){for(var t=0;t<r.length;t++)if(As(r[t],`
`)>=0)return!1;return!0}function sl(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=me.call(Array(r.indent+1)," ");else return null;return{base:e,prev:me.call(Array(t+1),e)}}function Hn(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+me.call(r,","+e)+`
`+t.prev}function Lt(r,t){var e=Mn(r),n=[];if(e){n.length=r.length;for(var s=0;s<r.length;s++)n[s]=Ce(r,s)?t(r[s],r):""}var o=typeof Pn=="function"?Pn(r):[],i;if(We){i={};for(var a=0;a<o.length;a++)i["$"+o[a]]=o[a]}for(var u in r)Ce(r,u)&&(e&&String(Number(u))===u&&u<r.length||We&&i["$"+u]instanceof Symbol||(Ds.call(/[^\w$]/,u)?n.push(t(u,r)+": "+t(r[u],r)):n.push(u+": "+t(r[u],r))));if(typeof Pn=="function")for(var p=0;p<o.length;p++)Rs.call(r,o[p])&&n.push("["+t(o[p])+"]: "+t(r[o[p]],r));return n}});var Bs=R((Ic,Ns)=>{"use strict";var ol=mt(),il=Ie(),Bt=function(r,t,e){for(var n=r,s;(s=n.next)!=null;n=s)if(s.key===t)return n.next=s.next,e||(s.next=r.next,r.next=s),s},al=function(r,t){if(r){var e=Bt(r,t);return e&&e.value}},ll=function(r,t,e){var n=Bt(r,t);n?n.value=e:r.next={key:t,next:r.next,value:e}},ul=function(r,t){return r?!!Bt(r,t):!1},hl=function(r,t){if(r)return Bt(r,t,!0)};Ns.exports=function(){var t,e={assert:function(n){if(!e.has(n))throw new il("Side channel does not contain "+ol(n))},delete:function(n){var s=t&&t.next,o=hl(t,n);return o&&s&&s===o&&(t=void 0),!!o},get:function(n){return al(t,n)},has:function(n){return ul(t,n)},set:function(n,s){t||(t={next:void 0}),ll(t,n,s)}};return e}});var Nn=R((Nc,Fs)=>{"use strict";Fs.exports=Object});var Vs=R((Bc,$s)=>{"use strict";$s.exports=Error});var Ks=R((Fc,qs)=>{"use strict";qs.exports=EvalError});var Ws=R(($c,Us)=>{"use strict";Us.exports=RangeError});var Ys=R((Vc,zs)=>{"use strict";zs.exports=ReferenceError});var Gs=R((qc,js)=>{"use strict";js.exports=SyntaxError});var Qs=R((Kc,Js)=>{"use strict";Js.exports=URIError});var Zs=R((Uc,Xs)=>{"use strict";Xs.exports=Math.abs});var to=R((Wc,eo)=>{"use strict";eo.exports=Math.floor});var ro=R((zc,no)=>{"use strict";no.exports=Math.max});var oo=R((Yc,so)=>{"use strict";so.exports=Math.min});var ao=R((jc,io)=>{"use strict";io.exports=Math.pow});var uo=R((Gc,lo)=>{"use strict";lo.exports=Math.round});var co=R((Jc,ho)=>{"use strict";ho.exports=Number.isNaN||function(t){return t!==t}});var fo=R((Qc,po)=>{"use strict";var cl=co();po.exports=function(t){return cl(t)||t===0?t:t<0?-1:1}});var go=R((Xc,mo)=>{"use strict";mo.exports=Object.getOwnPropertyDescriptor});var Bn=R((Zc,yo)=>{"use strict";var Ft=go();if(Ft)try{Ft([],"length")}catch(r){Ft=null}yo.exports=Ft});var So=R((ep,vo)=>{"use strict";var $t=Object.defineProperty||!1;if($t)try{$t({},"a",{value:1})}catch(r){$t=!1}vo.exports=$t});var Eo=R((tp,To)=>{"use strict";To.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;t[e]=s;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==s||a.enumerable!==!0)return!1}return!0}});var xo=R((np,Co)=>{"use strict";var bo=typeof Symbol!="undefined"&&Symbol,pl=Eo();Co.exports=function(){return typeof bo!="function"||typeof Symbol!="function"||typeof bo("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:pl()}});var Fn=R((rp,wo)=>{"use strict";wo.exports=typeof Reflect!="undefined"&&Reflect.getPrototypeOf||null});var $n=R((sp,Oo)=>{"use strict";var fl=Nn();Oo.exports=fl.getPrototypeOf||null});var Do=R((op,_o)=>{"use strict";var dl="Function.prototype.bind called on incompatible ",ml=Object.prototype.toString,gl=Math.max,yl="[object Function]",Po=function(t,e){for(var n=[],s=0;s<t.length;s+=1)n[s]=t[s];for(var o=0;o<e.length;o+=1)n[o+t.length]=e[o];return n},vl=function(t,e){for(var n=[],s=e||0,o=0;s<t.length;s+=1,o+=1)n[o]=t[s];return n},Sl=function(r,t){for(var e="",n=0;n<r.length;n+=1)e+=r[n],n+1<r.length&&(e+=t);return e};_o.exports=function(t){var e=this;if(typeof e!="function"||ml.apply(e)!==yl)throw new TypeError(dl+e);for(var n=vl(arguments,1),s,o=function(){if(this instanceof s){var d=e.apply(this,Po(n,arguments));return Object(d)===d?d:this}return e.apply(t,Po(n,arguments))},i=gl(0,e.length-n.length),a=[],u=0;u<i;u++)a[u]="$"+u;if(s=Function("binder","return function ("+Sl(a,",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var p=function(){};p.prototype=e.prototype,s.prototype=new p,p.prototype=null}return s}});var gt=R((ip,Ro)=>{"use strict";var Tl=Do();Ro.exports=Function.prototype.bind||Tl});var Vt=R((ap,ko)=>{"use strict";ko.exports=Function.prototype.call});var Vn=R((lp,Mo)=>{"use strict";Mo.exports=Function.prototype.apply});var Ao=R((up,Ho)=>{"use strict";Ho.exports=typeof Reflect!="undefined"&&Reflect&&Reflect.apply});var Io=R((hp,Lo)=>{"use strict";var El=gt(),bl=Vn(),Cl=Vt(),xl=Ao();Lo.exports=xl||El.call(Cl,bl)});var qn=R((cp,No)=>{"use strict";var wl=gt(),Ol=Ie(),Pl=Vt(),_l=Io();No.exports=function(t){if(t.length<1||typeof t[0]!="function")throw new Ol("a function is required");return _l(wl,Pl,t)}});var Ko=R((pp,qo)=>{"use strict";var Dl=qn(),Bo=Bn(),$o;try{$o=[].__proto__===Array.prototype}catch(r){if(!r||typeof r!="object"||!("code"in r)||r.code!=="ERR_PROTO_ACCESS")throw r}var Kn=!!$o&&Bo&&Bo(Object.prototype,"__proto__"),Vo=Object,Fo=Vo.getPrototypeOf;qo.exports=Kn&&typeof Kn.get=="function"?Dl([Kn.get]):typeof Fo=="function"?function(t){return Fo(t==null?t:Vo(t))}:!1});var jo=R((fp,Yo)=>{"use strict";var Uo=Fn(),Wo=$n(),zo=Ko();Yo.exports=Uo?function(t){return Uo(t)}:Wo?function(t){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("getProto: not an object");return Wo(t)}:zo?function(t){return zo(t)}:null});var Jo=R((dp,Go)=>{"use strict";var Rl=Function.prototype.call,kl=Object.prototype.hasOwnProperty,Ml=gt();Go.exports=Ml.call(Rl,kl)});var Ut=R((mp,ni)=>{"use strict";var B,Hl=Nn(),Al=Vs(),Ll=Ks(),Il=Ws(),Nl=Ys(),Ge=Gs(),je=Ie(),Bl=Qs(),Fl=Zs(),$l=to(),Vl=ro(),ql=oo(),Kl=ao(),Ul=uo(),Wl=fo(),ei=Function,Un=function(r){try{return ei('"use strict"; return ('+r+").constructor;")()}catch(t){}},yt=Bn(),zl=So(),Wn=function(){throw new je},Yl=yt?(function(){try{return arguments.callee,Wn}catch(r){try{return yt(arguments,"callee").get}catch(t){return Wn}}})():Wn,ze=xo()(),X=jo(),jl=$n(),Gl=Fn(),ti=Vn(),vt=Vt(),Ye={},Jl=typeof Uint8Array=="undefined"||!X?B:X(Uint8Array),Be={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?B:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?B:ArrayBuffer,"%ArrayIteratorPrototype%":ze&&X?X([][Symbol.iterator]()):B,"%AsyncFromSyncIteratorPrototype%":B,"%AsyncFunction%":Ye,"%AsyncGenerator%":Ye,"%AsyncGeneratorFunction%":Ye,"%AsyncIteratorPrototype%":Ye,"%Atomics%":typeof Atomics=="undefined"?B:Atomics,"%BigInt%":typeof BigInt=="undefined"?B:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?B:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?B:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?B:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Al,"%eval%":eval,"%EvalError%":Ll,"%Float16Array%":typeof Float16Array=="undefined"?B:Float16Array,"%Float32Array%":typeof Float32Array=="undefined"?B:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?B:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?B:FinalizationRegistry,"%Function%":ei,"%GeneratorFunction%":Ye,"%Int8Array%":typeof Int8Array=="undefined"?B:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?B:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?B:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ze&&X?X(X([][Symbol.iterator]())):B,"%JSON%":typeof JSON=="object"?JSON:B,"%Map%":typeof Map=="undefined"?B:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!ze||!X?B:X(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Hl,"%Object.getOwnPropertyDescriptor%":yt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?B:Promise,"%Proxy%":typeof Proxy=="undefined"?B:Proxy,"%RangeError%":Il,"%ReferenceError%":Nl,"%Reflect%":typeof Reflect=="undefined"?B:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?B:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!ze||!X?B:X(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?B:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ze&&X?X(""[Symbol.iterator]()):B,"%Symbol%":ze?Symbol:B,"%SyntaxError%":Ge,"%ThrowTypeError%":Yl,"%TypedArray%":Jl,"%TypeError%":je,"%Uint8Array%":typeof Uint8Array=="undefined"?B:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?B:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?B:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?B:Uint32Array,"%URIError%":Bl,"%WeakMap%":typeof WeakMap=="undefined"?B:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?B:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?B:WeakSet,"%Function.prototype.call%":vt,"%Function.prototype.apply%":ti,"%Object.defineProperty%":zl,"%Object.getPrototypeOf%":jl,"%Math.abs%":Fl,"%Math.floor%":$l,"%Math.max%":Vl,"%Math.min%":ql,"%Math.pow%":Kl,"%Math.round%":Ul,"%Math.sign%":Wl,"%Reflect.getPrototypeOf%":Gl};if(X)try{null.error}catch(r){Qo=X(X(r)),Be["%Error.prototype%"]=Qo}var Qo,Ql=function r(t){var e;if(t==="%AsyncFunction%")e=Un("async function () {}");else if(t==="%GeneratorFunction%")e=Un("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Un("async function* () {}");else if(t==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(e=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&X&&(e=X(s.prototype))}return Be[t]=e,e},Xo={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},St=gt(),qt=Jo(),Xl=St.call(vt,Array.prototype.concat),Zl=St.call(ti,Array.prototype.splice),Zo=St.call(vt,String.prototype.replace),Kt=St.call(vt,String.prototype.slice),eu=St.call(vt,RegExp.prototype.exec),tu=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,nu=/\\(\\)?/g,ru=function(t){var e=Kt(t,0,1),n=Kt(t,-1);if(e==="%"&&n!=="%")throw new Ge("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new Ge("invalid intrinsic syntax, expected opening `%`");var s=[];return Zo(t,tu,function(o,i,a,u){s[s.length]=a?Zo(u,nu,"$1"):i||o}),s},su=function(t,e){var n=t,s;if(qt(Xo,n)&&(s=Xo[n],n="%"+s[0]+"%"),qt(Be,n)){var o=Be[n];if(o===Ye&&(o=Ql(n)),typeof o=="undefined"&&!e)throw new je("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:o}}throw new Ge("intrinsic "+t+" does not exist!")};ni.exports=function(t,e){if(typeof t!="string"||t.length===0)throw new je("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new je('"allowMissing" argument must be a boolean');if(eu(/^%?[^%]*%?$/,t)===null)throw new Ge("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=ru(t),s=n.length>0?n[0]:"",o=su("%"+s+"%",e),i=o.name,a=o.value,u=!1,p=o.alias;p&&(s=p[0],Zl(n,Xl([0,1],p)));for(var d=1,c=!0;d<n.length;d+=1){var f=n[d],m=Kt(f,0,1),y=Kt(f,-1);if((m==='"'||m==="'"||m==="`"||y==='"'||y==="'"||y==="`")&&m!==y)throw new Ge("property names with quotes must have matching quotes");if((f==="constructor"||!c)&&(u=!0),s+="."+f,i="%"+s+"%",qt(Be,i))a=Be[i];else if(a!=null){if(!(f in a)){if(!e)throw new je("base intrinsic for "+t+" exists, but the property is not available.");return}if(yt&&d+1>=n.length){var g=yt(a,f);c=!!g,c&&"get"in g&&!("originalValue"in g.get)?a=g.get:a=a[f]}else c=qt(a,f),a=a[f];c&&!u&&(Be[i]=a)}}return a}});var zn=R((gp,oi)=>{"use strict";var ri=Ut(),si=qn(),ou=si([ri("%String.prototype.indexOf%")]);oi.exports=function(t,e){var n=ri(t,!!e);return typeof n=="function"&&ou(t,".prototype.")>-1?si([n]):n}});var Yn=R((yp,ai)=>{"use strict";var iu=Ut(),Tt=zn(),au=mt(),lu=Ie(),ii=iu("%Map%",!0),uu=Tt("Map.prototype.get",!0),hu=Tt("Map.prototype.set",!0),cu=Tt("Map.prototype.has",!0),pu=Tt("Map.prototype.delete",!0),fu=Tt("Map.prototype.size",!0);ai.exports=!!ii&&function(){var t,e={assert:function(n){if(!e.has(n))throw new lu("Side channel does not contain "+au(n))},delete:function(n){if(t){var s=pu(t,n);return fu(t)===0&&(t=void 0),s}return!1},get:function(n){if(t)return uu(t,n)},has:function(n){return t?cu(t,n):!1},set:function(n,s){t||(t=new ii),hu(t,n,s)}};return e}});var ui=R((vp,li)=>{"use strict";var du=Ut(),zt=zn(),mu=mt(),Wt=Yn(),gu=Ie(),Je=du("%WeakMap%",!0),yu=zt("WeakMap.prototype.get",!0),vu=zt("WeakMap.prototype.set",!0),Su=zt("WeakMap.prototype.has",!0),Tu=zt("WeakMap.prototype.delete",!0);li.exports=Je?function(){var t,e,n={assert:function(s){if(!n.has(s))throw new gu("Side channel does not contain "+mu(s))},delete:function(s){if(Je&&s&&(typeof s=="object"||typeof s=="function")){if(t)return Tu(t,s)}else if(Wt&&e)return e.delete(s);return!1},get:function(s){return Je&&s&&(typeof s=="object"||typeof s=="function")&&t?yu(t,s):e&&e.get(s)},has:function(s){return Je&&s&&(typeof s=="object"||typeof s=="function")&&t?Su(t,s):!!e&&e.has(s)},set:function(s,o){Je&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new Je),vu(t,s,o)):Wt&&(e||(e=Wt()),e.set(s,o))}};return n}:Wt});var jn=R((Sp,hi)=>{"use strict";var Eu=Ie(),bu=mt(),Cu=Bs(),xu=Yn(),wu=ui(),Ou=wu||xu||Cu;hi.exports=function(){var t,e={assert:function(n){if(!e.has(n))throw new Eu("Side channel does not contain "+bu(n))},delete:function(n){return!!t&&t.delete(n)},get:function(n){return t&&t.get(n)},has:function(n){return!!t&&t.has(n)},set:function(n,s){t||(t=Ou()),t.set(n,s)}};return e}});var Yt=R((Tp,ci)=>{"use strict";var Pu=String.prototype.replace,_u=/%20/g,Gn={RFC1738:"RFC1738",RFC3986:"RFC3986"};ci.exports={default:Gn.RFC3986,formatters:{RFC1738:function(r){return Pu.call(r,_u,"+")},RFC3986:function(r){return String(r)}},RFC1738:Gn.RFC1738,RFC3986:Gn.RFC3986}});var er=R((Ep,di)=>{"use strict";var Du=Yt(),Ru=jn(),Jn=Object.prototype.hasOwnProperty,Fe=Array.isArray,Gt=Ru(),pi=function(t,e){return Gt.set(t,e),t},jt=function(t){return Gt.has(t)},Xn=function(t){return Gt.get(t)},fi=function(t,e){Gt.set(t,e)},ge=(function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r})(),ku=function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(Fe(n)){for(var s=[],o=0;o<n.length;++o)typeof n[o]!="undefined"&&s.push(n[o]);e.obj[e.prop]=s}}},Zn=function(t,e){for(var n=e&&e.plainObjects?{__proto__:null}:{},s=0;s<t.length;++s)typeof t[s]!="undefined"&&(n[s]=t[s]);return n},Mu=function r(t,e,n){if(!e)return t;if(typeof e!="object"&&typeof e!="function"){if(Fe(t))t.push(e);else if(t&&typeof t=="object")if(jt(t)){var s=Xn(t)+1;t[s]=e,fi(t,s)}else(n&&(n.plainObjects||n.allowPrototypes)||!Jn.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object"){if(jt(e)){for(var o=Object.keys(e),i=n&&n.plainObjects?{__proto__:null,0:t}:{0:t},a=0;a<o.length;a++){var u=parseInt(o[a],10);i[u+1]=e[o[a]]}return pi(i,Xn(e)+1)}return[t].concat(e)}var p=t;return Fe(t)&&!Fe(e)&&(p=Zn(t,n)),Fe(t)&&Fe(e)?(e.forEach(function(d,c){if(Jn.call(t,c)){var f=t[c];f&&typeof f=="object"&&d&&typeof d=="object"?t[c]=r(f,d,n):t.push(d)}else t[c]=d}),t):Object.keys(e).reduce(function(d,c){var f=e[c];return Jn.call(d,c)?d[c]=r(d[c],f,n):d[c]=f,d},p)},Hu=function(t,e){return Object.keys(e).reduce(function(n,s){return n[s]=e[s],n},t)},Au=function(r,t,e){var n=r.replace(/\+/g," ");if(e==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(s){return n}},Qn=1024,Lu=function(t,e,n,s,o){if(t.length===0)return t;var i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(m){return"%26%23"+parseInt(m.slice(2),16)+"%3B"});for(var a="",u=0;u<i.length;u+=Qn){for(var p=i.length>=Qn?i.slice(u,u+Qn):i,d=[],c=0;c<p.length;++c){var f=p.charCodeAt(c);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===Du.RFC1738&&(f===40||f===41)){d[d.length]=p.charAt(c);continue}if(f<128){d[d.length]=ge[f];continue}if(f<2048){d[d.length]=ge[192|f>>6]+ge[128|f&63];continue}if(f<55296||f>=57344){d[d.length]=ge[224|f>>12]+ge[128|f>>6&63]+ge[128|f&63];continue}c+=1,f=65536+((f&1023)<<10|p.charCodeAt(c)&1023),d[d.length]=ge[240|f>>18]+ge[128|f>>12&63]+ge[128|f>>6&63]+ge[128|f&63]}a+=d.join("")}return a},Iu=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],s=0;s<e.length;++s)for(var o=e[s],i=o.obj[o.prop],a=Object.keys(i),u=0;u<a.length;++u){var p=a[u],d=i[p];typeof d=="object"&&d!==null&&n.indexOf(d)===-1&&(e.push({obj:i,prop:p}),n.push(d))}return ku(e),t},Nu=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},Bu=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},Fu=function(t,e,n,s){if(jt(t)){var o=Xn(t)+1;return t[o]=e,fi(t,o),t}var i=[].concat(t,e);return i.length>n?pi(Zn(i,{plainObjects:s}),i.length-1):i},$u=function(t,e){if(Fe(t)){for(var n=[],s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)};di.exports={arrayToObject:Zn,assign:Hu,combine:Fu,compact:Iu,decode:Au,encode:Lu,isBuffer:Bu,isOverflow:jt,isRegExp:Nu,maybeMap:$u,merge:Mu}});var Ti=R((bp,Si)=>{"use strict";var gi=jn(),Jt=er(),Et=Yt(),Vu=Object.prototype.hasOwnProperty,yi={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},ye=Array.isArray,qu=Array.prototype.push,vi=function(r,t){qu.apply(r,ye(t)?t:[t])},Ku=Date.prototype.toISOString,mi=Et.default,G={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Jt.encode,encodeValuesOnly:!1,filter:void 0,format:mi,formatter:Et.formatters[mi],indices:!1,serializeDate:function(t){return Ku.call(t)},skipNulls:!1,strictNullHandling:!1},Uu=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},tr={},Wu=function r(t,e,n,s,o,i,a,u,p,d,c,f,m,y,g,S,v,C){for(var T=t,_=C,D=0,F=!1;(_=_.get(tr))!==void 0&&!F;){var V=_.get(t);if(D+=1,typeof V!="undefined"){if(V===D)throw new RangeError("Cyclic object value");F=!0}typeof _.get(tr)=="undefined"&&(D=0)}if(typeof d=="function"?T=d(e,T):T instanceof Date?T=m(T):n==="comma"&&ye(T)&&(T=Jt.maybeMap(T,function(U){return U instanceof Date?m(U):U})),T===null){if(i)return p&&!S?p(e,G.encoder,v,"key",y):e;T=""}if(Uu(T)||Jt.isBuffer(T)){if(p){var L=S?e:p(e,G.encoder,v,"key",y);return[g(L)+"="+g(p(T,G.encoder,v,"value",y))]}return[g(e)+"="+g(String(T))]}var A=[];if(typeof T=="undefined")return A;var K;if(n==="comma"&&ye(T))S&&p&&(T=Jt.maybeMap(T,p)),K=[{value:T.length>0?T.join(",")||null:void 0}];else if(ye(d))K=d;else{var W=Object.keys(T);K=c?W.sort(c):W}var P=u?String(e).replace(/\./g,"%2E"):String(e),b=s&&ye(T)&&T.length===1?P+"[]":P;if(o&&ye(T)&&T.length===0)return b+"[]";for(var E=0;E<K.length;++E){var w=K[E],x=typeof w=="object"&&w&&typeof w.value!="undefined"?w.value:T[w];if(!(a&&x===null)){var k=f&&u?String(w).replace(/\./g,"%2E"):String(w),M=ye(T)?typeof n=="function"?n(b,k):b:b+(f?"."+k:"["+k+"]");C.set(t,D);var q=gi();q.set(tr,C),vi(A,r(x,M,n,s,o,i,a,u,n==="comma"&&S&&ye(T)?null:p,d,c,f,m,y,g,S,v,q))}}return A},zu=function(t){if(!t)return G;if(typeof t.allowEmptyArrays!="undefined"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys!="undefined"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder!="undefined"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||G.charset;if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Et.default;if(typeof t.format!="undefined"){if(!Vu.call(Et.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var s=Et.formatters[n],o=G.filter;(typeof t.filter=="function"||ye(t.filter))&&(o=t.filter);var i;if(t.arrayFormat in yi?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=G.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof t.allowDots=="undefined"?t.encodeDotInKeys===!0?!0:G.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:G.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:G.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:G.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter=="undefined"?G.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:G.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:G.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:G.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:G.encodeValuesOnly,filter:o,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:G.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:G.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:G.strictNullHandling}};Si.exports=function(r,t){var e=r,n=zu(t),s,o;typeof n.filter=="function"?(o=n.filter,e=o("",e)):ye(n.filter)&&(o=n.filter,s=o);var i=[];if(typeof e!="object"||e===null)return"";var a=yi[n.arrayFormat],u=a==="comma"&&n.commaRoundTrip;s||(s=Object.keys(e)),n.sort&&s.sort(n.sort);for(var p=gi(),d=0;d<s.length;++d){var c=s[d],f=e[c];n.skipNulls&&f===null||vi(i,Wu(f,c,a,u,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,p))}var m=i.join(n.delimiter),y=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),m.length>0?y+m:""}});var xi=R((Cp,Ci)=>{"use strict";var De=er(),Qt=Object.prototype.hasOwnProperty,Ei=Array.isArray,Y={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:De.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},Yu=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},bi=function(r,t,e){if(r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1)return r.split(",");if(t.throwOnLimitExceeded&&e>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(t.arrayLimit===1?"":"s")+" allowed in an array.");return r},ju="utf8=%26%2310003%3B",Gu="utf8=%E2%9C%93",Ju=function(t,e){var n={__proto__:null},s=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=e.parameterLimit===1/0?void 0:e.parameterLimit,i=s.split(e.delimiter,e.throwOnLimitExceeded?o+1:o);if(e.throwOnLimitExceeded&&i.length>o)throw new RangeError("Parameter limit exceeded. Only "+o+" parameter"+(o===1?"":"s")+" allowed.");var a=-1,u,p=e.charset;if(e.charsetSentinel)for(u=0;u<i.length;++u)i[u].indexOf("utf8=")===0&&(i[u]===Gu?p="utf-8":i[u]===ju&&(p="iso-8859-1"),a=u,u=i.length);for(u=0;u<i.length;++u)if(u!==a){var d=i[u],c=d.indexOf("]="),f=c===-1?d.indexOf("="):c+1,m,y;if(f===-1?(m=e.decoder(d,Y.decoder,p,"key"),y=e.strictNullHandling?null:""):(m=e.decoder(d.slice(0,f),Y.decoder,p,"key"),m!==null&&(y=De.maybeMap(bi(d.slice(f+1),e,Ei(n[m])?n[m].length:0),function(S){return e.decoder(S,Y.decoder,p,"value")}))),y&&e.interpretNumericEntities&&p==="iso-8859-1"&&(y=Yu(String(y))),d.indexOf("[]=")>-1&&(y=Ei(y)?[y]:y),m!==null){var g=Qt.call(n,m);g&&e.duplicates==="combine"?n[m]=De.combine(n[m],y,e.arrayLimit,e.plainObjects):(!g||e.duplicates==="last")&&(n[m]=y)}}return n},Qu=function(r,t,e,n){var s=0;if(r.length>0&&r[r.length-1]==="[]"){var o=r.slice(0,-1).join("");s=Array.isArray(t)&&t[o]?t[o].length:0}for(var i=n?t:bi(t,e,s),a=r.length-1;a>=0;--a){var u,p=r[a];if(p==="[]"&&e.parseArrays)De.isOverflow(i)?u=i:u=e.allowEmptyArrays&&(i===""||e.strictNullHandling&&i===null)?[]:De.combine([],i,e.arrayLimit,e.plainObjects);else{u=e.plainObjects?{__proto__:null}:{};var d=p.charAt(0)==="["&&p.charAt(p.length-1)==="]"?p.slice(1,-1):p,c=e.decodeDotInKeys?d.replace(/%2E/g,"."):d,f=parseInt(c,10);!e.parseArrays&&c===""?u={0:i}:!isNaN(f)&&p!==c&&String(f)===c&&f>=0&&e.parseArrays&&f<=e.arrayLimit?(u=[],u[f]=i):c!=="__proto__"&&(u[c]=i)}i=u}return i},Xu=function(t,e){var n=e.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t;if(e.depth<=0)return!e.plainObjects&&Qt.call(Object.prototype,n)&&!e.allowPrototypes?void 0:[n];var s=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,i=s.exec(n),a=i?n.slice(0,i.index):n,u=[];if(a){if(!e.plainObjects&&Qt.call(Object.prototype,a)&&!e.allowPrototypes)return;u.push(a)}for(var p=0;(i=o.exec(n))!==null&&p<e.depth;){p+=1;var d=i[1].slice(1,-1);if(!e.plainObjects&&Qt.call(Object.prototype,d)&&!e.allowPrototypes)return;u.push(i[1])}if(i){if(e.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+e.depth+" and strictDepth is true");u.push("["+n.slice(i.index)+"]")}return u},Zu=function(t,e,n,s){if(t){var o=Xu(t,n);if(o)return Qu(o,e,n,s)}},eh=function(t){if(!t)return Y;if(typeof t.allowEmptyArrays!="undefined"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys!="undefined"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder!="undefined"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof t.throwOnLimitExceeded!="undefined"&&typeof t.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var e=typeof t.charset=="undefined"?Y.charset:t.charset,n=typeof t.duplicates=="undefined"?Y.duplicates:t.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof t.allowDots=="undefined"?t.decodeDotInKeys===!0?!0:Y.allowDots:!!t.allowDots;return{allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Y.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Y.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Y.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Y.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Y.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Y.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Y.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Y.decoder,delimiter:typeof t.delimiter=="string"||De.isRegExp(t.delimiter)?t.delimiter:Y.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Y.depth,duplicates:n,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Y.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Y.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Y.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:Y.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Y.strictNullHandling,throwOnLimitExceeded:typeof t.throwOnLimitExceeded=="boolean"?t.throwOnLimitExceeded:!1}};Ci.exports=function(r,t){var e=eh(t);if(r===""||r===null||typeof r=="undefined")return e.plainObjects?{__proto__:null}:{};for(var n=typeof r=="string"?Ju(r,e):r,s=e.plainObjects?{__proto__:null}:{},o=Object.keys(n),i=0;i<o.length;++i){var a=o[i],u=Zu(a,n[a],e,typeof r=="string");s=De.merge(s,u,e)}return e.allowSparse===!0?s:De.compact(s)}});var Oi=R((xp,wi)=>{"use strict";var th=Ti(),nh=xi(),rh=Yt();wi.exports={formats:rh,parse:nh,stringify:th}});var _i=R((wp,Pi)=>{"use strict";Pi.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}});var ki=R(nr=>{"use strict";var sh=Object.prototype.hasOwnProperty,oh;function Di(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch(t){return null}}function Ri(r){try{return encodeURIComponent(r)}catch(t){return null}}function ih(r){for(var t=/([^=?#&]+)=?([^&]*)/g,e={},n;n=t.exec(r);){var s=Di(n[1]),o=Di(n[2]);s===null||o===null||s in e||(e[s]=o)}return e}function ah(r,t){t=t||"";var e=[],n,s;typeof t!="string"&&(t="?");for(s in r)if(sh.call(r,s)){if(n=r[s],!n&&(n===null||n===oh||isNaN(n))&&(n=""),s=Ri(s),n=Ri(n),s===null||n===null)continue;e.push(s+"="+n)}return e.length?t+e.join("&"):""}nr.stringify=ah;nr.parse=ih});var Fi=R((Pp,Bi)=>{"use strict";var Hi=_i(),Xt=ki(),lh=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Ai=/[\n\r\t]/g,uh=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Li=/:\d+$/,hh=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,ch=/^[a-zA-Z]:/;function sr(r){return(r||"").toString().replace(lh,"")}var rr=[["#","hash"],["?","query"],function(t,e){return ve(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Mi={hash:1,query:1};function Ii(r){var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t={};var e=t.location||{};r=r||e;var n={},s=typeof r,o;if(r.protocol==="blob:")n=new Se(unescape(r.pathname),{});else if(s==="string"){n=new Se(r,{});for(o in Mi)delete n[o]}else if(s==="object"){for(o in r)o in Mi||(n[o]=r[o]);n.slashes===void 0&&(n.slashes=uh.test(r.href))}return n}function ve(r){return r==="file:"||r==="ftp:"||r==="http:"||r==="https:"||r==="ws:"||r==="wss:"}function Ni(r,t){r=sr(r),r=r.replace(Ai,""),t=t||{};var e=hh.exec(r),n=e[1]?e[1].toLowerCase():"",s=!!e[2],o=!!e[3],i=0,a;return s?o?(a=e[2]+e[3]+e[4],i=e[2].length+e[3].length):(a=e[2]+e[4],i=e[2].length):o?(a=e[3]+e[4],i=e[3].length):a=e[4],n==="file:"?i>=2&&(a=a.slice(2)):ve(n)?a=e[4]:n?s&&(a=a.slice(2)):i>=2&&ve(t.protocol)&&(a=e[4]),{protocol:n,slashes:s||ve(n),slashesCount:i,rest:a}}function ph(r,t){if(r==="")return t;for(var e=(t||"/").split("/").slice(0,-1).concat(r.split("/")),n=e.length,s=e[n-1],o=!1,i=0;n--;)e[n]==="."?e.splice(n,1):e[n]===".."?(e.splice(n,1),i++):i&&(n===0&&(o=!0),e.splice(n,1),i--);return o&&e.unshift(""),(s==="."||s==="..")&&e.push(""),e.join("/")}function Se(r,t,e){if(r=sr(r),r=r.replace(Ai,""),!(this instanceof Se))return new Se(r,t,e);var n,s,o,i,a,u,p=rr.slice(),d=typeof t,c=this,f=0;for(d!=="object"&&d!=="string"&&(e=t,t=null),e&&typeof e!="function"&&(e=Xt.parse),t=Ii(t),s=Ni(r||"",t),n=!s.protocol&&!s.slashes,c.slashes=s.slashes||n&&t.slashes,c.protocol=s.protocol||t.protocol||"",r=s.rest,(s.protocol==="file:"&&(s.slashesCount!==2||ch.test(r))||!s.slashes&&(s.protocol||s.slashesCount<2||!ve(c.protocol)))&&(p[3]=[/(.*)/,"pathname"]);f<p.length;f++){if(i=p[f],typeof i=="function"){r=i(r,c);continue}o=i[0],u=i[1],o!==o?c[u]=r:typeof o=="string"?(a=o==="@"?r.lastIndexOf(o):r.indexOf(o),~a&&(typeof i[2]=="number"?(c[u]=r.slice(0,a),r=r.slice(a+i[2])):(c[u]=r.slice(a),r=r.slice(0,a)))):(a=o.exec(r))&&(c[u]=a[1],r=r.slice(0,a.index)),c[u]=c[u]||n&&i[3]&&t[u]||"",i[4]&&(c[u]=c[u].toLowerCase())}e&&(c.query=e(c.query)),n&&t.slashes&&c.pathname.charAt(0)!=="/"&&(c.pathname!==""||t.pathname!=="")&&(c.pathname=ph(c.pathname,t.pathname)),c.pathname.charAt(0)!=="/"&&ve(c.protocol)&&(c.pathname="/"+c.pathname),Hi(c.port,c.protocol)||(c.host=c.hostname,c.port=""),c.username=c.password="",c.auth&&(a=c.auth.indexOf(":"),~a?(c.username=c.auth.slice(0,a),c.username=encodeURIComponent(decodeURIComponent(c.username)),c.password=c.auth.slice(a+1),c.password=encodeURIComponent(decodeURIComponent(c.password))):c.username=encodeURIComponent(decodeURIComponent(c.auth)),c.auth=c.password?c.username+":"+c.password:c.username),c.origin=c.protocol!=="file:"&&ve(c.protocol)&&c.host?c.protocol+"//"+c.host:"null",c.href=c.toString()}function fh(r,t,e){var n=this;switch(r){case"query":typeof t=="string"&&t.length&&(t=(e||Xt.parse)(t)),n[r]=t;break;case"port":n[r]=t,Hi(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[r]="");break;case"hostname":n[r]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[r]=t,Li.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!e;break;case"pathname":case"hash":if(t){var s=r==="pathname"?"/":"#";n[r]=t.charAt(0)!==s?s+t:t}else n[r]=t;break;case"username":case"password":n[r]=encodeURIComponent(t);break;case"auth":var o=t.indexOf(":");~o?(n.username=t.slice(0,o),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=t.slice(o+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(t))}for(var i=0;i<rr.length;i++){var a=rr[i];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin=n.protocol!=="file:"&&ve(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function dh(r){(!r||typeof r!="function")&&(r=Xt.stringify);var t,e=this,n=e.host,s=e.protocol;s&&s.charAt(s.length-1)!==":"&&(s+=":");var o=s+(e.protocol&&e.slashes||ve(e.protocol)?"//":"");return e.username?(o+=e.username,e.password&&(o+=":"+e.password),o+="@"):e.password?(o+=":"+e.password,o+="@"):e.protocol!=="file:"&&ve(e.protocol)&&!n&&e.pathname!=="/"&&(o+="@"),(n[n.length-1]===":"||Li.test(e.hostname)&&!e.port)&&(n+=":"),o+=n+e.pathname,t=typeof e.query=="object"?r(e.query):e.query,t&&(o+=t.charAt(0)!=="?"?"?"+t:t),e.hash&&(o+=e.hash),o}Se.prototype={set:fh,toString:dh};Se.extractProtocol=Ni;Se.location=Ii;Se.trimLeft=sr;Se.qs=Xt;Bi.exports=Se});var lr=R((ir,ar)=>{(function(r,t){typeof ir=="object"&&typeof ar!="undefined"?ar.exports=t():typeof define=="function"&&define.amd?define(t):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=t()})(ir,(function(){"use strict";var r=1e3,t=6e4,e=36e5,n="millisecond",s="second",o="minute",i="hour",a="day",u="week",p="month",d="quarter",c="year",f="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var b=["th","st","nd","rd"],E=P%100;return"["+P+(b[(E-20)%10]||b[E]||b[0])+"]"}},v=function(P,b,E){var w=String(P);return!w||w.length>=b?P:""+Array(b+1-w.length).join(E)+P},C={s:v,z:function(P){var b=-P.utcOffset(),E=Math.abs(b),w=Math.floor(E/60),x=E%60;return(b<=0?"+":"-")+v(w,2,"0")+":"+v(x,2,"0")},m:function P(b,E){if(b.date()<E.date())return-P(E,b);var w=12*(E.year()-b.year())+(E.month()-b.month()),x=b.clone().add(w,p),k=E-x<0,M=b.clone().add(w+(k?-1:1),p);return+(-(w+(E-x)/(k?x-M:M-x))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:p,y:c,w:u,d:a,D:f,h:i,m:o,s,ms:n,Q:d}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},T="en",_={};_[T]=S;var D="$isDayjsObject",F=function(P){return P instanceof K||!(!P||!P[D])},V=function P(b,E,w){var x;if(!b)return T;if(typeof b=="string"){var k=b.toLowerCase();_[k]&&(x=k),E&&(_[k]=E,x=k);var M=b.split("-");if(!x&&M.length>1)return P(M[0])}else{var q=b.name;_[q]=b,x=q}return!w&&x&&(T=x),x||!w&&T},L=function(P,b){if(F(P))return P.clone();var E=typeof b=="object"?b:{};return E.date=P,E.args=arguments,new K(E)},A=C;A.l=V,A.i=F,A.w=function(P,b){return L(P,{locale:b.$L,utc:b.$u,x:b.$x,$offset:b.$offset})};var K=(function(){function P(E){this.$L=V(E.locale,null,!0),this.parse(E),this.$x=this.$x||E.x||{},this[D]=!0}var b=P.prototype;return b.parse=function(E){this.$d=(function(w){var x=w.date,k=w.utc;if(x===null)return new Date(NaN);if(A.u(x))return new Date;if(x instanceof Date)return new Date(x);if(typeof x=="string"&&!/Z$/i.test(x)){var M=x.match(y);if(M){var q=M[2]-1||0,U=(M[7]||"0").substring(0,3);return k?new Date(Date.UTC(M[1],q,M[3]||1,M[4]||0,M[5]||0,M[6]||0,U)):new Date(M[1],q,M[3]||1,M[4]||0,M[5]||0,M[6]||0,U)}}return new Date(x)})(E),this.init()},b.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},b.$utils=function(){return A},b.isValid=function(){return this.$d.toString()!==m},b.isSame=function(E,w){var x=L(E);return this.startOf(w)<=x&&x<=this.endOf(w)},b.isAfter=function(E,w){return L(E)<this.startOf(w)},b.isBefore=function(E,w){return this.endOf(w)<L(E)},b.$g=function(E,w,x){return A.u(E)?this[w]:this.set(x,E)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(E,w){var x=this,k=!!A.u(w)||w,M=A.p(E),q=function(Le,re){var Oe=A.w(x.$u?Date.UTC(x.$y,re,Le):new Date(x.$y,re,Le),x);return k?Oe:Oe.endOf(a)},U=function(Le,re){return A.w(x.toDate()[Le].apply(x.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(re)),x)},Q=this.$W,ne=this.$M,ce=this.$D,Ke="set"+(this.$u?"UTC":"");switch(M){case c:return k?q(1,0):q(31,11);case p:return k?q(1,ne):q(0,ne+1);case u:var Ae=this.$locale().weekStart||0,at=(Q<Ae?Q+7:Q)-Ae;return q(k?ce-at:ce+(6-at),ne);case a:case f:return U(Ke+"Hours",0);case i:return U(Ke+"Minutes",1);case o:return U(Ke+"Seconds",2);case s:return U(Ke+"Milliseconds",3);default:return this.clone()}},b.endOf=function(E){return this.startOf(E,!1)},b.$set=function(E,w){var x,k=A.p(E),M="set"+(this.$u?"UTC":""),q=(x={},x[a]=M+"Date",x[f]=M+"Date",x[p]=M+"Month",x[c]=M+"FullYear",x[i]=M+"Hours",x[o]=M+"Minutes",x[s]=M+"Seconds",x[n]=M+"Milliseconds",x)[k],U=k===a?this.$D+(w-this.$W):w;if(k===p||k===c){var Q=this.clone().set(f,1);Q.$d[q](U),Q.init(),this.$d=Q.set(f,Math.min(this.$D,Q.daysInMonth())).$d}else q&&this.$d[q](U);return this.init(),this},b.set=function(E,w){return this.clone().$set(E,w)},b.get=function(E){return this[A.p(E)]()},b.add=function(E,w){var x,k=this;E=Number(E);var M=A.p(w),q=function(ne){var ce=L(k);return A.w(ce.date(ce.date()+Math.round(ne*E)),k)};if(M===p)return this.set(p,this.$M+E);if(M===c)return this.set(c,this.$y+E);if(M===a)return q(1);if(M===u)return q(7);var U=(x={},x[o]=t,x[i]=e,x[s]=r,x)[M]||1,Q=this.$d.getTime()+E*U;return A.w(Q,this)},b.subtract=function(E,w){return this.add(-1*E,w)},b.format=function(E){var w=this,x=this.$locale();if(!this.isValid())return x.invalidDate||m;var k=E||"YYYY-MM-DDTHH:mm:ssZ",M=A.z(this),q=this.$H,U=this.$m,Q=this.$M,ne=x.weekdays,ce=x.months,Ke=x.meridiem,Ae=function(re,Oe,lt,kt){return re&&(re[Oe]||re(w,k))||lt[Oe].slice(0,kt)},at=function(re){return A.s(q%12||12,re,"0")},Le=Ke||function(re,Oe,lt){var kt=re<12?"AM":"PM";return lt?kt.toLowerCase():kt};return k.replace(g,(function(re,Oe){return Oe||(function(lt){switch(lt){case"YY":return String(w.$y).slice(-2);case"YYYY":return A.s(w.$y,4,"0");case"M":return Q+1;case"MM":return A.s(Q+1,2,"0");case"MMM":return Ae(x.monthsShort,Q,ce,3);case"MMMM":return Ae(ce,Q);case"D":return w.$D;case"DD":return A.s(w.$D,2,"0");case"d":return String(w.$W);case"dd":return Ae(x.weekdaysMin,w.$W,ne,2);case"ddd":return Ae(x.weekdaysShort,w.$W,ne,3);case"dddd":return ne[w.$W];case"H":return String(q);case"HH":return A.s(q,2,"0");case"h":return at(1);case"hh":return at(2);case"a":return Le(q,U,!0);case"A":return Le(q,U,!1);case"m":return String(U);case"mm":return A.s(U,2,"0");case"s":return String(w.$s);case"ss":return A.s(w.$s,2,"0");case"SSS":return A.s(w.$ms,3,"0");case"Z":return M}return null})(re)||M.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(E,w,x){var k,M=this,q=A.p(w),U=L(E),Q=(U.utcOffset()-this.utcOffset())*t,ne=this-U,ce=function(){return A.m(M,U)};switch(q){case c:k=ce()/12;break;case p:k=ce();break;case d:k=ce()/3;break;case u:k=(ne-Q)/6048e5;break;case a:k=(ne-Q)/864e5;break;case i:k=ne/e;break;case o:k=ne/t;break;case s:k=ne/r;break;default:k=ne}return x?k:A.a(k)},b.daysInMonth=function(){return this.endOf(p).$D},b.$locale=function(){return _[this.$L]},b.locale=function(E,w){if(!E)return this.$L;var x=this.clone(),k=V(E,w,!0);return k&&(x.$L=k),x},b.clone=function(){return A.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},P})(),W=K.prototype;return L.prototype=W,[["$ms",n],["$s",s],["$m",o],["$H",i],["$W",a],["$M",p],["$y",c],["$D",f]].forEach((function(P){W[P[1]]=function(b){return this.$g(b,P[0],P[1])}})),L.extend=function(P,b){return P.$i||(P(b,K,L),P.$i=!0),L},L.locale=V,L.isDayjs=F,L.unix=function(P){return L(1e3*P)},L.en=_[T],L.Ls=_,L.p={},L}))});var Vi=R((ur,hr)=>{(function(r,t){typeof ur=="object"&&typeof hr!="undefined"?hr.exports=t(lr()):typeof define=="function"&&define.amd?define(["dayjs"],t):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_locale_zh_cn=t(r.dayjs)})(ur,(function(r){"use strict";function t(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var e=t(r),n={name:"zh-cn",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(s,o){return o==="W"?s+"\u5468":s+"\u65E5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206",LLLL:"YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524D",s:"\u51E0\u79D2",m:"1 \u5206\u949F",mm:"%d \u5206\u949F",h:"1 \u5C0F\u65F6",hh:"%d \u5C0F\u65F6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4E2A\u6708",MM:"%d \u4E2A\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:function(s,o){var i=100*s+o;return i<600?"\u51CC\u6668":i<900?"\u65E9\u4E0A":i<1100?"\u4E0A\u5348":i<1300?"\u4E2D\u5348":i<1800?"\u4E0B\u5348":"\u665A\u4E0A"}};return e.default.locale(n,null,!0),n}))});var qi=R((cr,pr)=>{(function(r,t){typeof cr=="object"&&typeof pr!="undefined"?pr.exports=t():typeof define=="function"&&define.amd?define(t):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_relativeTime=t()})(cr,(function(){"use strict";return function(r,t,e){r=r||{};var n=t.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(a,u,p,d){return n.fromToBase(a,u,p,d)}e.en.relativeTime=s,n.fromToBase=function(a,u,p,d,c){for(var f,m,y,g=p.$locale().relativeTime||s,S=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],v=S.length,C=0;C<v;C+=1){var T=S[C];T.d&&(f=d?e(a).diff(p,T.d,!0):p.diff(a,T.d,!0));var _=(r.rounding||Math.round)(Math.abs(f));if(y=f>0,_<=T.r||!T.r){_<=1&&C>0&&(T=S[C-1]);var D=g[T.l];c&&(_=c(""+_)),m=typeof D=="string"?D.replace("%d",_):D(_,u,T.l,y);break}}if(u)return m;var F=y?g.future:g.past;return typeof F=="function"?F(m):F.replace("%s",m)},n.to=function(a,u){return o(a,u,this,!0)},n.from=function(a,u){return o(a,u,this)};var i=function(a){return a.$u?e.utc():e()};n.toNow=function(a){return this.to(i(this),a)},n.fromNow=function(a){return this.from(i(this),a)}}}))});var cc={};Ue(cc,{ApplicationModel:()=>At,BaseDomain:()=>O,BaseEvents:()=>ps,BizError:()=>be,CanvasDrawing:()=>dn,CurSystem:()=>gn,HistoryCore:()=>en,HttpClientCore:()=>tn,ListCore:()=>Yr,MultipleSelectionCore:()=>jr,NavigatorCore:()=>bt,RequestCore:()=>_t,Result:()=>H,RouteMenusModel:()=>Sh,RouteViewCore:()=>Te,ShortcutModel:()=>ns,SlateDOM:()=>En,SlateEditorModel:()=>ic,SlateNode:()=>Sn,StorageCore:()=>ts,applyMixins:()=>Ra,base:()=>j,build:()=>zi,buildUrl:()=>Zt,createQRCode:()=>Zh,merge:()=>Uh,noop:()=>Kh,omit:()=>zr,onRequestCreated:()=>qh,onViewCreated:()=>yh,qs:()=>Wh,rutil:()=>mn,system:()=>rc,ui:()=>un});function xn(r){return{all:r=r||new Map,on:function(t,e){var n=r.get(t);n?n.push(e):r.set(t,[e])},off:function(t,e){var n=r.get(t);n&&(e?n.splice(n.indexOf(e)>>>0,1):r.set(t,[]))},emit:function(t,e){var n=r.get(t);n&&n.slice().map(function(s){s(e)}),(n=r.get("*"))&&n.slice().map(function(s){s(t,e)})}}}function Da(){let r=0;return function(){return r+=1,r}}var cs=Da(),ps=(e=>(e.Loading="__loading",e.Destroy="__destroy",e))(ps||{});function j(){let r=xn(),t=[];return{off(e,n){r.off(e,n)},on(e,n){let s=()=>{t=t.filter(o=>o!==s),this.off(e,n)};return t.push(s),r.on(e,n),s},uid:cs,emit(e,n){r.emit(e,n)},destroy(){for(let e=0;e<t.length;e+=1){let n=t[e];n()}this.emit("__destroy",null)}}}var O=class{constructor(t={}){l(this,"unique_id","BaseDomain");l(this,"debug",!1);l(this,"_emitter",xn());l(this,"listeners",{});let{unique_id:e,debug:n}=t;e&&(this.unique_id=e)}uid(){return cs()}log(...t){return this.debug?[`%c CORE %c ${this.unique_id} %c`,"color:white;background:#dfa639;border-top-left-radius:2px;border-bottom-left-radius:2px;","color:white;background:#19be6b;border-top-right-radius:2px;border-bottom-right-radius:2px;","color:#19be6b;",...t]:[]}errorTip(...t){this.debug&&console.log(`%c CORE %c ${this.unique_id} %c`,"color:white;background:red;border-top-left-radius:2px;border-bottom-left-radius:2px;","color:white;background:#19be6b;border-top-right-radius:2px;border-bottom-right-radius:2px;","color:#19be6b;",...t)}off(t,e){this._emitter.off(t,e)}offEvent(t){let e=this.listeners[t]||[];for(let n=0;n<e.length;n+=1){let s=e[n];s()}}on(t,e){let n=()=>{let o=this.listeners[t]||[];this.listeners[t]=o.filter(i=>i!==n),this.off(t,e)},s=this.listeners[t]||[];return s.push(n),this.listeners[t]=s,this._emitter.on(t,e),n}emit(t,e){this._emitter.emit(t,e)}destroy(){Object.keys(this.listeners).map(t=>{let e=this.listeners[t]||[];for(let n=0;n<e.length;n+=1){let s=e[n];s()}}),this.emit("__destroy")}onDestroy(t){return this.on("__destroy",t)}get[Symbol.toStringTag](){return"Domain"}};function Ra(r,t){t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))})})}var be=class extends Error{constructor(e,n,s=null){super(e.join(`
`));l(this,"messages");l(this,"code");l(this,"data",null);this.messages=e,this.code=n,this.data=s}};var H={Ok:r=>({data:r,error:null}),Err:(r,t,e=null)=>({data:e,code:t,error:Array.isArray(r)?new be(r,t,e):typeof r=="string"?new be([r],t,e):r instanceof be?r:typeof r=="object"?new be([r.message],t,e):r?r.error:new be(["\u672A\u77E5\u9519\u8BEF"],t,e)})};var Ht={sm:0,md:768,lg:992,xl:1200,"2xl":1536};function fs(r){return r>=Ht["2xl"]?"2xl":r>=Ht.xl?"xl":r>=Ht.lg?"lg":r>=Ht.md?"md":"sm"}var ds=(v=>(v[v.Tip=0]="Tip",v[v.Loading=1]="Loading",v[v.HideLoading=2]="HideLoading",v[v.Error=3]="Error",v[v.Login=4]="Login",v[v.Logout=5]="Logout",v[v.ForceUpdate=6]="ForceUpdate",v[v.DeviceSizeChange=7]="DeviceSizeChange",v[v.Ready=8]="Ready",v[v.Show=9]="Show",v[v.Hidden=10]="Hidden",v[v.Resize=11]="Resize",v[v.Blur=12]="Blur",v[v.Keydown=13]="Keydown",v[v.OrientationChange=14]="OrientationChange",v[v.EscapeKeyDown=15]="EscapeKeyDown",v[v.StateChange=16]="StateChange",v))(ds||{}),At=class extends O{constructor(e){super();l(this,"$user");l(this,"$storage");l(this,"lifetimes");l(this,"ready",!1);l(this,"screen",{width:0,height:0});l(this,"env",{wechat:!1,ios:!1,android:!1,pc:!1,weapp:!1,prod:"develop"});l(this,"orientation","vertical");l(this,"curDeviceSize","md");l(this,"height",0);l(this,"theme","system");l(this,"safeArea",!1);l(this,"Events",ds);let{user:n,storage:s,beforeReady:o,onReady:i}=e;this.$user=n,this.$storage=s,this.lifetimes={beforeReady:o,onReady:i}}get state(){return{ready:this.ready,theme:this.theme,env:this.env,deviceSize:this.curDeviceSize,height:this.height}}start(e){return N(this,null,function*(){let{width:n,height:s}=e;this.screen=$(h({},this.screen),{width:n,height:s}),this.curDeviceSize=fs(n);let{beforeReady:o}=this.lifetimes;if(o){let i=yield o();if(i.error)return H.Err(i.error)}return this.ready=!0,this.emit(8),this.emit(16,h({},this.state)),H.Ok(null)})}setTheme(e){let n="\u8BF7\u5728 connect.web \u4E2D\u5B9E\u73B0 setTheme \u65B9\u6CD5";return console.warn(n),H.Err(n)}getTheme(){return console.warn("\u8BF7\u5728 connect.web \u4E2D\u5B9E\u73B0 getTheme \u65B9\u6CD5"),"light"}tipUpdate(){this.emit(6)}tip(e){return this.emit(0,e),e.text.join(`
`)}loading(e){return this.emit(1,e),{hideLoading:()=>{this.emit(2)}}}hideLoading(){this.emit(2)}vibrate(){}setSize(e){this.screen=e}setTitle(e){throw new Error("\u8BF7\u5B9E\u73B0 setTitle \u65B9\u6CD5")}openWindow(e){throw new Error("\u8BF7\u5B9E\u73B0 openWindow \u65B9\u6CD5")}setEnv(e){this.env=h(h({},this.env),e)}setHeight(e){this.height=e,this.emit(16,h({},this.state))}copy(e){throw new Error("\u8BF7\u5B9E\u73B0 copy \u65B9\u6CD5")}getComputedStyle(e){throw new Error("\u8BF7\u5B9E\u73B0 getComputedStyle \u65B9\u6CD5")}notify(e){console.log("\u8BF7\u5B9E\u73B0 notify \u65B9\u6CD5")}disablePointer(){throw new Error("\u8BF7\u5B9E\u73B0 disablePointer \u65B9\u6CD5")}enablePointer(){throw new Error("\u8BF7\u5B9E\u73B0 enablePointer \u65B9\u6CD5")}keydown(e){e.code==="Escape"&&this.escape(),this.emit(13,e)}escape(){this.emit(15)}resize(e){this.screen=e,this.emit(11,e)}blur(){this.emit(12)}handleScreenOrientationChange(e){if(e===0){this.orientation="vertical",this.emit(14,this.orientation);return}this.orientation="horizontal",this.emit(14,this.orientation)}handleResize(e){this.screen=e;let n=fs(e.width);n!==this.curDeviceSize&&(this.curDeviceSize=n,this.emit(7,this.curDeviceSize)),this.emit(11,e)}onReady(e){return this.on(8,e)}onDeviceSizeChange(e){return this.on(7,e)}onUpdate(e){return this.on(6,e)}onOrientationChange(e){return this.on(14,e)}onResize(e){return this.on(11,e)}onBlur(e){return this.on(12,e)}onShow(e){return this.on(9,e)}onHidden(e){return this.on(10,e)}onKeydown(e){return this.on(13,e)}onEscapeKeyDown(e){return this.on(15,e)}onTip(e){return this.on(0,e)}onLoading(e){return this.on(1,e)}onHideLoading(e){return this.on(2,e)}onStateChange(e){return this.on(16,e)}onError(e){return this.on(3,e)}};var te=class extends O{constructor(e={}){super(e);l(this,"name","PresenceCore");l(this,"debug",!1);l(this,"animationName","none");l(this,"mounted",!1);l(this,"enter",!1);l(this,"visible",!1);l(this,"exit",!1);let{mounted:n=!1,visible:s=!1}=e;this.mounted=n,this.visible=s,s&&(this.mounted=!0)}get state(){return{mounted:this.mounted,enter:this.enter,visible:this.visible,exit:this.exit,text:this.exit?"exit":this.enter?"enter":this.visible?"visible":"unknown"}}toggle(){if(this.visible){this.hide();return}this.show()}show(){this.mounted===!1&&(this.mounted=!0),this.exit=!1,this.enter=!0,this.visible=!0,this.emit(0,h({},this.state)),setTimeout(()=>{this.emit(2)},180)}hide(e={}){let{destroy:n=!0}=e;if(n===!1){this.exit=!0,this.enter=!1,this.emit(0,h({},this.state)),setTimeout(()=>{this.visible=!1,this.emit(4),this.emit(0,h({},this.state))},180);return}this.exit=!0,this.enter=!1,this.emit(0,h({},this.state)),setTimeout(()=>{this.visible=!1,this.emit(4),this.emit(0,h({},this.state)),this.unmount()},180)}unmount(){this.mounted=!1,this.enter=!1,this.visible=!1,this.exit=!1,this.emit(6),this.emit(0,h({},this.state))}reset(){this.mounted=!1,this.enter=!1,this.visible=!1,this.exit=!1,this.emit(0,h({},this.state))}onTmpShow(e){return this.on(3,e)}onTmpHidden(e){return this.on(5,e)}onShow(e){return this.on(2,e)}onHidden(e){return this.on(4,e)}onUnmounted(e){return this.on(6,e)}onStateChange(e){return this.on(0,e)}onPresentChange(e){return this.on(1,e)}get[Symbol.toStringTag](){return"Presence"}};var or=ht(Oi()),$i=ht(Fi());var fe=class fe extends O{constructor(){super(...arguments);l(this,"unique_id","NavigatorCore");l(this,"debug",!1);l(this,"name","root");l(this,"pathname","/");l(this,"query",{});l(this,"params",{});l(this,"location",{});l(this,"href","/");l(this,"histories",[]);l(this,"prevHistories",[]);l(this,"prevPathname",null);l(this,"origin","");l(this,"host","");l(this,"_pending",{pathname:"/",search:"",type:"initialize"})}static parse(e){let a=(0,$i.default)(e),{pathname:n,query:s}=a,o=pe(a,["pathname","query"]),i=or.default.parse(s,{ignoreQueryPrefix:!0});return fe.prefix&&n.startsWith(fe.prefix)?$(h({},o),{query:i,pathname:n.replace(fe.prefix,"")}):$(h({},o),{query:i,pathname:n})}get state(){return{pathname:this.pathname,search:this._pending.search,params:this.params,query:this.query,location:this.location}}prepare(e){return N(this,null,function*(){let{host:n,pathname:s,href:o,search:i,origin:a}=e,u=s;fe.prefix&&fe.prefix.match(/^\/[a-z0-9A-Z]{1,}/)&&(u=s.replace(fe.prefix,"")),this.setPathname(u),this.origin=a,this.host=n,this.location=e;let p=mh(o);this.query=p,this._pending={pathname:u,search:i,type:"initialize"}})}start(){let{pathname:e}=this._pending;this.setPathname(e),this.histories=[{pathname:e}],this.emit(7,h({},this._pending))}setPrevPathname(e){this.prevPathname=e}setPathname(e){this.pathname=e}pushState(e){let n=(fe.prefix+e).replace(/^\/\//,"/"),s=`${this.origin}${n}`,o=new URL(s),{pathname:i,search:a}=o,u=this.pathname;this.setPrevPathname(u),this.setPathname(i),this.histories.push({pathname:i}),this.emit(0,{from:u,to:i,path:i+a,pathname:i}),this.emit(10,[...this.histories])}replaceState(e){return N(this,null,function*(){let n=`${this.origin}${fe.prefix}${e}`,s=new URL(n),{pathname:o,search:i}=s;this.setPrevPathname(this.pathname),this.setPathname(o),this.histories[this.histories.length-1]={pathname:o},this.emit(1,{from:this.prevPathname,path:o+i,pathname:o}),this.emit(10,[...this.histories])})}handlePopState({type:e,pathname:n,href:s}){if(console.log("[DOMAIN]navigator/index - handlePopState",e,this.pathname,this.prevHistories),e!=="popstate")return;let o=n,i=this.pathname;this.setPrevPathname(i),this.setPathname(o);let a=(()=>{if(this.prevHistories.length===0)return!1;let d=this.prevHistories[this.prevHistories.length-1];return(d==null?void 0:d.pathname)===o})();if(this._pending={pathname:n,search:"",type:a?"forward":"back"},a){this.setPrevPathname(this.pathname),this.setPathname(o);let d=this.prevHistories.pop();d&&(this.histories=this.histories.concat([d])),this.emit(4),this.emit(10,[...this.histories]),this.emit(2,{type:"forward",pathname:n,href:s});return}this.emit(3);let u=this.histories[this.histories.length-1];this.prevHistories=this.prevHistories.concat([u]).filter(Boolean),this.setPrevPathname(this.pathname),this.setPathname(o),console.log("[DOMAIN]navigator - before pop",this.histories.map(d=>d.pathname));let p=this.histories.slice(0,this.histories.length-1);this.histories=p.filter(Boolean),this.emit(10,[...this.histories]),this.emit(2,{type:"back",pathname:n,href:s})}onStart(e){return this.on(6,e)}onHistoryChange(e){return this.on(10,e)}onPushState(e){return this.on(0,e)}onReplaceState(e){return this.on(1,e)}onPopState(e){return this.on(2,e)}onReload(e){return this.on(5,e)}onPathnameChange(e){return this.on(7,e)}onBack(e){return this.on(3,e)}onForward(e){return this.on(4,e)}onRelaunch(e){return this.on(8,e)}onHistoriesChange(e){return this.on(10,e)}};l(fe,"prefix",null);var bt=fe;function mh(r){let[,t]=r.split("?");return t?or.default.parse(t):{}}var fr=ht(lr()),Yp=ht(Vi()),Ki=ht(qi());fr.default.extend(Ki.default);fr.default.locale("zh-cn");function dr(r){return String(r).length===1?`0${r}`:String(r)}function le(r){return r===null||r===void 0?"":Object.keys(r).filter(t=>r[t]!==void 0).map(t=>`${t}=${encodeURIComponent(r[t])}`).join("&")}function Ui(r=1e3){return new Promise(t=>{setTimeout(()=>{t(null)},r)})}function Zt(r,t,e){let n=!e||Object.keys(e).length===0?"":"?"+le(e);return!r.match(/:[a-z]{1,}/)||!t||Object.keys(t).length===0?r+n:r.replace(/:([a-z]{1,})/g,(...o)=>{let[,i]=o;return String(t[i]||"")})+n}function Wi(r,t=null){return Object.keys(r).map(n=>{let s=r[n],{title:o,pathname:i,options:a,children:u}=s,p=t?[t.name,n].filter(Boolean).join("."):n;if(u){let d=Wi(u,{name:p,pathname:i});return[{title:o,name:p,pathname:i,options:a,layout:!0,parent:t?{name:t.name}:null},...d]}return[{title:o,name:p,pathname:i,options:a,parent:t?{name:t.name}:null}]}).reduce((n,s)=>n.concat(s),[])}function zi(r){let t=Wi(r),e=t.map(s=>({[s.name]:s})).reduce((s,o)=>h(h({},s),o),{}),n=t.map(s=>({[s.pathname]:s})).reduce((s,o)=>h(h({},s),o),{});return{routes:e,routesWithPathname:n}}var Te=class extends O{constructor(e){super(e);l(this,"unique_id","ViewCore");l(this,"debug",!1);l(this,"id",this.uid());l(this,"name");l(this,"pathname");l(this,"title");l(this,"animation",{in:"fade-in",out:"fade-out"});l(this,"query",{});l(this,"params",{});l(this,"_showed",!1);l(this,"loaded",!1);l(this,"mounted",!0);l(this,"layered",!1);l(this,"isRoot",!1);l(this,"parent");l(this,"curView",null);l(this,"subViews",[]);l(this,"$presence",new te);let{name:n,pathname:s,title:o,query:i={},visible:a=!1,animation:u={},parent:p=null,views:d=[]}=e;this.name=n,this.pathname=s,this.parent=p,this.title=o,this.unique_id=o,this.animation=u,this.subViews=d,d.length&&(this.curView=d[0]),this.query=i,a&&(this.mounted=!0);for(let c=0;c<d.length;c+=1){let f=d[c];f.parent=this}this.$presence.onStateChange(c=>{let{visible:f,mounted:m}=c,y=this.state.visible;y===!1&&f&&this.setShow(),y&&f===!1&&this.setHidden(),this.mounted=!!m,this.emit(16,h({},this.state))}),this.$presence.onUnmounted(()=>{this.emit(12)}),vh(this)}get state(){return{mounted:this.mounted,visible:this.visible,layered:this.layered}}get href(){return[this.pathname,le(this.query)].filter(Boolean).join("?")}get visible(){return this.$presence.visible}appendView(e){e.parent=this,this.subViews.length===0&&e.visible&&(this.curView=e),this.subViews.includes(e)||(this.emit(2,e),this.subViews.push(e)),this.emit(3,[...this.subViews])}replaceViews(e){this.subViews=e,this.emit(3,[...this.subViews])}removeView(e,n={}){if(!this.subViews.includes(e)){console.warn("the view is not the child view");return}e.onUnmounted(()=>{e.destroy(),this.subViews=this.subViews.filter(s=>s!==e),n.callback&&n.callback(),this.emit(1,e),this.emit(3,[...this.subViews])}),e.hide({reason:n.reason,destroy:n.destroy}),this.emit(0,e),this.emit(3,[...this.subViews])}findCurView(){return this.curView?this.curView.findCurView():this}ready(){this.emit(6)}showView(e,n={}){if(e===this){console.warn("cannot show self");return}if(e.visible){console.warn("the sub view has been visible",e.name);return}(()=>{if(!this.visible){if(!this.parent){this.isRoot||console.warn("no parent");return}this.parent.showView(this,n)}})(),n.reason==="show_sibling"&&this.curView&&this.curView.hide(n),this.appendView(e),this.emit(8),this.curView=e,e.show(),this.emit(4,this.curView)}show(){if(this.visible){this.$presence.state.mounted=!0;return}this.$presence.show()}hide(e={}){if(this.visible===!1){console.warn("has been hide");return}for(let n=0;n<this.subViews.length;n+=1)this.subViews[n].hide(e);this.emit(10),this.$presence.hide({reason:e.reason,destroy:e.destroy})}setShow(){this._showed||(this._showed=!0,this.emit(9))}setHidden(){console.log("[DOMAIN]route_view/index - hidden",this.title,this._showed),this._showed=!1,this.emit(11)}mount(){this.setMounted()}unmount(){this.subViews=[],this.emit(16,h({},this.state))}setMounted(){this.mounted||(this.mounted=!0,this.emit(7))}setUnmounted(){this.mounted=!1,this.emit(12)}setLoaded(){this.loaded=!0}setUnload(){this.loaded=!1}buildUrl(e){return Zt(this.pathname,this.params,e)}buildUrlWithPrefix(e){let n=Zt(this.pathname,this.params,e);return[bt.prefix,n].join("")}onStart(e){return this.on(15,e)}onReady(e){return this.on(6,e)}onMounted(e){return this.on(7,e)}onViewShow(e){return this.on(5,e)}onBeforeShow(e){return this.on(8,e)}onShow(e){return this.on(9,e)}onBeforeHide(e){return this.on(10,e)}onHidden(e){return this.on(11,e)}onLayered(e){return this.on(13,e)}onUncover(e){return this.on(14,e)}onUnmounted(e){return this.on(12,e)}onSubViewChanged(e){return this.on(0,e)}onSubViewAppended(e){return this.on(2,e)}onSubViewRemoved(e){return this.on(1,e)}onSubViewsChange(e){return this.on(3,e)}onCurViewChange(e){return this.on(4,e)}onMatched(e){return this.on(17,e)}onNotFound(e){return this.on(18,e)}onStateChange(e){return this.on(16,e)}},mr=null;function yh(r){mr=r}function vh(r){mr&&mr(r)}function Sh(r){let t={refresh(){i.emit(0,h({},s))},setCurMenu(u){n=u,[].includes(u),t.refresh()}},e={},n=r.route,s={get menus(){return r.menus},get route_name(){return n}},o;(d=>(d[d.StateChange=0]="StateChange",d[d.Error=1]="Error"))(o||(o={}));let i=j(),a=r.$history.onRouteChange(({name:u})=>{t.setCurMenu(u)});return{methods:t,ui:e,state:s,ready(){},destroy(){a(),i.destroy()},onStateChange(u){return i.on(0,u)},onError(u){return i.on(1,u)}}}var en=class extends O{constructor(e){super(e);l(this,"virtual",!1);l(this,"routes");l(this,"views");l(this,"stacks",[]);l(this,"cursor",-1);l(this,"$router");l(this,"$view");let{virtual:n=!1,view:s,router:o,routes:i,views:a}=e;this.$view=s,this.$router=o,this.routes=i,this.views=a,this.virtual=n}get state(){return{href:this.$router.href,stacks:this.stacks.map(e=>{let{id:n,pathname:s,title:o,query:i,visible:a}=e;return{id:[s,le(i)].filter(Boolean).join("?"),key:s,title:o,query:JSON.stringify(i,null,2),visible:a}}),cursor:this.cursor}}push(e,n={},s={}){var c;let{ignore:o}=s;if(this.isLayout(e)){console.log("[DOMAIN]history/index - the target url is layout",e);return}let i=this.routes[e];if(!i){console.log("[DOMAIN]history/index - push 2. no matched route",e);return}let a=[i.pathname,le(n)].filter(Boolean).join("?");if(a===this.$router.href)return;let u=this.views[a];if(u){if(this.ensureParent(u),u.query=n,!u.parent){console.log("[DOMAIN]history/index - error1");return}this.$router.href=u.href,this.$router.name=u.name,this.stacks=this.stacks.slice(0,this.cursor+1).concat(u),this.cursor+=1,u.parent.showView(u,{reason:"show_sibling",destroy:!1}),this.emit(1,{reason:"push",view:u,name:e,href:u.href,pathname:u.pathname,query:u.query,ignore:o}),this.emit(5,h({},this.state));return}let p=(()=>{let f=this.routes[e];return f||null})();if(!p)return console.log("[DOMAIN]history/index - push 2. no matched route",a),null;let d=new Te({name:p.name,pathname:p.pathname,title:p.title,query:n,animation:(c=p.options)==null?void 0:c.animation,parent:null});if(this.views[a]=d,this.ensureParent(d),!d.parent){console.log("[DOMAIN]history/index - push 3. ",p.name);return}this.$router.href=d.href,this.$router.name=d.name,this.stacks=this.stacks.slice(0,this.cursor+1).concat(d),this.cursor+=1,d.parent.showView(d,{reason:"show_sibling",destroy:!1}),this.emit(1,{reason:"push",view:d,name:e,href:d.href,pathname:d.pathname,query:d.query,ignore:o}),this.emit(5,h({},this.state))}replace(e,n={}){var p,d,c;let s=[e,le(n)].filter(Boolean).join("?");if(s===this.$router.href){console.log("[DOMAIN]history/index - replace target url is",s,"and cur href is",this.$router.href);return}let o=this.views[s];if(o){if(this.ensureParent(o),o.query=n,!o.parent){console.log("[DOMAIN]history/index - replace 1");return}this.$router.href=o.href,this.$router.name=o.name;let f=this.stacks[this.stacks.length-1];f&&((p=f.parent)==null||p.removeView(f)),this.stacks[this.stacks.length-1]=o,o.parent.showView(o),this.emit(1,{reason:"replace",view:o,name:o.name,href:o.href,pathname:o.pathname,query:o.query}),this.emit(5,h({},this.state));return}let i=(()=>{let f=this.routes[e];return f||null})();if(!i)return console.log("[DOMAIN]history/index - replace 2. no matched route"),null;let a=new Te({name:i.name,pathname:i.pathname,title:i.title,query:n,animation:(d=i.options)==null?void 0:d.animation,parent:null});if(this.views[s]=a,this.ensureParent(a),!a.parent){console.log("[DOMAIN]history/index - replace 3. ");return}this.$router.href=a.href,this.$router.name=a.name;let u=this.stacks[this.stacks.length-1];u&&((c=u.parent)==null||c.removeView(u,{reason:"show_sibling",callback:()=>{delete this.views[s]}})),this.stacks[this.stacks.length-1]=a,a.parent.showView(a),this.emit(1,{reason:"replace",view:a,name:a.name,href:a.href,pathname:a.pathname,query:a.query}),this.emit(5,h({},this.state))}back(e={}){var a;let n=this.cursor-1,s=this.stacks[n];if(!s)return;let o=s.href;if(!s.parent)return;this.$router.href=o,this.$router.name=s.name,this.cursor=n;let i=this.stacks.slice(n+1);for(let u=0;u<i.length;u+=1){let p=i[u];(a=p.parent)==null||a.removeView(p,{reason:"back",destroy:!0,callback:()=>{delete this.views[p.href]}})}s.parent.showView(s,{reason:"back",destroy:!0}),this.emit(1,{reason:"back",view:s,name:s.name,href:s.href,pathname:s.pathname,query:s.query,data:e.data}),this.emit(3),this.emit(5,h({},this.state))}forward(){var i;let e=this.cursor+1,n=this.stacks[e];if(!n||!n.parent)return;let s=n.href;this.$router.href=s,this.$router.name=n.name,this.cursor=e;let o=this.stacks.slice(e+1);for(let a=0;a<o.length;a+=1){let u=o[a];(i=u.parent)==null||i.removeView(u,{reason:"forward",callback:()=>{delete this.views[u.href]}})}n.parent.showView(n),this.emit(1,{reason:"forward",view:n,name:n.name,href:n.href,pathname:n.pathname,query:n.query}),this.emit(4),this.emit(5,h({},this.state))}reload(){}destroyAllAndPush(e,n={},s={}){var m;let{ignore:o}=s;if(this.isLayout(e)){console.log("[DOMAIN]history/index - the target url is layout",e);return}let i=this.routes[e];if(!i){console.log("[DOMAIN]history/index - push 2. no matched route",e);return}let a=[i.pathname,le(n)].filter(Boolean).join("?");if(a===this.$router.href)return;let u=this.views.root,p=this.views["root.home_layout"],d=Object.keys(this.views);for(let y=0;y<d.length;y+=1)(()=>{let g=d[y];this.views[g].unmount()})();this.views={root:u,"root.home_layout":p};let c=(()=>{let y=this.routes[e];return y||null})();if(!c)return console.log("[DOMAIN]history/index - push 2. no matched route",a),null;let f=new Te({name:c.name,pathname:c.pathname,title:c.title,query:n,animation:(m=c.options)==null?void 0:m.animation,parent:null});if(this.views[a]=f,this.ensureParent(f),!f.parent){console.log("[DOMAIN]history/index - push 3. ",c.name);return}this.$router.href=f.href,this.$router.name=f.name,this.stacks=this.stacks.slice(0,this.cursor+1).concat(f),this.cursor+=1,f.parent.showView(f,{reason:"show_sibling",destroy:!1}),this.emit(1,{reason:"push",view:f,name:e,href:f.href,pathname:f.pathname,query:f.query,ignore:o}),this.emit(5,h({},this.state))}ensureParent(e){let{name:n}=e;if(e.parent){if(e.parent.pathname==="/")return;this.ensureParent(e.parent);return}let s=this.routes[n];if(!s)return;let{parent:o}=s;if(this.views[o.name]){if(e.parent=this.views[o.name],o.name==="root")return;this.ensureParent(this.views[o.name]);return}let i=this.routes[o.name];if(!i)return null;let a=new Te({name:i.name,pathname:i.pathname,title:i.title,parent:null});this.views[i.name]=a,e.parent=a,this.ensureParent(a)}buildURL(e,n={}){let s=(()=>{let i=this.routes[e];return i||null})();return s?new Te({name:s.name,pathname:s.pathname,title:s.title,query:n,parent:null}).buildUrl(n):(console.log("[DOMAIN]history/index - push 2. no matched route",e),this.routes["root.notfound"].pathname)}buildURLWithPrefix(e,n={}){let s=(()=>{let i=this.routes[e];return i||null})();return s?new Te({name:s.name,pathname:s.pathname,title:s.title,query:n,parent:null}).buildUrlWithPrefix(n):(console.log("[DOMAIN]history/index - push 2. no matched route",e),this.routes["root.notfound"].pathname)}isLayout(e){let n=this.routes[e];return n?n.layout:null}handleClickLink(e){let{href:n,target:s}=e;this.emit(2,{href:n,target:s})}onTopViewChange(e){return this.on(0,e)}onRouteChange(e){return this.on(1,e)}onBack(e){return this.on(3,e)}onForward(e){return this.on(4,e)}onClickLink(e){return this.on(2,e)}onStateChange(e){return this.on(5,e)}};var tn=class extends O{constructor(e={}){super(e);l(this,"hostname","");l(this,"headers",{});l(this,"debug",!1);let{hostname:n="",headers:s={},debug:o=!1}=e;this.hostname=n,this.headers=s,this.debug=o}get(o,i){return N(this,arguments,function*(e,n,s={}){try{let a=this.hostname,p={url:typeof e=="string"?[a,e,n?"?"+le(n):""].join(""):e,method:"GET",id:s.id,headers:h(h({},this.headers),s.headers||{})};this.debug&&console.log("[DOMAIN]http_client - before fetch",p);let d=yield this.fetch(p);return H.Ok(d.data)}catch(a){let u=a,{message:p}=u;return H.Err(p)}})}post(o,i){return N(this,arguments,function*(e,n,s={}){let a=this.hostname,u=typeof e=="string"?[a,e].join(""):e;try{let p={url:u,method:"POST",data:n,id:s.id,headers:h(h({},this.headers),s.headers||{})};this.debug&&console.log("[DOMAIN]http_client - before fetch",p);let d=yield this.fetch(p);return H.Ok(d.data)}catch(p){let d=p,{message:c}=d;return H.Err(c)}})}fetch(e){return N(this,null,function*(){return console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 fetch \u65B9\u6CD5"),{data:{}}})}cancel(e){let n="\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 cancel \u65B9\u6CD5";return console.log(n),H.Err(n)}setHeaders(e){this.headers=e}appendHeaders(e){this.headers=h(h({},this.headers),e)}setDebug(e){this.debug=e}onStateChange(e){return this.on(0,e)}};var un={};Ue(un,{ButtonCore:()=>$e,ButtonInListCore:()=>gr,CalendarCore:()=>Vh,CheckboxCore:()=>Qe,CheckboxGroupCore:()=>Ir,ContextMenuCore:()=>yr,DialogCore:()=>vr,DismissableLayerCore:()=>xe,DropdownMenuCore:()=>Sr,FocusScopeCore:()=>Tr,FormCore:()=>Oh,ImageCore:()=>rn,ImageInListCore:()=>Er,ImageStep:()=>Gi,InputCore:()=>sn,InputInListCore:()=>br,MenuCore:()=>Ve,MenuItemCore:()=>Lr,NodeCore:()=>Cr,PopoverCore:()=>Ct,PresenceCore:()=>te,ProgressCore:()=>xr,RovingFocusCore:()=>xt,ScrollViewCore:()=>Dr,SelectCore:()=>an,SelectInListCore:()=>Rr,TabsCore:()=>kr,ToastCore:()=>Mr,TreeCore:()=>Ar,Utils:()=>Hr,addDays:()=>Kr,addWeeks:()=>Br,clamp:()=>Ji,constructFrom:()=>ke,damping:()=>Or,daysToMonthWeeks:()=>Nr,differenceInCalendarDays:()=>pa,differenceInCalendarMonths:()=>Fh,differenceInCalendarWeeks:()=>ua,endOfISOWeek:()=>aa,endOfMonth:()=>ca,endOfWeek:()=>Vr,getAngleByPoints:()=>Pr,getDefaultOptions:()=>Pt,getISOWeek:()=>sa,getISOWeekYear:()=>ia,getMonthWeeks:()=>qr,getPoint:()=>on,getTimezoneOffsetInMilliseconds:()=>Ot,getWeek:()=>ta,getWeekYear:()=>ra,getWeeksInMonth:()=>la,lastDayOfMonth:()=>ha,millisecondsInDay:()=>fa,millisecondsInWeek:()=>ln,onCreateScrollView:()=>Mh,preventDefault:()=>et,startOfDay:()=>Fr,startOfISOWeek:()=>tt,startOfISOWeekYear:()=>oa,startOfMonth:()=>$r,startOfWeek:()=>we,startOfWeekYear:()=>na,toDate:()=>se});var nn=class extends O{constructor(e={}){super(e);l(this,"value",null);let{defaultValue:n,onChange:s}=e;n&&(this.value=n),s&&this.onStateChange(s)}get state(){return this.value}select(e){this.value=e,this.emit(0,this.value)}patch(e){this.value=h(h({},this.value),e),this.emit(0,this.value)}isEmpty(){return this.value===null}clear(){this.value=null,this.emit(0)}onStateChange(e){return this.on(0,e)}};var $e=class extends O{constructor(e={}){super(e);l(this,"id",this.uid());l(this,"cur");l(this,"state",{text:"Click it",loading:!1,disabled:!1});e.disabled!==void 0&&(this.state.disabled=e.disabled),this.cur=new nn,e.onClick&&this.onClick(()=>{var n;(n=e.onClick)==null||n.call(e,this.cur.value)})}click(){this.state.loading||this.state.disabled||this.emit(0)}disable(){this.state.disabled=!0,this.emit(1,h({},this.state))}enable(){this.state.disabled=!1,this.emit(1,h({},this.state))}bind(e){return this.cur.select(e),this}setLoading(e){this.state.loading!==e&&(this.state.loading=e,this.emit(1,h({},this.state)))}onClick(e){this.on(0,e)}onStateChange(e){this.on(1,e)}},gr=class extends O{constructor(e={}){super(e);l(this,"btns",[]);l(this,"cur",null);let{onClick:n}=e;n&&this.onClick(n)}bind(e){let n=this.btns.find(o=>o.cur.value===e);if(n)return n;let s=new $e({onClick:o=>{this.cur=s,this.emit(0,o)}});return s.bind(e),this.btns.push(s),s}clear(){this.cur=null}setLoading(e){if(this.cur===null){for(let n=0;n<this.btns.length;n+=1)this.btns[n].setLoading(e);return}this.cur.setLoading(e)}click(){this.cur!==null&&this.cur.click()}onClick(e){this.on(0,e)}onStateChange(e){this.on(1,e)}};var Qe=class extends O{constructor(e={}){super(e);l(this,"shape","checkbox");l(this,"label");l(this,"disabled");l(this,"checked");l(this,"defaultChecked");l(this,"presence");l(this,"prev_checked",!1);let{label:n="",disabled:s=!1,checked:o=!1,onChange:i}=e;this.label=n,this.disabled=s,this.checked=o,this.defaultChecked=o,this.presence=new te,i&&this.onChange(i)}get state(){return{label:this.label,checked:this.checked,value:this.checked,disabled:this.disabled}}get value(){return this.state.value}get defaultValue(){return this.defaultChecked}toggle(){let e=this.checked;(()=>{if(e){this.presence.hide();return}this.presence.show()})(),this.checked=!0,e&&(this.checked=!1),this.prev_checked=e,this.emit(1,this.checked),this.emit(0,h({},this.state))}check(){this.checked!==!0&&(this.presence.show(),this.prev_checked=this.checked,this.checked=!0,this.emit(0,h({},this.state)))}uncheck(){this.checked!==!1&&(this.presence.hide(),this.prev_checked=this.checked,this.checked=!1,this.emit(0,h({},this.state)))}reset(){this.checked=this.defaultChecked}setValue(e){this.checked=e}onChange(e){return this.on(1,e)}onStateChange(e){return this.on(0,e)}};var Re=class extends O{constructor(e={}){super(e);l(this,"unique_id","PopperCore");l(this,"debug",!0);l(this,"placement","bottom");l(this,"strategy","absolute");l(this,"middleware",[]);l(this,"reference",null);l(this,"floating",null);l(this,"container",null);l(this,"arrow",null);l(this,"state",{strategy:"absolute",x:0,y:0,isPlaced:!1,placedSide:"bottom",placedAlign:"center",reference:!1});l(this,"_enter",!1);l(this,"_focus",!1);let{_name:n,side:s="bottom",align:o="center",strategy:i="absolute",middleware:a=[]}=e;n&&(this.unique_id=n),this.strategy=i,this.placement=s+(o!=="center"?"-"+o:"")}setReference(e,n={}){this.reference!==null&&!n.force||(this.reference=e,this.state.reference=!0,this.emit(0,e),this.emit(5,h({},this.state)))}updateReference(e){this.reference=e}removeReference(){this.reference!==null&&(this.state.reference=!1,this.reference=null,this.emit(5,h({},this.state)))}setFloating(e){e!==null&&(this.floating=e,this.emit(1,e))}setArrow(e){this.arrow=e}setContainer(e){}setConfig(e){}setState(e){this.state.x=e.x,this.state.y=e.y,this.state.isPlaced=!0,this.emit(5,h({},this.state))}place2(e){let n=this.reference;if(!n)return;let s=n.getRect(),{clientHeight:o,clientWidth:i}=window.document.documentElement,a={x:s.x,y:s.y+s.height+4};o-a.y<e.height+24&&(a.y=s.y-e.height-4),i-a.x<e.width+24&&(a.x=s.x+s.width-e.width-4),a.y<=0&&(a.y=12),this.setState(a)}place(){return N(this,null,function*(){if(this.middleware=[],this.reference===null||this.floating===null)return;let e=yield this.computePosition(),{x:n,y:s,middlewareData:o}=e,[i,a]=Th(this.placement);this.state={x:n,y:s,strategy:this.strategy,isPlaced:!0,placedSide:i,placedAlign:a,reference:!0},this.emit(5,h({},this.state))})}computePosition(){return N(this,null,function*(){let{placement:n,strategy:s}=this,o=n,i=this.reference.getRect(),a=this.floating.getRect(),u={reference:i,floating:a},{x:p,y:d}=this.computeCoordsFromPlacement(u,n,!0),c={};for(let f=0;f<this.middleware.length;f++){let{name:m,fn:y}=this.middleware[f],{x:g,y:S,data:v,reset:C}=yield y({x:p,y:d,initialPlacement:n,placement:o,strategy:s,middlewareData:c,rects:u,elements:{reference:i,floating:a}});p=g!=null?g:p,d=S!=null?S:d,c=$(h({},c),{[m]:h(h({},c[m]),v)})}return{x:p,y:d,placement:o,strategy:s,middlewareData:c}})}computeCoordsFromPlacement(e,n,s){let{reference:o,floating:i}=e;console.log("computeCoordsFromPlacement",o,i);let a=o.x+o.width/2-i.width/2,u=o.y+o.height/2-i.height/2,p=Eh(n),d=bh(p),c=o[d]/2-i[d]/2,f=Yi(n),m=p==="x",y;switch(f){case"top":y={x:a,y:o.y-i.height};break;case"bottom":y={x:a,y:o.y+o.height};break;case"right":y={x:o.x+o.width,y:u};break;case"left":y={x:o.x-i.width,y:u};break;default:y={x:o.x,y:o.y}}switch(Ch(n)){case"start":y[p]-=c*(s&&m?-1:1);break;case"end":y[p]+=c*(s&&m?-1:1);break;default:}return y}handleEnter(){this._enter!==!0&&(this._enter=!0,this.emit(3))}handleLeave(){this._enter!==!1&&(this._enter=!1,this.emit(4))}reset(){this._enter=!1,this._focus=!1}onReferenceMounted(e){return this.on(0,e)}onFloatingMounted(e){return this.on(1,e)}onContainerChange(e){return this.on(6,e)}onEnter(e){return this.on(3,e)}onLeave(e){return this.on(4,e)}onPlaced(e){return this.on(2,e)}onStateChange(e){return this.on(5,e)}get[Symbol.toStringTag](){return"PopperCore"}};function Th(r){let[t,e="center"]=r.split("-");return[t,e]}function Yi(r){return r.split("-")[0]}function Eh(r){return["top","bottom"].includes(Yi(r))?"x":"y"}function bh(r){return r==="y"?"height":"width"}function Ch(r){return r.split("-")[1]}var xe=class extends O{constructor(e={}){super(e);l(this,"name","DismissableLayerCore");l(this,"layers",new Set);l(this,"layersWithOutsidePointerEventsDisabled",new Set);l(this,"branches",new Set);l(this,"isPointerInside",!1);l(this,"state",{})}handlePointerOutside(e){}pointerDown(){this.isPointerInside=!0}handlePointerDownOnTop(e){if(this.isPointerInside===!0){this.isPointerInside=!1;return}this.emit(2),this.emit(3),this.emit(0)}onDismiss(e){return this.on(0,e)}};var Ve=class extends O{constructor(e={}){super(e);l(this,"_name","MenuCore");l(this,"debug",!1);l(this,"popper");l(this,"presence");l(this,"layer");l(this,"open_timer",null);l(this,"state",{open:!1,hover:!1,items:[]});l(this,"items",[]);l(this,"cur_sub",null);l(this,"cur_item",null);l(this,"inside",!1);l(this,"in_sub_menu",!1);l(this,"maybe_hide_sub",!1);l(this,"hide_sub_timer",null);let{_name:n,items:s=[],side:o,align:i,strategy:a}=e;n&&(this._name=n),this.state.items=s,this.items=s,this.popper=new Re({side:o,align:i,strategy:a,_name:n?`${n}__popper`:"menu__popper"}),this.presence=new te,this.layer=new xe,this.listen_items(s),this.popper.onEnter(()=>{this.state.hover=!0,this.emit(4)}),this.popper.onLeave(()=>{this.state.hover=!1,this.emit(5)}),this.layer.onDismiss(()=>{this.hide()}),this.presence.onHidden(()=>{this.reset(),this.cur_item&&this.cur_item.blur(),this.cur_sub&&this.cur_sub.hide()})}toggle(){let{open:e}=this.state;if(console.log("[DOMAIN]ui/dropdown-menu - toggle",e),e){this.hide();return}this.show()}show(){this.state.open||(this.state.open=!0,this.presence.show(),this.popper.place(),this.emit(0),this.emit(6,h({},this.state)))}hide(){this.state.open!==!1&&(this.state.open=!1,this.presence.hide(),this.emit(1),this.emit(6,h({},this.state)))}listen_item(e){if(e.onEnter(()=>{var s;console.log("[DOMAIN]ui/menu/index - item.onEnter",e.label,e.menu,(s=this.cur_item)==null?void 0:s.label),this.emit(2,e),e.menu&&e.menu.show(),this.cur_item&&this.cur_item!==e&&(this.cur_item.blur(),this.cur_item.menu&&this.cur_item.menu.hide()),this.cur_item=e}),e.onLeave(()=>{var s;if(console.log("[DOMAIN]ui/menu/index - item.onLeave",e.label,{open:e._open,focused:e._focused},(s=e.menu)==null?void 0:s.state),this.emit(3,e),e.blur(),e.menu){let o=setTimeout(()=>{e.menu.hide()},0);e.menu.onEnter(()=>{console.log("[DOMAIN]ui/menu/index - item.menu.onEnter"),o&&clearTimeout(o)});return}}),!e.menu)return;let n=e.menu}listen_items(e){for(let n=0;n<e.length;n+=1)this.listen_item(e[n])}setItems(e){console.log("[DOMAIN]ui/menu - set items",e),this.state.items=e,this.items=e,this.listen_items(e),this.emit(6,h({},this.state))}checkNeedHideSubMenu(e){}reset(){this.in_sub_menu=!1,this.cur_sub=null,this.maybe_hide_sub=!1,this.hide_sub_timer=null,this.state.open=!1,this.presence.reset(),this.popper.reset();for(let e=0;e<this.items.length;e+=1)this.items[e].reset()}unmount(){super.destroy(),this.layer.destroy(),this.popper.destroy(),this.presence.unmount();for(let e=0;e<this.items.length;e+=1)this.items[e].unmount();this.reset()}onShow(e){return this.on(0,e)}onHide(e){return this.on(1,e)}onEnterItem(e){return this.on(2,e)}onLeaveItem(e){return this.on(3,e)}onEnter(e){return this.on(4,e)}onLeave(e){return this.on(5,e)}onStateChange(e){return this.on(6,e)}get[Symbol.toStringTag](){return"Menu"}},ji=["Enter"," "],xh=["ArrowDown","PageUp","Home"],wh=["ArrowUp","PageDown","End"],nd=[...xh,...wh],rd={ltr:[...ji,"ArrowRight"],rtl:[...ji,"ArrowLeft"]};var yr=class extends O{constructor(e){super(e);l(this,"menu");l(this,"state",{items:[]});let{_name:n,items:s=[]}=e;this.state.items=s,this.menu=new Ve($(h({},e),{_name:n?`${n}__menu`:"menu-in-context-menu",side:"right",align:"start"}))}show(e={}){let{x:n,y:s}=e;this.updateReference($(h({},this.menu.popper.reference),{getRect:()=>({width:5,height:5,left:n,top:s,x:n,y:s})})),this.menu.show()}hide(){console.log("[]ContextMenuCore - hide"),this.menu.hide()}setReference(e){this.menu.popper.setReference(e)}updateReference(e){this.menu.popper.updateReference(e)}setItems(e){this.state.items=e,this.emit(0,h({},this.state))}onStateChange(e){this.on(0,e)}onShow(e){this.on(1,e)}onHide(e){this.on(2,e)}};var vr=class extends O{constructor(e={}){super(e);l(this,"open",!1);l(this,"title","");l(this,"footer",!0);l(this,"closeable",!0);l(this,"mask",!0);l(this,"present",new te);l(this,"okBtn",new $e);l(this,"cancelBtn",new $e);let{title:n,footer:s=!0,open:o=!1,mask:i=!0,closeable:a=!0,onOk:u,onCancel:p,onUnmounted:d}=e;n&&(this.title=n),this.footer=s,this.closeable=a,this.mask=i,this.open=o,o&&this.present.show(),u&&this.onOk(u),p&&this.onCancel(p),d&&this.onUnmounted(d),this.present.onShow(()=>N(this,null,function*(){this.open=!0,this.emit(5,!0),this.emit(1),this.emit(10,h({},this.state))})),this.present.onHidden(()=>N(this,null,function*(){this.open=!1,this.emit(6),this.emit(3),this.emit(5,!1),this.emit(10,h({},this.state))})),this.present.onUnmounted(()=>{this.emit(4)}),this.present.onStateChange(()=>{this.emit(10,h({},this.state))}),this.okBtn.onClick(()=>{this.ok()}),this.cancelBtn.onClick(()=>{this.hide()})}get state(){return{open:this.open,title:this.title,footer:this.footer,closeable:this.closeable,mask:this.mask,enter:this.present.state.enter,visible:this.present.state.visible,exit:this.present.state.exit}}toggle(){if(this.open){this.present.hide();return}this.present.show()}show(){this.open||this.present.show()}hide(e={}){this.present.hide(e)}ok(){this.emit(7)}cancel(){this.emit(6)}setTitle(e){this.title=e,this.emit(10,h({},this.state))}onShow(e){return this.on(1,e)}onHidden(e){return this.on(3,e)}onUnmounted(e){return this.on(4,e)}onVisibleChange(e){return this.on(5,e)}onOk(e){return this.on(7,e)}onCancel(e){return this.on(6,e)}onStateChange(e){return this.on(10,e)}get[Symbol.toStringTag](){return"Dialog"}};var Sr=class extends O{constructor(e={}){super(e);l(this,"open",!1);l(this,"disabled",!1);l(this,"menu");l(this,"subs",[]);l(this,"items",[]);let{_name:n,side:s,align:o,items:i=[],onHidden:a}=e;this.items=i,this.menu=new Ve({side:s,align:o,items:i,_name:n?`${n}__menu`:"menu-in-dropdown"}),this.menu.onHide(()=>{this.menu.reset(),a&&a()}),this.menu.presence.onStateChange(()=>{this.emit(0,h({},this.state))})}get state(){var e,n,s;return{items:this.items,open:this.open,disabled:this.disabled,enter:(e=this.menu.presence)==null?void 0:e.state.enter,visible:(n=this.menu.presence)==null?void 0:n.state.visible,exit:(s=this.menu.presence)==null?void 0:s.state.exit}}listenItems(e){for(let n=0;n<e.length;n+=1){let s=e[n]}}setItems(e){this.items=e,this.emit(0,h({},this.state))}showMenuItem(e){let n=this.items.find(s=>s.label===e);n&&n.show()}toggle(e){if(e){let{x:n,y:s,width:o=8,height:i=8}=e;this.menu.popper.updateReference({getRect(){return{width:o,height:i,x:n,y:s}}})}this.menu.toggle()}hide(){this.menu.hide()}unmount(){super.destroy(),this.menu.unmount()}onStateChange(e){this.on(0,e)}};var Tr=class extends O{constructor(e={}){super(e);l(this,"name","FocusScopeCore");l(this,"state",{paused:!1})}pause(){this.state.paused=!0,this.emit(0,h({},this.state))}resume(){this.state.paused=!1,this.emit(0,h({},this.state))}focusin(){this.emit(1)}focusout(){this.emit(2)}onFocusin(e){this.on(1,e)}onFocusout(e){this.on(2,e)}onStateChange(e){this.on(0,e)}};function Oh(r){let{fields:t}=r,e=t,n={},s=!1,o={get value(){return n},get fields(){return Object.values(e)},get inline(){return s}},i;(g=>(g[g.Input=0]="Input",g[g.Submit=1]="Submit",g[g.Change=2]="Change",g[g.StateChange=3]="StateChange"))(i||(i={}));let a=j();function u(c,f){n[c]=f}function p(c,f){n[c]=f,a.emit(2,h({},o.value))}let d=Object.keys(e);for(let c=0;c<d.length;c+=1){let f=e[d[c]];u(f.name,f.$input.value),f.$input.onChange(m=>{console.log("[DOMAIN]ui/form/index - updateValues",f.name,m),p(f.name,m)}),f.onShow(()=>{p(f.name,f.$input.value)}),f.onHide(()=>{delete n[f.name],a.emit(2,h({},o.value))})}return{symbol:"FormCore",shape:"form",state:o,get value(){return n},get fields(){return e},setValue(c,f={}){let m=Object.keys(e);for(let y=0;y<m.length;y+=1)e[m[y]].$input.setValue(c[m[y]],{silence:!0});n=c,f.silence||a.emit(2,o.value)},setInline(c){s=c,a.emit(3,h({},o))},input(c,f){n[c]=f,a.emit(2,o.value)},submit(){a.emit(1,o.value)},validate(){return H.Ok(n)},onSubmit(c){a.on(1,c)},onInput(c){a.on(2,c)},onChange(c){return a.on(2,c)},onStateChange(c){return a.on(3,c)}}}var Gi=(s=>(s[s.Pending=0]="Pending",s[s.Loading=1]="Loading",s[s.Loaded=2]="Loaded",s[s.Failed=3]="Failed",s))(Gi||{}),Xe=class Xe extends O{constructor(e){super();l(this,"unique_uid");l(this,"src");l(this,"width");l(this,"height");l(this,"scale",null);l(this,"fit");l(this,"step",0);l(this,"realSrc");let{unique_id:n,width:s=200,height:o=200,src:i,scale:a,fit:u="cover"}=e;this.width=s,this.height=o,this.src="",this.fit=u,this.realSrc=i,a&&(this.scale=a),n&&(this.unique_uid=n)}static url(e){return e?e.includes("http")||e.startsWith("data:image")?e:Xe.prefix+e:""}get state(){return{src:this.src,step:this.step,width:this.width,height:this.height,scale:this.scale}}setURL(e){if(e){if(this.realSrc&&e!==this.realSrc){this.realSrc=e,this.handleShow();return}this.realSrc=e,this.step===2&&(this.src=Xe.url(this.realSrc),this.emit(0,h({},this.state)))}}setLoaded(){this.step=2,this.emit(2),this.emit(0,h({},this.state))}handleShow(){if(!this.realSrc){this.step=3,this.emit(0,h({},this.state));return}this.step=1,this.src=Xe.url(this.realSrc),this.emit(0,h({},this.state))}handleLoaded(){this.setLoaded()}handleError(){this.step=3,this.emit(0,h({},this.state)),this.emit(3)}onStateChange(e){return this.on(0,e)}onStartLoad(e){return this.on(1,e)}onLoad(e){return this.on(2,e)}onError(e){return this.on(3,e)}};l(Xe,"prefix","");var rn=Xe,Er=class extends O{constructor(e={}){super(e);l(this,"btns",[]);l(this,"cur",null);l(this,"scale",null);let{scale:n}=e;n&&(this.scale=n)}bind(e){let n=this.btns.find(o=>o.unique_id===e);if(n)return n;let s=new rn({src:e,scale:this.scale||void 0});return this.btns.push(s),s}select(e){let n=this.btns.find(s=>s.unique_id===e);n&&(this.cur=n)}clear(){this.cur=null}onStateChange(e){this.on(0,e)}};var sn=class extends O{constructor(e){super(e);l(this,"shape","input");l(this,"defaultValue");l(this,"value");l(this,"placeholder");l(this,"disabled");l(this,"allowClear",!0);l(this,"autoComplete",!1);l(this,"autoFocus",!1);l(this,"ignoreEnterEvent",!1);l(this,"isFocus",!1);l(this,"type");l(this,"loading",!1);l(this,"valueUsed");l(this,"tmpType","");let{unique_id:n,defaultValue:s,placeholder:o="\u8BF7\u8F93\u5165",type:i="string",disabled:a=!1,autoFocus:u=!1,autoComplete:p=!1,ignoreEnterEvent:d=!1,onChange:c,onBlur:f,onEnter:m,onClear:y,onMounted:g}=e;n&&(this.unique_id=n),this.placeholder=o,this.type=i,this.disabled=a,this.autoComplete=p,this.ignoreEnterEvent=d,this.autoFocus=u,this.defaultValue=s,this.value=s,c&&this.onChange(c),m&&this.onEnter(()=>{m(this.value)}),e.onKeyDown&&this.onKeyDown(e.onKeyDown),f&&this.onBlur(f),y&&this.onClear(y),g&&this.onMounted(g)}get state(){return{value:this.value,placeholder:this.placeholder,disabled:this.disabled,focus:this.isFocus,loading:this.loading,type:this.type,tmpType:this.tmpType,autoComplete:this.autoComplete,autoFocus:this.autoFocus,allowClear:this.allowClear}}setMounted(){this.emit(12)}handleKeyDown(e){if(!this.ignoreEnterEvent&&e.key==="Enter"){this.handleEnter();return}this.emit(16,e)}handleEnter(){this.valueUsed=this.value,this.emit(15,this.value)}handleFocus(){this.isFocus=!0}handleBlur(){this.value!==this.valueUsed&&(this.valueUsed=this.value,this.emit(14,this.value))}handleClick(e){this.emit(18,e)}handleChange(e){if(this.type==="file"){let{target:o}=e,{files:i}=o;this.setValue(i);return}let{target:n}=e,{value:s}=n;this.setValue(s)}setValue(e,n={}){this.value=e,this.type==="number"&&(this.value=Number(e)),n.silence||(this.emit(10,e),this.emit(11,h({},this.state)))}setPlaceholder(e){this.placeholder=e,this.emit(11,h({},this.state))}setLoading(e){this.loading=e,this.emit(11,h({},this.state))}setFocus(){this.isFocus=!0,this.emit(11,h({},this.state))}focus(){console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 focus \u65B9\u6CD5")}enable(){this.disabled=!0,this.emit(11,h({},this.state))}disable(){this.disabled=!1,this.emit(11,h({},this.state))}showText(){this.tmpType="text",this.emit(11,h({},this.state))}hideText(){this.tmpType="",this.emit(11,h({},this.state))}clear(){this.value=this.defaultValue,this.emit(17),this.emit(11,h({},this.state))}reset(){this.value=this.defaultValue,this.emit(11,h({},this.state))}enter(){this.emit(15)}onChange(e){return this.on(10,e)}onStateChange(e){return this.on(11,e)}onMounted(e){return this.on(12,e)}onFocus(e){return this.on(13,e)}onBlur(e){return this.on(14,e)}onKeyDown(e){return this.on(16,e)}onEnter(e){return this.on(15,e)}onClick(e){return this.on(18,e)}onClear(e){return this.on(17,e)}},br=class extends O{constructor(e){super(e);l(this,"defaultValue");l(this,"list",[]);l(this,"cached",{});l(this,"values",new Map);let{defaultValue:n}=e;this.defaultValue=n}bind(e,n={}){let{defaultValue:s=this.defaultValue}=n,o=this.cached[e];if(o)return o;let i=new sn({defaultValue:s,onChange:a=>{this.values.set(e,a),this.emit(10,[e,a])}});return this.list.push(i),this.values.set(e,s),this.cached[e]=i,i}getCur(e){let n=this.cached[e];return n||null}setValue(e){for(let n=0;n<this.list.length;n+=1)this.list[n].setValue(e)}clear(){this.list=[],this.cached={},this.values=new Map}getValueByUniqueId(e){var n;return(n=this.values.get(e))!=null?n:null}toJson(e){let n=[];for(let[s,o]of this.values){let i=e([s,o]);n.push(i)}return n}onChange(e){this.on(10,e)}onStateChange(e){this.on(11,e)}};var Cr=class extends O{handleShow(){this.emit(3)}onVisible(t){return this.on(3,t)}onClick(t){return this.on(0,t)}};var Ct=class extends O{constructor(e={}){super();l(this,"popper");l(this,"present");l(this,"layer");l(this,"_side");l(this,"_align");l(this,"_closeable");l(this,"visible",!1);l(this,"enter",!1);l(this,"exit",!1);let{side:n="bottom",align:s="end",strategy:o,closeable:i=!0}=e;this._side=n,this._align=s,this._closeable=i,this.popper=new Re({side:n,align:s,strategy:o}),this.present=new te,this.layer=new xe,this.layer.onDismiss(()=>{console.log("[DOMAIN/ui]popover/index - onDismiss"),this.hide()}),this.present.onStateChange(()=>{this.emit(2,h({},this.state))}),this.popper.onStateChange(()=>{this.emit(2,h({},this.state))})}get state(){return{isPlaced:this.popper.state.isPlaced,closeable:this._closeable,x:this.popper.state.x,y:this.popper.state.y,enter:this.present.state.enter,visible:this.present.state.visible,exit:this.present.state.exit}}ready(){}destroy(){}toggle(e){console.log("[DOMAIN/ui]popover/index - toggle");let{visible:n}=this;if(n){this.hide();return}if(e){let{x:s,y:o,width:i=8,height:a=8}=e;this.popper.updateReference({getRect(){return{width:i,height:a,x:s,y:o}}})}this.show()}show(e){var n;console.log((n=this.popper.reference)==null?void 0:n.getRect()),e&&this.popper.updateReference({getRect(){let{x:s=0,y:o=0,width:i=0,height:a=0,left:u=0,top:p=0,right:d=0,bottom:c=0}=e;return{width:i,height:a,x:s,y:o,left:u,top:p,right:d,bottom:c}}}),this.visible=!0,this.present.show(),this.popper.place(),this.emit(0)}hide(){this.visible!==!1&&(this.visible=!1,this.present.hide(),this.emit(1))}unmount(){super.destroy(),this.layer.destroy(),this.popper.destroy(),this.present.unmount()}onShow(e){return this.on(0,e)}onHide(e){return this.on(1,e)}onStateChange(e){return this.on(2,e)}get[Symbol.toStringTag](){return"PopoverCore"}};var Ph=100;var xr=class extends O{constructor(e){super();l(this,"_value");l(this,"_label");l(this,"_max");let{value:n,max:s,getValueLabel:o=_h}=e,i=Rh(s)?s:Ph;this._max=i;let a=kh(n,i)?n:null;this._value=a;let u=wr(a)?o(a,i):void 0;this._label=u}get state(){var e;return{state:Dh(this._value,this._max),value:(e=this._value)!=null?e:void 0,max:this._max,label:this._label}}setValue(e){this._value=e,this.emit(0,e),this.emit(1,this.state)}update(e){this._value=e,this.emit(0,e),this.emit(1,this.state)}onValueChange(e){this.on(0,e)}onStateChange(e){this.on(1,e)}};function _h(r,t){return`${Math.round(r/t*100)}%`}function Dh(r,t){return r==null?"indeterminate":r===t?"complete":"loading"}function wr(r){return typeof r=="number"}function Rh(r){return wr(r)&&!isNaN(r)&&r>0}function kh(r,t){return wr(r)&&!isNaN(r)&&r<=t&&r>=0}var Ze=class extends O{constructor(){super(...arguments);l(this,"itemMap",new Map)}setWrap(e){}add(e,n){this.itemMap.set(e,n)}remove(e){this.itemMap.delete(e)}getItems(){return Array.from(this.itemMap.values())}};var xt=class extends O{constructor(e={}){super(e);l(this,"collection");l(this,"state",{currentTabStopId:null,orientation:"horizontal",dir:"ltr"});let{_name:n}=e;this.collection=new Ze}focusItem(e){this.emit(0,e)}shiftTab(){this.emit(1)}addFocusableItem(){this.emit(2)}removeFocusableItem(){this.emit(3)}onStateChange(e){this.on(4,e)}onItemFocus(e){this.on(0,e)}onItemShiftTab(e){this.on(1,e)}onFocusableItemAdd(e){this.on(2,e)}onFocusableItemRemove(e){this.on(3,e)}};function on(r){return r.touches?{x:r.touches[0].pageX,y:r.touches[0].pageY}:r.clientX&&r.clientY?{x:r.clientX,y:r.clientY}:{x:0,y:0}}function et(r){r&&r.cancelable&&!r.defaultPrevented&&r.preventDefault&&r.preventDefault()}function Or(r,t){let e=Math.abs(r);return e=.82231*t/(1+4338.47/Math.pow(e,1.14791)),Math.round(r<0?-e:e)}function Pr(r,t){let e=Math.abs(r.x-t.x),n=Math.abs(r.y-t.y),s=Math.sqrt(e*e+n*n);return s!==0?Math.asin(n/s)/Math.PI*180:0}var _r=null;function Mh(r){_r=r}var Dr=class extends O{constructor(e={}){super(e);l(this,"os",{android:!0,ios:!1,pc:!1,wechat:!1});l(this,"rect",{width:0,height:0,scrollTop:0,contentHeight:0});l(this,"disabled",!1);l(this,"canPullToRefresh");l(this,"canReachBottom",!0);l(this,"needHideIndicator",!1);l(this,"scrollable",!0);l(this,"pullToRefresh",{step:"pending",pullStartX:0,pullStartY:0,pullMoveX:0,pullMoveY:0,distX:0,distY:0,distResisted:0});l(this,"threshold",120);l(this,"options");l(this,"pullToRefreshOptions");l(this,"isPullToRefreshing",!1);l(this,"isLoadingMore",!1);l(this,"startPoint",null);l(this,"lastPoint",{x:0,y:0});l(this,"downHight",0);l(this,"upHight",0);l(this,"maxTouchMoveInstanceY",0);l(this,"inTouchEnd",!1);l(this,"inTopWhenPointDown",!1);l(this,"inBottomWhenPointDown",!1);l(this,"isMoveDown",!1);l(this,"isMoveUp",!1);l(this,"isScrollTo",!1);l(this,"movetype","pending");l(this,"preScrollY",0);l(this,"isUpAutoLoad",!1);l(this,"startPullToRefresh",()=>{this.isPullToRefreshing||(this.isPullToRefreshing=!0,this.downHight=this.pullToRefreshOptions.offset,this.setIndicatorHeightTransition(!0),this.changeIndicatorHeight(this.downHight),this.emit(3))});l(this,"finishPullToRefresh",()=>{this.isPullToRefreshing&&(this.downHight=0,this.changeIndicatorHeight(0),this.isPullToRefreshing=!1,this.emit(4))});l(this,"disablePullToRefresh",()=>{this.pullToRefreshOptions.isLock=!0});l(this,"enablePullToRefresh",()=>{this.pullToRefreshOptions.isLock=!1});l(this,"handleMouseDown",e=>{this.handlePointDown(e)});l(this,"handleMouseMove",e=>{this.handlePointMove(e)});l(this,"handleTouchStart",e=>{this.handlePointDown(e)});l(this,"handleTouchMove",e=>{this.handlePointMove(e)});l(this,"handlePointDown",e=>{this.isScrollTo&&et(e);let n=on(e);if(n.x<30){this.startPoint=null,et(e);return}this.startPoint=n,this.lastPoint=this.startPoint,this.maxTouchMoveInstanceY=this.getBodyHeight()-this.pullToRefreshOptions.bottomOffset,this.inTouchEnd=!1;let s=this.getScrollTop();this.inTopWhenPointDown=s===0});l(this,"handlePointMove",e=>{if(!this.startPoint)return;let n=this.getScrollTop();n>0&&(this.inTopWhenPointDown=!1);let s=on(e),o=s.y-this.startPoint.y;if(o>0&&n<=0&&(et(e),this.canPullToRefresh&&!this.inTouchEnd&&!this.isPullToRefreshing)){if(!this.inTopWhenPointDown)return;let i=Pr(this.lastPoint,s);if(i&&i<this.pullToRefreshOptions.minAngle)return;if(this.maxTouchMoveInstanceY>0&&s.y>=this.maxTouchMoveInstanceY){this.inTouchEnd=!0,this.handleTouchEnd();return}this.downHight<this.pullToRefreshOptions.offset?this.movetype!=="pulling"&&(this.movetype==="pending"&&(this.setIndicatorHeightTransition(!1),this.os.ios&&!this.inTopWhenPointDown&&this.optimizeScroll(!0)),this.movetype,this.movetype="pulling",this.emit(0),this.isMoveDown=!0):this.movetype!=="releasing"&&(this.movetype="releasing",this.emit(1),this.isMoveDown=!0),this.downHight=Or(s.y-this.startPoint.y,1e3),this.changeIndicatorHeight(this.downHight),this.emit(2,{instance:this.downHight})}if(o<0){let i=this.getScrollHeight(),a=this.getScrollClientHeight();i-a-n<=0&&et(e)}this.lastPoint=s});l(this,"handleTouchEnd",()=>{this.canPullToRefresh&&this.isMoveDown&&(this.downHight>=this.pullToRefreshOptions.offset?this.startPullToRefresh():(this.downHight=0,this.setIndicatorHeightTransition(!0),this.changeIndicatorHeight(0)),this.optimizeScroll(!1),this.movetype="pending",this.isMoveDown=!1)});l(this,"handleScrolling",()=>{let e=this.getScrollTop(),n=e-this.preScrollY>0;this.isLoadingMore||this.getScrollHeight()-this.getScrollClientHeight()-e<=this.threshold&&n&&(this.isLoadingMore=!0,this.emit(8)),this.emit(7,{scrollTop:e})});l(this,"setBounce",e=>{console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 setBounce \u65B9\u6CD5")});l(this,"hideIndicator",()=>{console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 hideIndicator \u65B9\u6CD5")});l(this,"scrollTo",(e,n=300)=>{console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 scrollTo \u65B9\u6CD5")});l(this,"destroy",()=>{console.error("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 destroy \u65B9\u6CD5")});let{os:n,offset:s=80,disabled:o=!1,onScroll:i,onReachBottom:a,onPullToRefresh:u,onPullToBack:p}=e;this.options=e,this.disabled=o,n&&(this.os=n),this.pullToRefreshOptions={isLock:!1,offset:s,bottomOffset:20,minAngle:45},this.canPullToRefresh=!!u,this.canPullToRefresh||(this.needHideIndicator=!0),this.needHideIndicator&&(this.pullToRefreshOptions.offset=9999),i&&this.onScroll(i),a&&this.onReachBottom(a),u&&this.onPullToRefresh(u),_r&&_r(this)}get state(){return{top:0,left:0,step:this.movetype,scrollTop:this.downHight,pullToRefresh:this.canPullToRefresh,scrollable:this.scrollable}}setReady(){this.emit(9)}setRect(e){this.rect=h(h({},this.rect),e)}finishLoadingMore(){this.isLoadingMore=!1}setMounted(){this.emit(9)}refreshRect(){console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 refreshRect \u65B9\u6CD5")}changeIndicatorHeight(e){console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 changeDownIndicatorHeight \u65B9\u6CD5")}setIndicatorHeightTransition(e){console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 addDownIndicatorHeightTransition \u65B9\u6CD5")}optimizeScroll(e){console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 optimizeScroll \u65B9\u6CD5")}getToBottom(){return this.getScrollHeight()-this.getScrollClientHeight()-this.getScrollTop()}getOffsetTop(e){return console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 getScrollHeight \u65B9\u6CD5"),0}getScrollHeight(){return console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 getScrollHeight \u65B9\u6CD5"),0}getScrollClientHeight(){return console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 getClientHeight \u65B9\u6CD5"),0}getScrollTop(){return console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 getScrollTop \u65B9\u6CD5"),0}addScrollTop(e){this.setScrollTop(this.getScrollTop()+e)}setScrollTop(e){console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 setScrollTop \u65B9\u6CD5")}getBodyHeight(){return console.log("\u8BF7\u5728 connect \u4E2D\u5B9E\u73B0 getBodyHeight \u65B9\u6CD5"),0}inDownOffset(e){return this.on(0,e)}outDownOffset(e){return this.on(1,e)}onPulling(e){return this.on(2,e)}onScroll(e){return this.on(7,e)}onReachBottom(e){return this.on(8,e)}onPullToRefresh(e){return this.canPullToRefresh=!0,this.on(3,e)}onMounted(e){return this.on(9,e)}};function Ji(r,[t,e]){return Math.min(e,Math.max(t,r))}var an=class extends O{constructor(e){super(e);l(this,"shape","select");l(this,"name","SelectCore");l(this,"debug",!0);l(this,"placeholder");l(this,"options",[]);l(this,"defaultValue",null);l(this,"value",null);l(this,"disabled",!1);l(this,"open",!1);l(this,"popper");l(this,"popover");l(this,"presence",new te);l(this,"collection");l(this,"layer");l(this,"position","popper");l(this,"triggerPos",{x:0,y:0});l(this,"reference",null);l(this,"trigger",null);l(this,"wrap",null);l(this,"content",null);l(this,"viewport",null);l(this,"selectedItem",null);l(this,"_findFirstValidItem",!1);let{defaultValue:n,placeholder:s="\u70B9\u51FB\u9009\u62E9",options:o=[],onChange:i}=e;this.options=o.map(u=>({label:u.label,value:u.value,selected:u.value===n})),this.value=n,this.defaultValue=n,this.placeholder=s,this.options.find(u=>u.value===n)&&(this.emit(0,h({},this.state)),this.emit(1,n)),this.popper=new Re,this.popover=new Ct,this.layer=new xe,this.collection=new Ze,this.popper.onReferenceMounted(u=>{let{x:p,y:d,width:c,height:f}=u.getRect();this.reference={width:c,height:f,x:p,y:d,left:p,right:p+c,top:d,bottom:d+f}}),this.layer.onDismiss(()=>{console.log(...this.log("this.layer.onDismiss")),this.hide()}),this.presence.onStateChange(()=>this.emit(0,h({},this.state))),i&&this.onChange(i)}get state(){var e;return{options:this.options,value:this.value,value2:(e=this.options.find(n=>n.value===this.value))!=null?e:null,open:this.open,disabled:this.disabled,placeholder:this.placeholder,required:!1,dir:"ltr",styles:{},enter:this.presence.state.enter,visible:this.presence.state.visible,exit:this.presence.state.exit}}mapViewModelWithIndex(e){return this.options[e]}setTriggerPointerDownPos(e){this.triggerPos=e}setTrigger(e){this.trigger=e}setWrap(e){this.wrap=e}setContent(e){this.content=e}setViewport(e){this.viewport=e}setSelectedItem(e){this.selectedItem=e}show(){return N(this,null,function*(){this.disabled||(this.popper.place(),this.open=!0,this.emit(0,h({},this.state)))})}hide(){this.presence.hide(),this.open!==!1&&(this.open=!1,this.emit(0,h({},this.state)))}addNativeOption(){}removeNativeOption(){}select(e){if(this.value!==e){this.value=e;for(let n=0;n<this.options.length;n+=1){let s=this.options[n];s.selected=!1,s.value===e&&(s.selected=!0)}this.emit(1,e),this.emit(0,h({},this.state)),this.hide()}}focus(){this.emit(2)}setOptions(e){this.options=e.map(s=>({label:s.label,value:s.value,selected:s.value===this.value})),!(this.value===null||this.options.find(s=>s.value===this.value))&&(this.value=null,this.emit(0,h({},this.state)),this.emit(1,this.value))}setValue(e){if(e===null){this.value=null,this.emit(0,h({},this.state)),this.emit(1,e);return}this.value=e,this.options=this.options.map(n=>({label:n.label,value:n.value,selected:n.value===this.value})),this.emit(1,e),this.emit(0,h({},this.state))}clear(){this.value=null,this.emit(0,h({},this.state)),this.emit(1,this.value)}setPosition(){}onStateChange(e){return this.on(0,e)}onValueChange(e){return this.on(1,e)}onChange(e){return this.on(1,e)}onFocus(e){return this.on(2,e)}},Rr=class extends O{constructor(e={}){super(e);l(this,"options",[]);l(this,"list",[]);l(this,"cached",new Map);l(this,"values",new Map);let{options:n=[]}=e;this.options=n}bind(e,n){let{defaultValue:s}=n||{defaultValue:null},o=this.cached.get(e);if(o)return o;let i=new an({defaultValue:s,options:this.options,onChange:a=>{this.values.set(e,a),this.emit(1,[e,a])}});return this.list.push(i),this.values.set(e,s),this.cached.set(e,i),i}setOptions(e){if(this.options=e,this.list.length!==0)for(let n=0;n<this.list.length;n+=1)this.list[n].setOptions(e)}setValue(e){for(let n=0;n<this.list.length;n+=1)this.list[n].setValue(e)}getValue(e){var n;return(n=this.values.get(e))!=null?n:null}clear(){this.list=[],this.cached=new Map,this.values=new Map}toJson(e){let n=[];for(let[s,o]of this.values){let i=e([s,o]);n.push(i)}return n}onChange(e){this.on(1,e)}onStateChange(e){this.on(0,e)}};var kr=class extends O{constructor(e={}){super(e);l(this,"roving");l(this,"prevContent",null);l(this,"contents",[]);l(this,"state",{curValue:null,orientation:"horizontal",dir:"ltr"});this.roving=new xt}selectTab(e){let n=this.contents.find(s=>s.value===e);n&&(this.prevContent&&this.prevContent.presence.hide(),n.presence.show(),this.prevContent=n,this.emit(1,e))}appendContent(e){this.contents.includes(e)||this.contents.push(e)}onStateChange(e){this.on(0,e)}onValueChange(e){this.on(1,e)}};var Mr=class extends O{constructor(e={}){super(e);l(this,"name","ToastCore");l(this,"present",new te);l(this,"delay",1200);l(this,"timer",null);l(this,"open",!1);l(this,"_mask",!1);l(this,"_icon",null);l(this,"_texts",[]);let{delay:n}=e;n&&(this.delay=n),this.present.onShow(()=>{this.open=!0,this.emit(4,!0)}),this.present.onHidden(()=>{this.open=!1,this.emit(4,!1)}),this.present.onStateChange(()=>this.emit(7,h({},this.state)))}get state(){return{mask:this._mask,icon:this._icon,texts:this._texts,enter:this.present.state.enter,visible:this.present.state.visible,exit:this.present.state.exit}}show(e){return N(this,null,function*(){let{mask:n=!1,icon:s,texts:o}=e;if(this._mask=n,this._icon=s,this._texts=o,this.emit(7,h({},this.state)),this.timer!==null){if(this.clearTimer(),this._icon==="loading")return;this.timer=setTimeout(()=>{this.hide()},this.delay);return}this.present.show(),this._icon!=="loading"&&(this.timer=setTimeout(()=>{this.hide()},this.delay))})}clearTimer(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}hide(){this.present.hide(),this.clearTimer()}onShow(e){return this.on(1,e)}onHide(e){return this.on(3,e)}onOpenChange(e){return this.on(4,e)}onStateChange(e){return this.on(7,e)}get[Symbol.toStringTag](){return"ToastCore"}};var Hr={};Ue(Hr,{calcDropPosition:()=>Lh,computeMoveNeededParams:()=>Ih,findSourceNodeByKey:()=>wt,formatSourceNodes:()=>Qi,getDraggingNodesKey:()=>Ah,getOffset:()=>ea,insertToBottom:()=>Bh,insertToTop:()=>Nh,isInclude:()=>Zi,noop:()=>Hh,traverseTreeNodes:()=>Xi});function Hh(){}var Qi=(r,t=1,e)=>r.map((n,s)=>{let p=n,{key:o,title:i}=p,a=pe(p,["key","title"]),u=$(h({},a),{key:o,title:i,pos:e===void 0?String(s):`${e}-${s}`});if(n.children&&n.children.length){let d=t+1;u.children=Qi(n.children,d,u.pos)}return u});function Xi(r=[],t){function e(n,s,o,i){let a=n;n&&n.length&&(a=n.filter(Boolean)),a.forEach((u,p)=>{if(!u.isTreeNode)return;let{pos:d}=u;o.push(d);let c=[];u.$children&&e(u.$children,d,c,d),t(u,p,d,u.rckey||d,c,i)})}e(r,0,[])}function Zi(r,t){return r.every((e,n)=>e===t[n])}function Ah(r){let t=[],e=r.pos.split("-");return Xi(r.$children,(n,s,o,i)=>{let a=o.split("-");(r.pos===o||e.length<a.length)&&Zi(e,a)&&t.push(i)}),t.push(r.rckey),t}function ea(r){if(!r.getClientRects().length)return{top:0,left:0};let t=r.getBoundingClientRect();if(t.width||t.height){let e=r.ownerDocument,n=e.defaultView,s=e.documentElement;return{top:t.top+n.pageYOffset-s.clientTop,left:t.left+n.pageXOffset-s.clientLeft}}return t}function Lh(r,t){let{selectHandle:e}=t.$refs,n=ea(e).top,s=e.offsetHeight,o=r.pageY,i=2;return o>n+s-i?-1:o<n+i?1:0}var wt=(r,t,e)=>{r.forEach((n,s,o)=>n.key===t?e(n,s,o):n.children?wt(n.children,t,e):!1)};function Ih(r,t,e,n){let s=n!==0,o,i,a;wt(r,t,(c,f,m)=>{i=m,a=f,o=c});let u=null,p;if(!s){let c=null;return wt(r,e,m=>{c=m}),{targetSourceNode:c,originSourceNode:o,originSourceNodeIndex:a,originSourceNodes:i}}return wt(r,e,(c,f,m)=>{u=m,p=f}),{targetSourceNodes:u,targetSourceNodeIndex:p,originSourceNode:o,originSourceNodeIndex:a,originSourceNodes:i}}function Nh(r,t,e,n,s){return s!==t||n>r?(s.splice(n,1),t.splice(r,0,e),{targetSourceNodes:t,originSourceNodes:s}):(t.splice(r,0,e),s.splice(n,1),{targetSourceNodes:t,originSourceNodes:s})}function Bh(r,t,e,n,s){let o=r+1;return s===t&&r>n&&(o=r),s.splice(n,1),t.splice(o,0,e),{targetSourceNodes:t,originSourceNodes:s}}var Ar=class extends O{onStateChange(t){return this.on(0,t)}};var Lr=class extends O{constructor(e){super(e);l(this,"_name","MenuItemCore");l(this,"debug",!0);l(this,"label");l(this,"tooltip");l(this,"icon");l(this,"shortcut");l(this,"menu",null);l(this,"_open",!1);l(this,"_hidden",!1);l(this,"_enter",!1);l(this,"_focused",!1);l(this,"_disabled",!1);let{_name:n,tooltip:s,label:o,icon:i,shortcut:a,disabled:u=!1,hidden:p=!1,menu:d,onClick:c}=e;this.label=o,this.tooltip=s,this.icon=i,this.shortcut=a,this._hidden=p,this._disabled=u,n&&(this._name=n),d&&(this.menu=d,d.onShow(()=>{this._open=!0,this.emit(5,h({},this.state))}),d.onHide(()=>{this._open=!1,this.emit(5,h({},this.state))})),c&&this.onClick(c.bind(this))}get state(){return{label:this.label,icon:this.icon,shortcut:this.shortcut,open:this._open,disabled:this._disabled,focused:this._focused||this._open}}get hidden(){return this._hidden}setIcon(e){this.icon=e,this.emit(5,h({},this.state))}disable(){this._disabled=!0,this.emit(5,h({},this.state))}enable(){this._disabled=!1,this.emit(5,h({},this.state))}handlePointerEnter(){this._enter||(this._enter=!0,this._focused=!0,this.emit(0),this.emit(5,h({},this.state)))}handlePointerMove(){}handlePointerLeave(){this._enter!==!1&&(this._enter=!1,this._focused=!1,this.emit(1),this.emit(5,h({},this.state)))}handleFocus(){this._focused||(this._focused=!0,this.emit(2),this.emit(5,h({},this.state)))}handleBlur(){this._focused!==!1&&(this._enter=!1,this.blur())}handleClick(){this._disabled||this.emit(4)}blur(){this._focused=!1,this.emit(3),this.emit(5,h({},this.state))}reset(){this._focused=!1,this._open=!1,this._enter=!1,this.menu&&this.menu.reset()}hide(){this._hidden=!0}show(){this._hidden=!1}unmount(){super.destroy(),this.menu&&this.menu.unmount(),this.reset()}onEnter(e){return this.on(0,e)}onLeave(e){return this.on(1,e)}onFocus(e){return this.on(2,e)}onBlur(e){return this.on(3,e)}onClick(e){return this.on(4,e)}onStateChange(e){return this.on(5,e)}get[Symbol.toStringTag](){return"MenuItem"}};var Ir=class extends O{constructor(e={}){super(e);l(this,"shape","checkbox-group");l(this,"options",[]);l(this,"disabled");l(this,"values",[]);l(this,"prevChecked",!1);let{options:n=[],disabled:s=!1,onChange:o}=e;this.disabled=s,this.options=n.map(i=>{let{label:a,value:u,checked:p,disabled:d}=i,c=new Qe({label:a,checked:p,disabled:d,onChange:f=>{let m=this.values.includes(u);if(f&&!m){this.checkOption(u);return}!f&&m&&this.uncheckOption(u)}});return{label:a,value:u,core:c}}),o&&this.onChange(o)}get indeterminate(){return this.values.length===this.options.length}get state(){return{values:this.values,options:this.options,disabled:this.disabled,indeterminate:this.indeterminate}}checkOption(e){console.log("[DOMAIN]domains/ui/checkbox/group - checkOption",e),this.values=this.values.concat(e),this.emit(1,[...this.values]),this.emit(0,h({},this.state))}uncheckOption(e){console.log("[DOMAIN]domains/ui/checkbox/group - uncheckOption",e),this.values=this.values.filter(n=>n!==e),this.emit(1,[...this.values]),this.emit(0,h({},this.state))}reset(){this.values=[],this.emit(1,[...this.values]),this.emit(0,h({},this.state))}setOptions(e){for(let n=0;n<this.options.length;n+=1)this.options[n].core.destroy();this.options=e.map(n=>{let{label:s,value:o,checked:i,disabled:a}=n,u=new Qe({label:s,checked:i,disabled:a,onChange:p=>{let d=this.values.includes(o);if(p&&!d){this.checkOption(o);return}!p&&d&&this.uncheckOption(o)}});return{label:s,value:o,core:u}}),console.log("[DOMAIN]ui/checkbox/group - setOptions",this.options.length),this.emit(0,h({},this.state))}onChange(e){return this.on(1,e)}onStateChange(e){return this.on(0,e)}};function se(r){let t=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&t==="[object Date]"?new r.constructor(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):new Date(NaN)}function ke(r,t){return r instanceof Date?new r.constructor(t):new Date(t)}function $r(r){let t=se(r);return t.setDate(1),t.setHours(0,0,0,0),t}function Fh(r,t){let e=se(r),n=se(t),s=e.getFullYear()-n.getFullYear(),o=e.getMonth()-n.getMonth();return s*12+o}function Nr(r,t,e){let n=e!=null&&e.ISOWeek?aa(t):Vr(t,e),s=e!=null&&e.ISOWeek?tt(r):we(r,e),o=pa(n,s),i=[];for(let u=0;u<=o;u++)i.push(Kr(s,u));return i.reduce((u,p)=>{let d=e!=null&&e.ISOWeek?sa(p):ta(p,e),c=u.find(f=>f.weekNumber===d);return c?(c.dates.push(p),u):(u.push({weekNumber:d,dates:[p]}),u)},[])}function ta(r,t){let e=se(r),n=we(e,t).getTime()-na(e,t).getTime();return Math.round(n/ln)+1}function na(r,t){var a,u,p,d,c,f,m,y;let e=Pt(),n=(y=(m=(d=(p=t==null?void 0:t.firstWeekContainsDate)!=null?p:(u=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:u.firstWeekContainsDate)!=null?d:e.firstWeekContainsDate)!=null?m:(f=(c=e.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)!=null?y:1,s=ra(r,t),o=ke(r,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),we(o,t)}function ra(r,t){var d,c,f,m,y,g,S,v;let e=se(r),n=e.getFullYear(),s=Pt(),o=(v=(S=(m=(f=t==null?void 0:t.firstWeekContainsDate)!=null?f:(c=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:c.firstWeekContainsDate)!=null?m:s.firstWeekContainsDate)!=null?S:(g=(y=s.locale)==null?void 0:y.options)==null?void 0:g.firstWeekContainsDate)!=null?v:1,i=ke(r,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);let a=we(i,t),u=ke(r,0);u.setFullYear(n,0,o),u.setHours(0,0,0,0);let p=we(u,t);return e.getTime()>=a.getTime()?n+1:e.getTime()>=p.getTime()?n:n-1}function tt(r){return we(r,{weekStartsOn:1})}function sa(r){let t=se(r),e=tt(t).getTime()-oa(t).getTime();return Math.round(e/ln)+1}function oa(r){let t=ia(r),e=ke(r,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),tt(e)}function ia(r){let t=se(r),e=t.getFullYear(),n=ke(r,0);n.setFullYear(e+1,0,4),n.setHours(0,0,0,0);let s=tt(n),o=ke(r,0);o.setFullYear(e,0,4),o.setHours(0,0,0,0);let i=tt(o);return t.getTime()>=s.getTime()?e+1:t.getTime()>=i.getTime()?e:e-1}function aa(r){return Vr(r,{weekStartsOn:1})}function Vr(r,t){var a,u,p,d,c,f,m,y;let e=Pt(),n=(y=(m=(d=(p=t==null?void 0:t.weekStartsOn)!=null?p:(u=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:u.weekStartsOn)!=null?d:e.weekStartsOn)!=null?m:(f=(c=e.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)!=null?y:0,s=se(r),o=s.getDay(),i=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function qr(r,t){let e=Nr($r(r),ca(r),t);if(t!=null&&t.useFixedWeeks){let n=la(r,t);if(n<6){let s=e[e.length-1],o=s.dates[s.dates.length-1],i=Br(o,6-n),a=Nr(Br(o,1),i,t);e.push(...a)}}return e}function la(r,t){return ua(ha(r),$r(r),t)+1}function ua(r,t,e){let n=we(r,e),s=we(t,e),o=n.getTime()-Ot(n),i=s.getTime()-Ot(s);return Math.round((o-i)/ln)}function we(r,t){var a,u,p,d,c,f,m,y;let e=Pt(),n=(y=(m=(d=(p=t==null?void 0:t.weekStartsOn)!=null?p:(u=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:u.weekStartsOn)!=null?d:e.weekStartsOn)!=null?m:(f=(c=e.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)!=null?y:0,s=se(r),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}var $h={};function Pt(){return $h}function ha(r){let t=se(r),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(0,0,0,0),t}function Br(r,t){let e=t*7;return Kr(r,e)}function Kr(r,t){let e=se(r);return isNaN(t)?ke(r,NaN):(t&&e.setDate(e.getDate()+t),e)}function ca(r){let t=se(r),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function pa(r,t){let e=Fr(r),n=Fr(t),s=e.getTime()-Ot(e),o=n.getTime()-Ot(n);return Math.round((s-o)/fa)}function Ot(r){let t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}function Fr(r){let t=se(r);return t.setHours(0,0,0,0),t}var fa=864e5,ln=6048e5;function Vh(r){let{today:t}=r;function e(m){return`${m.getMonth()+1}\u6708`}function n(m){u=[];let y=qr(m,{locale:{code:""},weekStartsOn:1});for(let g=0;g<y.length;g+=1){let{dates:S}=y[g],v=!1,C={id:g,dates:S.map((T,_)=>{T.setHours(0),T.setMinutes(0),T.setSeconds(0),T.setMilliseconds(0);let D=T.valueOf()===m.valueOf();return D&&(v=!0),{id:_,text:T.getDate().toString(),yyyy:(()=>{let F=T.getFullYear(),V=dr(T.getMonth()+1),L=dr(T.getDate());return`${F}-${V}-${L}`})(),is_prev_month:T.getMonth()<m.getMonth(),is_next_month:T.getMonth()>m.getMonth(),is_today:D,value:T,time:T.valueOf()}})};u.push(C),v&&(p=C.dates)}}t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);let s={text:t.getDate().toString(),value:t,time:t.valueOf()},o={text:e(t),value:t,time:t.valueOf()},i={text:t.getFullYear(),value:t,time:t.valueOf()},a={text:t.toLocaleDateString()+t.toLocaleTimeString(),value:t,time:t.valueOf()},u=[],p=[];n(t);let d={get day(){return s},get month(){return o},get year(){return i},get weekdays(){return p},get weeks(){return u},get selectedDay(){return a}},c;(g=>(g[g.SelectDay=0]="SelectDay",g[g.Change=1]="Change"))(c||(c={}));let f=j();return{state:d,get value(){return a?a.value:null},selectDay(m){if(s.value!==m){if(m.setHours(0),m.setMinutes(0),m.setSeconds(0),m.setMilliseconds(0),s={text:m.getDate().toString(),value:m,time:m.valueOf()},f.emit(0,m),a){let y=a.value.getFullYear(),g=m.getFullYear(),S=a.value.getMonth(),v=m.getMonth();(y!==g||S!==v)&&(o={text:e(m),value:m,time:m.valueOf()},i={text:m.getFullYear(),value:m,time:m.valueOf()},n(m))}a={text:m.toLocaleDateString()+m.toLocaleTimeString(),value:m,time:m.valueOf()},f.emit(1,h({},d))}},nextMonth(){},prevMonth(){},buildMonthText:e,onSelectDay(m){return f.on(0,m)},onChange(m){return f.on(1,m)}}}var Ur=null;function qh(r){Ur=r}var _t=class extends O{constructor(e,n={}){super({unique_id:n._name});l(this,"_name","RequestCore");l(this,"debug",!1);l(this,"defaultResponse",null);l(this,"service");l(this,"process");l(this,"client");l(this,"delay",null);l(this,"loading",!1);l(this,"initial",!0);l(this,"pending",null);l(this,"args",[]);l(this,"response",null);l(this,"error",null);l(this,"id",String(this.uid()));let{_name:s,client:o,delay:i,defaultResponse:a,loading:u,process:p,onSuccess:d,onFailed:c,onCompleted:f,onCanceled:m,onLoading:y,beforeRequest:g}=n;this.service=e,this.process=p,this.client=o,i!==void 0&&(this.delay=i),u!==void 0&&(this.loading=u),a&&(this.defaultResponse=a,this.response=a),s&&(this._name=s),d&&this.onSuccess(d),f&&this.onCompleted(f),m&&this.onCanceled(m),y&&this.onLoadingChange(y),g&&this.beforeRequest(g),Ur&&Ur(this),c&&this.onFailed(c,{override:!0})}get state(){return{initial:this.initial,loading:this.loading,error:this.error,response:this.response}}run(...e){return N(this,null,function*(){if(!this.service)return H.Err("\u7F3A\u5C11 service");if(typeof this.service!="function")return H.Err("service \u4E0D\u662F\u51FD\u6570");if(!this.client)return H.Err("\u7F3A\u5C11 client");if(this.pending!==null){let p=yield this.pending;this.loading=!1;let d=p.data;return this.pending=null,H.Ok(d)}this.loading=!0,this.initial=!1,this.response=this.defaultResponse,this.args=e,this.error=null,this.emit(2,!0),this.emit(7,h({},this.state)),this.emit(0);let n=null,s=(()=>{let{hostname:p="",url:d,method:c,query:f,body:m,headers:y,process:g}=this.service(...e);if(g&&(n=g),c==="GET"){let S=this.client.get(d,f,{id:this.id,headers:y});return H.Ok(S)}if(c==="POST"){let S=this.client.post(d,m,{id:this.id,headers:y});return H.Ok(S)}return H.Err(`\u672A\u77E5\u7684 method '${c}'`)})();if(s.error)return H.Err(s.error);this.pending=s.data;let[o]=yield Promise.all([this.pending,this.delay===null?null:Ui(this.delay)]);this.loading=!1;let i=n?n(o):o,a=this.process?this.process(i):i;if(this.emit(2,!1),this.emit(7,h({},this.state)),this.emit(5),this.pending=null,a.error)return a.error.code==="CANCEL"?(this.emit(6),H.Err(a.error)):(this.error=a.error,this.emit(4,a.error),this.emit(7,h({},this.state)),H.Err(a.error));let u=a.data;return this.response=u,this.emit(3,u),this.emit(7,h({},this.state)),this.emit(8,u),H.Ok(u)})}reload(){this.run(...this.args)}cancel(){if(!this.client)return H.Err("\u7F3A\u5C11 client");this.client.cancel(this.id)}clear(){this.response=null,this.emit(7,h({},this.state)),this.emit(8,this.response)}setError(e){this.error=e,this.emit(7,h({},this.state))}modifyResponse(e){if(this.response===null)return;let n=e(this.response);this.response=n,this.emit(7,h({},this.state)),this.emit(8,this.response)}onLoadingChange(e){return this.on(2,e)}beforeRequest(e){return this.on(0,e)}onSuccess(e){return this.on(3,e)}onFailed(e,n={}){return n.override&&this.offEvent(4),this.on(4,e)}onCanceled(e){return this.on(6,e)}onError(e){return this.on(4,e)}onCompleted(e){return this.on(5,e)}onStateChange(e){return this.on(7,e)}onResponseChange(e){return this.on(8,e)}};function hn(r,t){let e;return function(...s){e&&clearTimeout(e),e=setTimeout(()=>{t(...s),e=null},r)}}var Dt=10,qe=1,cn=0,pn={dataSource:[],page:qe,pageSize:Dt,total:cn,search:{},initial:!0,noMore:!1,loading:!1,refreshing:null,empty:!1,error:null},fn={page:qe,pageSize:Dt,next_marker:""};function zr(r,t){let e=h({},r);return t.forEach(n=>{delete e[n]}),e}function Kh(){}function Wr(r,t){return r[t]}function Uh(r,t,e){return typeof t!="object"?r:r==null?t:Object.keys(t).map(n=>{let s=Wr(t,n);return e?{[n]:s}:Wr(r,n)===void 0?{[n]:s}:{[n]:Wr(r,n)}}).reduce((n,s)=>h(h({},n),s),r)}var Wh={parse(r){if(r===""||r==="?")return{};let t=r;return r[0]==="?"&&(t=r.slice(1)),t.split("&").map(n=>{let[s,o]=n.split("=");return{[s]:o}}).reduce((n,s)=>h(h({},n),s),{})},stringify(r){return typeof r!="object"?"":Object.keys(r).map(t=>`${t}=${r[t]}`).join("&")}};var zh=r=>{if(r===null)return{dataSource:[],page:1,pageSize:Dt,total:cn,noMore:!1,empty:!1,error:new Error("process response fail, because response is null")};try{let t=r,{list:e,page:n=1,pageSize:s=10,total:o=0,isEnd:i}=t,a={dataSource:e,page:n,pageSize:s,total:o,noMore:!1,empty:!1,error:null};return o&&s&&n&&o<=s*n&&(a.noMore=!0),i!==void 0&&(a.noMore=i),s&&e.length<s&&(a.noMore=!0),e.length===0&&n===1&&(a.empty=!0),a}catch(t){return{dataSource:[],page:1,pageSize:Dt,total:cn,noMore:!1,empty:!1,error:new Error(`process response fail, because ${t.message}`)}}};var nt=class nt extends O{constructor(e,n={}){var y;super();l(this,"debug",!1);l(this,"request");l(this,"beforeRequest",(e,n)=>h(h({},n),e));l(this,"processor");l(this,"initialParams");l(this,"extraResponse");l(this,"extraDatSource",[]);l(this,"insertExtraDataSource",!1);l(this,"params",h({},fn));l(this,"response",h({},pn));l(this,"rowKey");l(this,"searchDebounce",hn(800,(...e)=>this.search(...e)));if(!(e instanceof _t))throw new Error("fetch must be a instance of RequestCore");let{debug:s,rowKey:o="id",beforeRequest:i,processor:a,extraDefaultResponse:u,extraDataSource:p,onLoadingChange:d,onStateChange:c,beforeSearch:f,afterSearch:m}=n;this.debug=!!s,this.rowKey=o,this.request=e,this.processor=g=>{let S=h(h({},this.response),nt.commonProcessor(g));if(a){let v=a(S,g);if(v!==void 0)return v}return S},i!==void 0&&(this.beforeRequest=i),this.initialParams=h({},fn),this.extraResponse=h({},u),this.extraDatSource=(y=n.extraDataSource)!=null?y:[],d&&this.onLoadingChange(d),c&&this.onStateChange(c),f&&this.onBeforeSearch(f),m&&this.onAfterSearch(m),this.initialize(n)}initialize(e){let{search:n,dataSource:s,page:o,pageSize:i,initial:a}=e;n!==void 0&&(this.initialParams=h(h({},this.initialParams),n),this.extraResponse.search=n),s!==void 0&&(this.extraResponse.dataSource=s),o!==void 0&&(this.initialParams.page=o,this.extraResponse.page=o),i!==void 0&&(this.initialParams.pageSize=i,this.extraResponse.pageSize=i),a!==void 0&&(this.extraResponse.initial=a),this.params=h({},this.initialParams),this.response=h(h({},nt.defaultResponse()),this.extraResponse);let f=this.params,{page:u,pageSize:p}=f,c={search:pe(f,["page","pageSize"])};u&&(c.page=u),p&&(c.pageSize=p),this.response=$(h(h({},this.response),c),{search:h({},this.response.search)})}setParams(e){let n=h(h({},this.params),e);typeof e=="function"&&(n=e(this.params)),this.params=n,this.emit(3,h({},this.params))}setDataSource(e){this.response.dataSource=e,this.emit(6,h({},this.response))}fetch(e,...n){return N(this,null,function*(){this.response.loading=!0,this.emit(0,!0),this.emit(6,h({},this.response));let s=h(h({},this.params),e),o=this.beforeRequest(h({},s),this.params);o===void 0&&(o=s);let i=[o,...n],a=yield this.request.run(...i);if(this.response.error=null,this.response.loading=!1,this.response.search=zr(h({},s),["page","pageSize"]),this.response.initial&&(this.response.initial=!1),this.params=h({},o),this.emit(0,!1),this.emit(3,h({},this.params)),this.emit(8),a.error)return H.Err(a.error);let u=a.data,p=this.processor(u);return p.dataSource===void 0&&(p.dataSource=[]),this.extraDatSource.length!==0&&this.insertExtraDataSource===!1&&(this.insertExtraDataSource=!0,p.dataSource=[...this.extraDatSource,...p.dataSource]),e.page===1&&p.dataSource.length===0&&(p.empty=!0),p.next_marker&&(this.params.next_marker=p.next_marker),H.Ok(p)})}init(){return N(this,arguments,function*(e={}){let n=yield this.fetch(h(h({},this.initialParams),e));return n.error?(this.response.error=n.error,this.emit(7,n.error),this.emit(6,h({},this.response)),H.Err(n.error)):(this.response=h(h({},this.response),n.data),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"init"}),H.Ok(h({},this.response)))})}initAny(){return N(this,null,function*(){return this.response.initial?this.init():(this.emit(6,h({},this.response)),H.Ok(this.response))})}next(){return N(this,null,function*(){let o=this.params,{page:e}=o,n=pe(o,["page"]),s=yield this.fetch($(h({},n),{page:e+1}));return s.error?(this.response.error=s.error,this.emit(7,s.error),this.emit(6,h({},this.response)),H.Err(s.error)):(this.response=h(h({},this.response),s.data),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"next"}),H.Ok(h({},this.response)))})}prev(){return N(this,null,function*(){let o=this.params,{page:e}=o,n=pe(o,["page"]),s=yield this.fetch($(h({},n),{page:e<=qe?qe:e-1}));return s.error?(this.response.error=s.error,this.emit(7,s.error),this.emit(6,h({},this.response)),H.Err(s.error)):(this.response=h(h({},this.response),s.data),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"prev"}),H.Ok(h({},this.response)))})}nextWithCursor(){}loadMoreForce(){return N(this,null,function*(){let i=this.params,{page:e}=i,n=pe(i,["page"]),s=yield this.fetch($(h({},n),{page:e+1}));if(s.error)return this.response.error=s.error,this.emit(7,s.error),this.emit(6,h({},this.response)),H.Err(s.error);s.data.dataSource.length===0&&(this.params.page-=1);let o=this.response.dataSource;return this.response=h(h({},this.response),s.data),this.response.dataSource=o.concat(s.data.dataSource),this.emit(6,h({},this.response)),this.emit(5,[...s.data.dataSource]),this.emit(4,{dataSource:[...this.response.dataSource],reason:"load_more"}),H.Ok(h({},this.response))})}loadMore(){return N(this,null,function*(){if(this.response.loading||this.response.noMore)return;let i=this.params,{page:e}=i,n=pe(i,["page"]),s=yield this.fetch($(h({},n),{page:e+1}));if(s.error)return this.response.error=s.error,this.emit(7,s.error),this.emit(6,h({},this.response)),H.Err(s.error);let o=this.response.dataSource;return this.response=h(h({},this.response),s.data),this.response.dataSource=o.concat(s.data.dataSource),this.emit(6,h({},this.response)),this.emit(5,[...s.data.dataSource]),this.emit(4,{dataSource:[...this.response.dataSource],reason:"load_more"}),H.Ok(h({},this.response))})}goto(e,n){return N(this,null,function*(){let u=this.params,{page:s,pageSize:o}=u,i=pe(u,["page","pageSize"]),a=yield this.fetch($(h({},i),{page:e<=qe?qe:e,pageSize:n!==void 0?n:o}));return a.error?(this.response.error=a.error,this.emit(7,a.error),this.emit(6,h({},this.response)),H.Err(a.error)):(this.response=h(h({},this.response),a.data),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"goto"}),H.Ok(h({},this.response)))})}search(...e){return N(this,null,function*(){this.emit(1);let n=yield this.fetch(h(h({},this.initialParams),e[0]));return this.emit(2,{params:e[0]}),n.error?(this.response.error=n.error,this.emit(7,n.error),this.emit(6,h({},this.response)),H.Err(n.error)):(this.response=h(h({},this.response),n.data),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"search"}),H.Ok(h({},this.response)))})}reset(){return N(this,arguments,function*(e={}){this.params=h({},this.initialParams);let n=yield this.fetch(e);return n.error?(this.response.error=n.error,this.emit(7,n.error),this.emit(6,h({},this.response)),H.Err(n.error)):(this.response=h(h({},this.response),n.data),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"reset"}),H.Ok(h({},this.response)))})}reload(){return N(this,null,function*(){return yield this.fetch({})})}refresh(){return N(this,null,function*(){let o=this.params,{page:e}=o,n=pe(o,["page"]);this.response.refreshing=!0,this.emit(6,h({},this.response));let s=yield this.fetch($(h({},n),{page:1,next_marker:""}));return this.response.refreshing=!1,s.error?(this.response.error=s.error,this.emit(7,s.error),this.emit(6,h({},this.response)),H.Err(s.error)):(this.response=h(h({},this.response),s.data),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"refresh"}),H.Ok(h({},this.response)))})}clear(){this.response=h({},pn),this.params=h({},fn),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"clear"})}deleteItem(e){let{dataSource:n}=this.response,s=n.filter(o=>!e(o));this.response.total=s.length,this.response.dataSource=s,this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"manually"})}deleteItems(e){return N(this,null,function*(){let{dataSource:n}=this.response,s=n.filter(o=>!e.includes(o));this.response.total=s.length,this.response.dataSource=s,this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"manually"})})}modifyItem(e){let{dataSource:n}=this.response,s=[];for(let o=0;o<n.length;o+=1){let i=n[o],a=e(i);a||(a=i),s.push(a)}this.response.dataSource=s,this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"manually"})}replaceDataSource(e){this.response.dataSource=e,this.emit(4,{dataSource:[...this.response.dataSource],reason:"manually"})}modifyDataSource(e){this.response.dataSource=this.response.dataSource.map(n=>e(n)),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"manually"})}modifyResponse(e){this.response=e(h({},this.response)),this.emit(6,h({},this.response)),this.emit(4,{dataSource:[...this.response.dataSource],reason:"manually"})}modifyParams(e){this.params=e(this.params),this.emit(3,h({},this.params))}modifySearch(e){this.params=$(h({},e(this.params)),{page:this.params.page,pageSize:this.params.pageSize}),this.emit(3,h({},this.params))}onStateChange(e){return this.on(6,e)}onLoadingChange(e){return this.on(0,e)}onBeforeSearch(e){return this.on(1,e)}onAfterSearch(e){return this.on(2,e)}onDataSourceChange(e){return this.on(4,e)}onDataSourceAdded(e){return this.on(5,e)}onError(e){return this.on(7,e)}onComplete(e){return this.on(8,e)}};l(nt,"defaultResponse",()=>h({},pn)),l(nt,"commonProcessor",zh);var Yr=nt;var jr=class extends O{constructor(e){super(e);l(this,"shape","multiple-select");l(this,"value",[]);l(this,"defaultValue",[]);l(this,"options",[]);let{defaultValue:n,options:s,onChange:o}=e;this.defaultValue=n,this.value=n,this.options=s,o&&this.onChange(o)}get state(){return{value:this.value,options:this.options}}setValue(e){this.value=e,this.emit(0,[...this.value])}toggle(e){if(this.value.includes(e)){this.remove(e);return}this.select(e)}select(e){this.value.includes(e)||(this.value.push(e),this.emit(0,[...this.value]),this.emit(1,h({},this.state)))}remove(e){this.value.includes(e)&&(this.value=this.value.filter(n=>n!==e),this.emit(0,[...this.value]),this.emit(1,h({},this.state)))}isEmpty(){return this.value.length===0}clear(){this.value=[],this.emit(0,[...this.value]),this.emit(1,h({},this.state))}onChange(e){return this.on(0,e)}onStateChange(e){return this.on(1,e)}};var ue={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Ee={L:1,M:0,Q:3,H:2},Me={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},z={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo(r){let t=r<<10;for(;z.getBCHDigit(t)-z.getBCHDigit(z.G15)>=0;)t^=z.G15<<z.getBCHDigit(t)-z.getBCHDigit(z.G15);return(r<<10|t)^z.G15_MASK},getBCHTypeNumber(r){let t=r<<12;for(;z.getBCHDigit(t)-z.getBCHDigit(z.G18)>=0;)t^=z.G18<<z.getBCHDigit(t)-z.getBCHDigit(z.G18);return r<<12|t},getBCHDigit(r){let t=0;for(;r!=0;)t++,r>>>=1;return t},getPatternPosition(r){return z.PATTERN_POSITION_TABLE[r-1]},getMask(r,t,e){switch(r){case Me.PATTERN000:return(t+e)%2==0;case Me.PATTERN001:return t%2==0;case Me.PATTERN010:return e%3==0;case Me.PATTERN011:return(t+e)%3==0;case Me.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2==0;case Me.PATTERN101:return t*e%2+t*e%3==0;case Me.PATTERN110:return(t*e%2+t*e%3)%2==0;case Me.PATTERN111:return(t*e%3+(t+e)%2)%2==0;default:throw new Error(`bad maskPattern:${r}`)}},getErrorCorrectPolynomial(r){let t=new Jr([1],0);for(let e=0;e<r;e++)t=t.multiply(new Jr([1,Z.gexp(e)],0));return t},getLengthInBits(r,t){if(t>=1&&t<10)switch(r){case ue.MODE_NUMBER:return 10;case ue.MODE_ALPHA_NUM:return 9;case ue.MODE_8BIT_BYTE:return 8;case ue.MODE_KANJI:return 8;default:throw new Error(`mode:${r}`)}else if(t<27)switch(r){case ue.MODE_NUMBER:return 12;case ue.MODE_ALPHA_NUM:return 11;case ue.MODE_8BIT_BYTE:return 16;case ue.MODE_KANJI:return 10;default:throw new Error(`mode:${r}`)}else if(t<41)switch(r){case ue.MODE_NUMBER:return 14;case ue.MODE_ALPHA_NUM:return 13;case ue.MODE_8BIT_BYTE:return 16;case ue.MODE_KANJI:return 12;default:throw new Error(`mode:${r}`)}else throw new Error(`type:${t}`)},getLostPoint(r){let t=r.getModuleCount(),e=0;for(var n=0;n<t;n++)for(var s=0;s<t;s++){let a=0,u=r.isDark(n,s);for(let p=-1;p<=1;p++)if(!(n+p<0||t<=n+p))for(let d=-1;d<=1;d++)s+d<0||t<=s+d||p==0&&d==0||u==r.isDark(n+p,s+d)&&a++;a>5&&(e+=3+a-5)}for(let a=0;a<t-1;a+=1)for(let u=0;u<t-1;u+=1){let p=0;r.isDark(a,u)&&p++,r.isDark(a+1,u)&&p++,r.isDark(a,u+1)&&p++,r.isDark(a+1,u+1)&&p++,(p==0||p==4)&&(e+=3)}for(var n=0;n<t;n++)for(var s=0;s<t-6;s++)r.isDark(n,s)&&!r.isDark(n,s+1)&&r.isDark(n,s+2)&&r.isDark(n,s+3)&&r.isDark(n,s+4)&&!r.isDark(n,s+5)&&r.isDark(n,s+6)&&(e+=40);for(var s=0;s<t;s++)for(var n=0;n<t-6;n++)r.isDark(n,s)&&!r.isDark(n+1,s)&&r.isDark(n+2,s)&&r.isDark(n+3,s)&&r.isDark(n+4,s)&&!r.isDark(n+5,s)&&r.isDark(n+6,s)&&(e+=40);let o=0;for(var s=0;s<t;s++)for(var n=0;n<t;n++)r.isDark(n,s)&&o++;let i=Math.abs(100*o/t/t-50)/5;return e+=i*10,e}},Z={glog(r){if(r<1)throw new Error(`glog(${r})`);return Z.LOG_TABLE[r]},gexp(r){for(;r<0;)r+=255;for(;r>=256;)r-=255;return Z.EXP_TABLE[r]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};(()=>{for(let r=0;r<8;r+=1)Z.EXP_TABLE[r]=1<<r;for(let r=8;r<256;r+=1)Z.EXP_TABLE[r]=Z.EXP_TABLE[r-4]^Z.EXP_TABLE[r-5]^Z.EXP_TABLE[r-6]^Z.EXP_TABLE[r-8];for(let r=0;r<255;r+=1)Z.LOG_TABLE[Z.EXP_TABLE[r]]=r})();var Jr=class Qr{constructor(t,e){l(this,"num");if(t.length===void 0)throw new Error(`${t.length}/${e}`);let n=0;for(;n<t.length&&t[n]===0;)n++;this.num=new Array(t.length-n+e);for(let s=0;s<t.length-n;s+=1)this.num[s]=t[s+n]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){let e=new Array(this.getLength()+t.getLength()-1);for(let n=0;n<this.getLength();n++)for(let s=0;s<t.getLength();s++)e[n+s]^=Z.gexp(Z.glog(this.get(n))+Z.glog(t.get(s)));return new Qr(e,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;let e=Z.glog(this.get(0))-Z.glog(t.get(0)),n=new Array(this.getLength());for(let s=0;s<this.getLength();s++)n[s]=this.get(s);for(let s=0;s<t.getLength();s++)n[s]^=Z.gexp(Z.glog(t.get(s))+e);return new Qr(n,0).mod(t)}},Yh=class{constructor(r){l(this,"mode");l(this,"parsedData");l(this,"data");this.mode=ue.MODE_8BIT_BYTE,this.data=r,this.parsedData=[];for(let t=0,e=this.data.length;t<e;t++){let n=[],s=this.data.charCodeAt(t);s>65536?(n[0]=240|(s&1835008)>>>18,n[1]=128|(s&258048)>>>12,n[2]=128|(s&4032)>>>6,n[3]=128|s&63):s>2048?(n[0]=224|(s&61440)>>>12,n[1]=128|(s&4032)>>>6,n[2]=128|s&63):s>128?(n[0]=192|(s&1984)>>>6,n[1]=128|s&63):n[0]=s,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(r){for(let t=0,e=this.parsedData.length;t<e;t++)r.put(this.parsedData[t],8)}},he,jh=(he=class{constructor(t,e){l(this,"typeNumber");l(this,"errorCorrectLevel");l(this,"modules",[]);l(this,"moduleCount");l(this,"dataCache");l(this,"dataList");this.typeNumber=t,this.errorCorrectLevel=e,this.modules=[],this.moduleCount=0,this.dataCache=null,this.dataList=[]}addData(t){let e=new Yh(t);this.dataList.push(e),this.dataCache=null}isDark(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(`${t},${e}`);return this.modules[t][e]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(let s=0;s<this.moduleCount;s++)this.modules[n][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=he.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}setupPositionProbePattern(t,e){for(let n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(let s=-1;s<=7;s++)e+s<=-1||this.moduleCount<=e+s||(n>=0&&n<=6&&(s==0||s==6)||s>=0&&s<=6&&(n==0||n==6)||n>=2&&n<=4&&s>=2&&s<=4?this.modules[t+n][e+s]=!0:this.modules[t+n][e+s]=!1)}getBestMaskPattern(){let t=0,e=0;for(let n=0;n<8;n++){this.makeImpl(!0,n);let s=z.getLostPoint(this);(n==0||t>s)&&(t=s,e=n)}return e}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){let t=z.getPatternPosition(this.typeNumber);for(let e=0;e<t.length;e++)for(let n=0;n<t.length;n++){let s=t[e],o=t[n];if(this.modules[s][o]==null)for(let i=-2;i<=2;i++)for(let a=-2;a<=2;a++)i==-2||i==2||a==-2||a==2||i==0&&a==0?this.modules[s+i][o+a]=!0:this.modules[s+i][o+a]=!1}}setupTypeNumber(t){let e=z.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var s=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=s}for(var n=0;n<18;n++){var s=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=s}}setupTypeInfo(t,e){let n=this.errorCorrectLevel<<3|e,s=z.getBCHTypeInfo(n);for(var o=0;o<15;o++){var i=!t&&(s>>o&1)==1;o<6?this.modules[o][8]=i:o<8?this.modules[o+1][8]=i:this.modules[this.moduleCount-15+o][8]=i}for(var o=0;o<15;o++){var i=!t&&(s>>o&1)==1;o<8?this.modules[8][this.moduleCount-o-1]=i:o<9?this.modules[8][15-o-1+1]=i:this.modules[8][15-o-1]=i}this.modules[this.moduleCount-8][8]=!t}mapData(t,e){let n=-1,s=this.moduleCount-1,o=7,i=0;for(let a=this.moduleCount-1;a>0;a-=2)for(a==6&&a--;;){for(let u=0;u<2;u++)if(this.modules[s][a-u]==null){let p=!1;i<t.length&&(p=(t[i]>>>o&1)==1),z.getMask(e,s,a-u)&&(p=!p),this.modules[s][a-u]=p,o--,o==-1&&(i++,o=7)}if(s+=n,s<0||this.moduleCount<=s){s-=n,n=-n;break}}}},l(he,"PAD0",236),l(he,"PAD1",17),l(he,"createData",function(t,e,n){let s=Gh.getRSBlocks(t,e),o=new Jh;for(let a=0;a<n.length;a+=1){let u=n[a];o.put(u.mode,4),o.put(u.getLength(),z.getLengthInBits(u.mode,t)),u.write(o)}let i=0;for(let a=0;a<s.length;a+=1)i+=s[a].dataCount;if(o.getLengthInBits()>i*8)throw new Error(`code length overflow. (${o.getLengthInBits()}>${i*8})`);for(o.getLengthInBits()+4<=i*8&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(!1);for(;!(o.getLengthInBits()>=i*8||(o.put(he.PAD0,8),o.getLengthInBits()>=i*8));)o.put(he.PAD1,8);return he.createBytes(o,s)}),l(he,"createBytes",function(t,e){let n=0,s=0,o=0,i=new Array(e.length),a=new Array(e.length);for(let m=0;m<e.length;m+=1){let y=e[m].dataCount,g=e[m].totalCount-y;s=Math.max(s,y),o=Math.max(o,g),i[m]=new Array(y);for(let C=0;C<i[m].length;C+=1)i[m][C]=255&t.buffer[C+n];n+=y;let S=z.getErrorCorrectPolynomial(g),v=new Jr(i[m],S.getLength()-1).mod(S);a[m]=new Array(S.getLength()-1);for(let C=0;C<a[m].length;C+=1){let T=C+v.getLength()-a[m].length;a[m][C]=T>=0?v.get(T):0}}let u=0;for(let m=0;m<e.length;m+=1)u+=e[m].totalCount;let p=new Array(u),d=0;for(let m=0;m<s;m+=1)for(let y=0;y<e.length;y+=1)m<i[y].length&&(p[d++]=i[y][m]);for(var c=0;c<o;c++)for(var f=0;f<e.length;f++)c<a[f].length&&(p[d++]=a[f][c]);return p}),he),oe,Gh=(oe=class{constructor(t,e){l(this,"totalCount");l(this,"dataCount");this.totalCount=t,this.dataCount=e}},l(oe,"RS_BLOCK_TABLE",[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]]),l(oe,"getRSBlocks",function(t,e){let n=oe.getRsBlockTable(t,e);if(n==null)throw new Error(`bad rs block @ typeNumber:${t}/errorCorrectLevel:${e}`);let s=n.length/3,o=[];for(let i=0;i<s;i++){let a=n[i*3+0],u=n[i*3+1],p=n[i*3+2];for(let d=0;d<a;d++)o.push(new oe(u,p))}return o}),l(oe,"getRsBlockTable",function(t,e){switch(e){case Ee.L:return oe.RS_BLOCK_TABLE[(t-1)*4+0];case Ee.M:return oe.RS_BLOCK_TABLE[(t-1)*4+1];case Ee.Q:return oe.RS_BLOCK_TABLE[(t-1)*4+2];case Ee.H:return oe.RS_BLOCK_TABLE[(t-1)*4+3];default:return}}),oe),Jh=class{constructor(){l(this,"length");l(this,"buffer");this.buffer=[],this.length=0}get(r){let t=Math.floor(r/8);return(this.buffer[t]>>>7-r%8&1)==1}put(r,t){for(let e=0;e<t;e++)this.putBit((r>>>t-e-1&1)==1)}getLengthInBits(){return this.length}putBit(r){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}},rt=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function Qh(r,t){let e=1,n=Xh(r);for(let s=0,o=rt.length;s<=o;s++){let i=0;switch(t){case Ee.L:i=rt[s][0];break;case Ee.M:i=rt[s][1];break;case Ee.Q:i=rt[s][2];break;case Ee.H:i=rt[s][3];break}if(n<=i)break;e++}if(e>rt.length)throw new Error("Too long data");return e}function Xh(r){let t=encodeURI(r).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=r?3:0)}var Gr,da=(Gr=class{constructor(r){l(this,"_htOption");l(this,"_oQRCode",null);this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Ee.H,text:""};let t=typeof r=="string"?{text:r}:r||{};for(let e in t)this._htOption[e]=t[e];this._oQRCode=null}fetchModel(r,t={}){return[void 0,null,""].includes(r)?(console.error("\u4E8C\u7EF4\u7801\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),null):(this._oQRCode=new jh(Qh(r,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(r),this._oQRCode.make(),this._oQRCode)}},l(Gr,"CorrectLevel",Ee),Gr);var dn=class{constructor(t){l(this,"ctx");l(this,"isPainted",!1);l(this,"options");let{ctx:e}=t;this.options=t,this.ctx=e}draw(t){let{ctx:e}=this,{options:n}=this,s=t.getModuleCount(),o=n.width/s,i=n.height/s,a=Math.round(o),u=Math.round(i);console.log("count",s,a,u),this.clear();for(let p=0;p<s;p++)for(let d=0;d<s;d++){let c=t.isDark(p,d),f=d*o,m=p*i;e.strokeStyle=c?"#000000":"#ffffff",e.lineWidth=1,e.fillStyle=c?"#000000":"#ffffff",e.fillRect(f,m,o,i),e.strokeRect(Math.floor(f)+.5,Math.floor(m)+.5,a,u),e.strokeRect(Math.ceil(f)-.5,Math.ceil(m)-.5,a,u)}this.isPainted=!0}clear(){this.ctx.clearRect(0,0,this.options.width,this.options.height),this.isPainted=!1}round(t){return t&&Math.floor(t*1e3)/1e3}};function Zh(r,t){return N(this,null,function*(){let{width:e,height:n}=t,s=new dn(t),o=yield new da({width:e,height:n}).fetchModel(r,t);s.draw(o)})}var mn={};Ue(mn,{onCreateGetPayload:()=>tc,onCreatePostPayload:()=>ec,request:()=>es,request_factory:()=>nc});var Xr=null;function ec(r){Xr=r}var Zr=null;function tc(r){Zr=r}var es={get(r,t,e={}){let{headers:n}=e,o={url:[r,t?"?"+le(t):""].join(""),method:"GET",headers:n};return Zr&&Zr(o),o},post(r,t,e={}){let{headers:n}=e,s={url:r,method:"POST",body:t,headers:n};return Xr&&Xr(s),s}};function nc(r={}){var i,a;let{hostnames:t={}}=r,e=t.prod||"",n=(i=r.headers)!=null?i:{},s="prod",o=(a=r.debug)!=null?a:!1;return{getHostname(){return e},setHostname(u){o&&console.log("[REQUEST]utils - setHostname",u),e=u},setHeaders(u){o&&console.log("[REQUEST]utils - setHeaders",u),n=u},deleteHeaders(u){delete n[u]},appendHeaders(u){o&&console.log("[REQUEST]utils - appendHeaders",u),n=h(h({},n),u)},setEnv(u){o&&console.log("[REQUEST]utils - setEnv",u);let{prod:p="",dev:d=p,test:c=p,beta:f=p}=t;s=u,u==="dev"&&(e=d),u==="test"&&(e=c),u==="beta"&&(e=f),u==="prod"&&(e=p)},setDebug(u){o=u},get(...u){let p=es.get(...u),{url:d,method:c,query:f,params:m,body:y,headers:g}=p;return o&&(console.log("create GET payload"),console.log(p),console.log("current hostname is",e),console.log("current headers is",g),console.log("current env is",s)),{hostname:e,url:d,method:c,query:f,params:m,body:y,headers:h(h({},p.headers),n),process:r.process}},post(...u){let p=es.post(...u),{url:d,method:c,query:f,params:m,body:y={}}=p;return o&&(console.log("create POST payload"),console.log(p),console.log("current hostname is",e),console.log("current headers is",n)),{hostname:e,url:d,method:c,query:f,params:m,body:y,headers:h(h({},p.headers),n),process:r.process}}}}var ts=class extends O{constructor(e){super(e);l(this,"key");l(this,"values");l(this,"defaultValues");l(this,"client");l(this,"set",hn(100,(e,n)=>{let s=$(h({},this.values),{[e]:n});this.values=s,this.client.setItem(this.key,JSON.stringify(this.values)),this.emit(0,h({},this.state))}));l(this,"merge",(e,n,s={})=>{let o=this.get(e)||{};if(Array.isArray(o)){let i=s.reverse?[...n,...o]:[...o,...n];return s.limit&&(i=i.slice(0,s.limit)),this.set(e,i),i}if(typeof o=="object"&&typeof n=="object"){let i=h(h({},o),n);return this.set(e,i),i}return console.warn("the params of merge must be object"),o});let{key:n,client:s,defaultValues:o,values:i}=e;this.key=n,this.values=i,this.values=h(h({},o),i),this.defaultValues=o,this.client=s}get state(){return{values:this.values}}get(e,n){let s=this.values[e];if(s===void 0){if(n)return n[e];throw new Error("the default value no existing")}return s}clear(e){if(this.values[e]===void 0)return null;this.values=$(h({},this.values),{[e]:this.defaultValues[e]}),this.client.setItem(this.key,JSON.stringify(this.values)),this.emit(0,h({},this.state))}remove(e){this.clear(e)}onStateChange(e){return this.on(0,e)}};var gn=class{constructor(){l(this,"connection","unknown");typeof window!="undefined"&&(this.connection=this.query_network())}query_network(){if(navigator.connection)return navigator.connection.type;let t=navigator.userAgent,e=/NetType\/(\S*)/,n=t.match(e);return n?n[1]:"unknown"}},rc=new gn;function ns(r={}){let t={refresh(){c.emit(3,h({},p))},register(f){let m=Object.keys(f);for(let y=0;y<m.length;y+=1){let g=m[y],S=g.split(",");for(let v=0;v<S.length;v+=1)s[S[v]]=f[g]}},clearPressedKeys(){u!==null&&(clearTimeout(u),u=null),u=setTimeout(()=>{o=[]},200)},invokeHandlers(f,m){let y=s[m];y&&y(f)},buildShortcut(){let m=Object.keys(a).join("+"),y=o.join("");return{key1:m,key2:y}},setRecordingCodes(f){console.log("[DOMAIN]shortcut - setRecordingCodes",f),f.split("+").forEach(m=>{i[m]=!0}),t.refresh()},reset(){a={},i={},t.refresh()},testShortcut(f,m){let{key1:y,key2:g,step:S}=f;if(S==="keydown"&&y.includes("+")){let v=s[y];if(v){m.step=S,v(m);return}}if(S==="keydown"&&g){let v=s[g];v&&v(m);return}},handleKeydown(f){o.join("")===f.code&&s[[f.code,f.code].join("")]?o.push(f.code):o=[f.code],a[f.code]=!0,i[f.code]=!0,t.refresh(),t.testShortcut($(h({},t.buildShortcut()),{step:"keydown"}),f),t.clearPressedKeys()},handleKeyup(f,m={}){t.testShortcut($(h({},t.buildShortcut()),{step:"keyup"}),f),["MetaLeft","MetaRight"].includes(f.code)&&(a={}),delete a[f.code],Object.keys(a).length===0&&r.mode==="recording"&&c.emit(2,{codes:Object.keys(i)}),t.refresh()}},e={},n=[],s={},o=[],i={},a={},u=null,p={get codes(){return Object.keys(a)},get codes2(){return Object.keys(i)}},d;(v=>(v[v.Shortcut=0]="Shortcut",v[v.Keydown=1]="Keydown",v[v.ShortcutComplete=2]="ShortcutComplete",v[v.StateChange=3]="StateChange",v[v.Error=4]="Error"))(d||(d={}));let c=j();return{methods:t,ui:e,state:p,ready(){},destroy(){c.destroy()},onShortcut(f){return n.push(f),()=>{}},onShortcutComplete(f){return c.on(2,f)},onStateChange(f){return c.on(3,f)},onError(f){return c.on(4,f)}}}function ie(r){let t={refresh(){u.emit(0,h({},i))}},e={},n=0,s=[],o=0,i={},a;(c=>(c[c.StateChange=0]="StateChange",c[c.Error=1]="Error"))(a||(a={}));let u=j();return{methods:t,ui:e,state:i,ready(){},destroy(){u.destroy()},onStateChange(p){return u.on(0,p)},onError(p){return u.on(1,p)}}}ie.isSamePoint=function(r,t){return r.path.join("_")===t.path.join("_")&&r.offset===t.offset};ie.isAtLineHead=function(r){return r.offset===0};ie.isAtFirstLineHead=function(r){return r.path[0]===0&&r.offset===0};var Sn={};Ue(Sn,{SlateNodeOperations:()=>I,findNodeByPathWithNode:()=>J});function yn(r,t,e){return t.length===0?r:r.substring(0,e)+r.substring(e+t.length)}function st(r,t,e){return r===""?t:r.substring(0,e)+t+r.substring(e)}var I={insertText(r,t){if(t.type!=="insert_text")return r;let e=J(r,t.path);return e&&e.type==="text"&&(e.text=st(e.text,t.text,t.offset)),r},replaceText(r,t){if(t.type!=="replace_text")return r;let e=J(r,t.path);return e&&e.type==="text"&&(e.text=st(t.original_text,t.text,t.offset)),r},removeText(r,t){if(t.type!=="remove_text")return r;let e=J(r,t.path);if(!e||e.type!=="text")return r;let n=e.text;return e.text=yn(n,t.text,t.offset),r},splitNode(r,t){if(t.type!=="split_node")return r;let e=J(r,t.path);if(!e||e.type!=="text")return r;let n=e.text,s=n.slice(0,t.offset),o=n.slice(t.offset);e.text=s;let i={type:"paragraph",children:[{type:"text",text:o}]},a=t.path[0]+1,u=t.path[0]+1;return console.log("[op.node]before insert created_node",r,a,u),[...r.slice(0,a),i,...r.slice(u)]},mergeNode(r,t){if(t.type!=="merge_node")return r;let e=J(r,t.path),n=J(r,t.end.path);return e&&n&&e.type==="text"&&n.type==="text"&&(e.text=e.text+n.text,r=ee.removeLine(r,t.end.path[0])),r},insertLines(r,t){return t.type!=="insert_line"?r:[...r.slice(0,t.path[0]+1),...t.node,...r.slice(t.path[0]+1)]},removeLines(r,t){return t.type!=="remove_lines"?r:[...r.slice(0,t.path[0]),...r.slice(t.path[0]+t.node.length)]},exec(r,t){return t.type==="insert_text"?I.insertText(r,t):t.type==="replace_text"?I.replaceText(r,t):t.type==="remove_text"?I.removeText(r,t):t.type==="insert_line"?I.insertLines(r,t):t.type==="remove_lines"?I.removeLines(r,t):t.type==="merge_node"?I.mergeNode(r,t):t.type==="split_node"?I.splitNode(r,t):r}};function J(r,t){let e=0,n=r[t[e]];if(!n)return null;for(;e<t.length-1;)e+=1,n.type==="paragraph"&&(n=n.children[t[e]]);return n!=null?n:null}function ee(){let r={refresh(){d.emit(0,h({},u))},moveForward(c={}){let{step:f=1,collapse:m=!0}=c;t.offset+=f,e.offset=t.offset,r.setStartAndEnd({start:t,end:e})},moveBackward(c={}){let{step:f=1,min:m=0}=c;t.offset-=f,t.offset<m&&(t.offset=m),e.offset=t.offset,r.setStartAndEnd({start:t,end:e})},moveToPrevLineHead(){t={path:[t.path[0]-1,0],offset:0},e=h({},t),r.refresh()},calcNextLineHead(){let c={path:[t.path[0]+1,0],offset:0},f=h({},c);return{start:c,end:f}},moveToNextLineHead(){let c=r.calcNextLineHead();t=c.start,e=c.end,r.refresh()},collapseToHead(){e=h({},t),r.setStartAndEnd({start:t,end:e})},collapseToEnd(){t=h({},e),r.setStartAndEnd({start:t,end:e})},collapseToOffset(c){t.offset=c.offset,e=h({},t),r.setStartAndEnd({start:t,end:e})},setToHead(){t={path:[0],offset:0},e={path:[0],offset:0},r.refresh()},setStartAndEnd(c){t=h({},c.start),e=h({},c.end),n=ie.isSamePoint(c.start,c.end),i=!0,setTimeout(()=>{i=!1},0),r.refresh()},handleChange(c){t=c.start,e=c.end,n=c.collapsed,r.refresh()}},t={path:[],offset:0},e={path:[],offset:0},n=!0,s=!1,o=[],i=!1,a={},u={get start(){return $(h({},t),{line:t.path[0]})},get end(){return $(h({},e),{line:e.path[0]})},get collapsed(){return n},get dirty(){return i}},p;(m=>(m[m.StateChange=0]="StateChange",m[m.Error=1]="Error"))(p||(p={}));let d=j();return{methods:r,ui:a,state:u,get dirty(){return u.dirty},get start(){return u.start},get end(){return u.end},get collapsed(){return u.collapsed},print(){return{start:`line: ${t.path[0]} col: ${t.offset}`,end:`line: ${e.path[0]} col: ${e.offset}`}},ready(){},destroy(){d.destroy()},onStateChange(c){return d.on(0,c)},onError(c){return d.on(1,c)}}}ee.getLineLastPoint=function(r,t){let e=[t],n=0,s=r[t];for(;s;)s.type==="paragraph"?(e.push(s.children.length-1),s=s.children[s.children.length-1]):s.type==="text"&&(n=s.text.length,s=null);return{path:e,offset:n}};ee.getLineLastNode=function(r,t){let e=[t],n=0,s=r[t],o=s;for(;s;)s.type==="paragraph"?(e.push(s.children.length-1),s=s.children[s.children.length-1]):s.type==="text"&&(n=s.text.length,o=s,s=null);return{path:e,offset:n,node:o}};ee.getLineFirstNode=function(r,t){let e=[t],n=0,s=r[t],o=s;for(;s;)s.type==="paragraph"?(e.push(0),s=s.children[0]):s.type==="text"&&(o=s,s=null);return{path:e,offset:n,node:o}};ee.isCaretAtLineEnd=function(r,t){let e=J(r,t.path);return e?e.type==="text"&&t.offset===e.text.length:!1};ee.isCaretAtLineHead=function(r,t){let e=J(r,t.path);return e?e.type==="text"&&t.offset===0:!1};ee.removeLine=function(r,t){return[...r.slice(0,t),...r.slice(t+1)]};ee.removeLinesBetweenStartAndEnd=function(r,t,e){return[...r.slice(0,t.path[0]+1),...r.slice(e.path[0]+1)]};ee.removeNode=function(r,t){};function ma(){let r={refresh(){u.emit(0,h({},i))},mark(){o=!0},push(p,d){let c=n[n.length-1],f=c?c.operations[c.operations.length-1]:null,m=!0,y=!1;if(m&&(c?c.operations.length!=0&&(y=!0):y=!1),o&&(y=!1,o=!1),c&&y)c.operations.push(...p);else{let g={operations:p,selectionBefore:d};n.push(g)}s=[],console.log("[]slate/history - push",n),r.refresh()},undo(){var f;let p=n[n.length-1];console.log("[]slate/history - undo after .last(",p);let d=p?p.operations.reverse():[],c=[];for(let m=0;m<d.length;m+=1){let y=d[m];switch(y.type){case"insert_text":{c.push({type:"remove_text",text:y.text,original_text:"",path:y.path,offset:y.offset});break}case"remove_text":{c.push({type:"insert_text",text:y.text,original_text:"",path:y.path,offset:y.offset});break}case"insert_line":{c.push({type:"remove_lines",node:y.node,path:[y.path[0]+1]});break}case"remove_lines":{c.push({type:"insert_line",node:y.node,path:[y.path[0]-1]});break}case"split_node":{c.push({type:"merge_node",path:y.path,offset:y.offset,start:{path:y.start.path,offset:y.start.offset},end:{path:y.end.path,offset:y.end.offset}});break}case"merge_node":{c.push({type:"split_node",path:y.path,offset:y.offset,start:{path:y.start.path,offset:y.start.offset},end:{path:y.end.path,offset:y.end.offset}});break}}}return n.pop(),console.log("[]slate/history - undo before return(",c),{operations:c,selection:(f=p==null?void 0:p.selectionBefore)!=null?f:null}}},t={},e=[],n=[],s=[],o=!1,i={get stacks(){return e.map(p=>({type:p.type,created_at:p.created_at}))}},a;(c=>(c[c.StateChange=0]="StateChange",c[c.Error=1]="Error"))(a||(a={}));let u=j();return{methods:r,ui:t,state:i,ready(){},destroy(){u.destroy()},onStateChange(p){return u.on(0,p)},onError(p){return u.on(1,p)}}}function ae(r){let t={refresh(){o.emit(0,h({},n))}},e={},n={},s;(u=>(u[u.StateChange=0]="StateChange",u[u.Error=1]="Error"))(s||(s={}));let o=j();return{methods:t,ui:e,state:n,ready(){},destroy(){o.destroy()},onStateChange(i){return o.on(0,i)},onError(i){return o.on(1,i)}}}ae.isPath=function(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")};ae.equals=function(t,e){return t.length===e.length&&t.every((n,s)=>n===e[s])};ae.previous=function(r){let t=r[r.length-1];return r.slice(0,-1).concat(t-1)};ae.endsBefore=function(r,t){let e=r.length-1,n=r.slice(0,e),s=t.slice(0,e),o=r[e],i=t[e];return ae.equals(n,s)&&o<i};ae.compare=function(r,t){let e=Math.min(r.length,t.length);for(let n=0;n<e;n++){if(r[n]<t[n])return-1;if(r[n]>t[n])return 1}return 0};ae.isAncestor=function(r,t){return r.length<t.length&&ae.compare(r,t)===0};ae.parent=function(r){return r.slice(0,-1)};ae.isSameParent=function(r,t){let e=r.length-1,n=r.slice(0,e),s=t.slice(0,e);return ae.equals(n,s)};var ss=r=>typeof r=="object"&&r!==null;function os(r,t){for(let e of r){if(e.key===t)return e;if(e.type==="paragraph"&&e.children){let n=os(e.children,t);if(n)return n}}return null}function is(r){return ss(r)&&typeof r.text=="string"}function as(r,t={}){let{deep:e=!1}=t;return!ss(r)||typeof r.apply=="function"?!1:e?oc(r.children):Array.isArray(r.children)}function sc(r,t){return is(r)||as(r,t)}function oc(r){return Array.isArray(r)&&r.every(t=>sc(t,{deep:!0}))}function ga(){let r=0;return function(){return r+=1,r}}function ic(r){let t={refresh(){m.emit(2,h({},c))},emitSelectionChange(g){m.emit(1,{type:g.type,start:e.$selection.start,end:e.$selection.end})},apply(g){e.$history.methods.push(g,{start:e.$selection.start,end:e.$selection.end}),m.emit(0,g)},findNodeByPath(g){var C;console.log("[]slate/slate findNodeByPath",n,g);let S=0,v=n[g[S]];for(;S<g.length-1;)S+=1,v=(C=v.children)==null?void 0:C[g[S]];return v},getDefaultInsertLocation(){return[0]},insertText(g,S={}){let v=e.$selection.start,C=e.$selection.end,T=t.findNodeByPath(e.$selection.start.path);if(!T||T.type!=="text")return;let _=!1;a&&u&&(e.$selection.methods.setStartAndEnd({start:a,end:u}),_=!0,a=null,u=null);let D=e.$selection.start,F=e.$selection.end,V=T.text,L=g;if([" ","\uFF0C","\u3002","\uFF1B"].includes(L)&&e.$history.methods.mark(),ie.isSamePoint(D,F)){let E={type:"insert_text",text:L,original_text:V,path:D.path,offset:D.offset};n=I.exec(n,E),t.apply([E]),e.$selection.methods.moveForward({step:g.length}),t.emitSelectionChange({type:"insert_text"});return}if(!ae.isSameParent(D.path,F.path)){let E=J(n,F.path);if(E&&E.type==="text"){let w=[],{op_start_delete_text:x,op_end_delete_text:k}=t.removeContentCrossLines(T,E,D,F);n=I.exec(n,x),n=I.exec(n,k),w.push(x),w.push(k);let M=t.removeLinesCrossLines(D,F);M&&(n=I.exec(n,M.op_remove_lines),w.push(M.op_remove_lines));let q={type:"merge_node",path:D.path,offset:D.offset,start:D,end:M?M.end:F};n=I.exec(n,q),w.push(q);let U={type:"insert_text",text:L,original_text:V,path:D.path,offset:D.offset};n=I.exec(n,U),w.push(U),t.apply(w),e.$selection.methods.collapseToOffset({offset:D.offset+L.length}),t.emitSelectionChange({type:"unknown"});return}}let K=V.substring(D.offset,F.offset),W=[],P={type:"remove_text",ignore:_,text:K,original_text:V,path:D.path,offset:D.offset};W.push(P),n=I.exec(n,P);let b={type:"insert_text",text:L,original_text:V,path:D.path,offset:D.offset};W.push(b),n=I.exec(n,b),t.apply(W),e.$selection.methods.collapseToOffset({offset:D.offset+L.length}),t.emitSelectionChange({type:"insert_text"})},insertLineBefore(){let{start:g}=e.$selection,S=g.path[0],v={type:"insert_line",node:[{key:ot(),type:"paragraph",children:[{type:"text",text:""}]}],path:[S-1]};n=I.exec(n,v),t.apply([v]),e.$selection.methods.moveToNextLineHead(),t.emitSelectionChange({type:"insert_line"})},insertLineAfter(){let{start:g,end:S}=e.$selection,v=ie.isSamePoint(g,S);console.log("[]slate/slate - insertLineAfter",v,g,S);let C=[];if(!v){let _=J(n,g.path);if(_&&_.type==="text"){let D=_.text,F=D.substring(g.offset,S.offset),V={type:"remove_text",text:F,original_text:D,path:g.path,offset:g.offset};n=I.exec(n,V),C.push(V)}}let T={type:"insert_line",node:[{key:ot(),type:"paragraph",children:[{type:"text",text:""}]}],path:g.path};C.push(T),n=I.exec(n,T),t.apply(C),e.$selection.methods.moveToNextLineHead(),t.emitSelectionChange({type:"insert_line"})},splitLine(){let{start:g,end:S}=e.$selection;if(ie.isSamePoint(g,S)){let K=e.$selection.methods.calcNextLineHead(),W={type:"split_node",path:g.path,offset:g.offset,start:K.start,end:K.end};console.log("[]slate/slate - splitLine",n),n=I.exec(n,W),t.apply([W]),e.$selection.methods.setStartAndEnd(K),t.emitSelectionChange({type:"split_node"});return}let C=t.findNodeByPath(g.path),T=t.findNodeByPath(S.path);if(!C||C.type!=="text"||!T||T.type!=="text")return;if(ae.isSameParent(g.path,S.path)){let K=C.text,W=K.substring(g.offset,S.offset),P=[],b={type:"remove_text",text:W,original_text:K,path:g.path,offset:g.offset};P.push(b),n=I.exec(n,b);let E=e.$selection.methods.calcNextLineHead(),w={type:"split_node",path:g.path,offset:g.offset,start:E.start,end:E.end};P.push(w),n=I.exec(n,w),t.apply(P),e.$selection.methods.setStartAndEnd(E),t.emitSelectionChange({type:"split_node"});return}let _=[],{op_start_delete_text:D,op_end_delete_text:F}=t.removeContentCrossLines(C,T,g,S);n=I.exec(n,D),n=I.exec(n,F),_.push(D),_.push(F);let V=t.removeLinesCrossLines(g,S);V&&(n=I.exec(n,V.op_remove_lines),_.push(V.op_remove_lines));let L=e.$selection.methods.calcNextLineHead(),A={type:"split_node",path:g.path,offset:g.offset,start:L.start,end:V?V.end:L.end};_.push(A),n=I.exec(n,A),t.apply(_),e.$selection.methods.setStartAndEnd(L),t.emitSelectionChange({type:"split_node"})},mergeLines(g){console.log("[]mergeLines",g);let S=ee.getLineLastNode(n,g.path[0]-1),v=ee.getLineFirstNode(n,g.path[0]),C=ee.getLineLastPoint(n,g.path[0]-1),T={type:"merge_node",path:S.path,offset:S.offset,start:v,end:v};n=I.exec(n,T),t.apply([T]),e.$selection.methods.setStartAndEnd({start:C,end:C}),t.emitSelectionChange({type:"merge_node"})},removeLines(g){let S=J(n,[g.path[0]]);if(S){let v={type:"remove_lines",node:[S],path:g.path};n=I.exec(n,v),t.apply([v]),e.$selection.methods.moveToPrevLineHead(),t.emitSelectionChange({type:"remove_lines"})}},removeText(g,S){let v=g.text,C=[S.offset-1,S.offset],T=v.substring(C[0],C[1]),_={type:"remove_text",text:T,original_text:v,path:S.path,offset:C[0]};n=I.exec(n,_),t.apply([_]),e.$selection.methods.moveBackward(),t.emitSelectionChange({type:"remove_text"})},removeContentCrossLines(g,S,v,C){let T=g.text.slice(v.offset),_=S.text.slice(0,C.offset);console.log("[]slate/slate - removeSelectedText - line1 delete text",T,v.offset),console.log("[]slate/slate - removeSelectedText - line2 delete text",_,0);let D={type:"remove_text",text:T,original_text:g.text,path:v.path,offset:v.offset},F={type:"remove_text",text:_,original_text:S.text,path:C.path,offset:0};return{op_start_delete_text:D,op_end_delete_text:F}},removeLinesCrossLines(g,S){let v=S;if(console.log("[]slate/slate - removeSelectedText - need remove lines",S.path,g.path),S.path[0]-g.path[0]>1){let C={type:"remove_lines",node:n.slice(g.path[0]+1,S.path[0]),path:[g.path[0]+1,0]};return v={path:[S.path[0]-C.node.length,0],offset:S.offset},{end:v,op_remove_lines:C}}return null},removeSelectedTextsCrossNodes(g,S){let{start:v,end:C}=S,T=t.findNodeByPath(v.path),_=t.findNodeByPath(C.path);if(T&&_&&T!==_){if(T.type==="text"&&_.type==="text"){if(ee.isCaretAtLineHead(n,v)&&ee.isCaretAtLineEnd(n,C)){let w=[],x={type:"remove_lines",path:v.path,node:[...n]};w.push(x),n=I.exec(n,x);let k={type:"insert_line",path:v.path,node:[{key:ot(),type:"paragraph",children:[{type:"text",text:""}]}]};w.push(k),n=I.exec(n,k),t.apply(w),e.$selection.methods.setToHead(),t.emitSelectionChange({type:"remove_lines"});return}let K=[],{op_start_delete_text:W,op_end_delete_text:P}=t.removeContentCrossLines(T,_,v,C);n=I.exec(n,W),n=I.exec(n,P),K.push(W),K.push(P);let b=t.removeLinesCrossLines(v,C);b&&(n=I.exec(n,b.op_remove_lines),K.push(b.op_remove_lines));let E={type:"merge_node",path:v.path,offset:v.offset,start:v,end:b?b.end:C};K.push(E),n=I.exec(n,E),t.apply(K),e.$selection.methods.setStartAndEnd({start:v,end:v}),t.emitSelectionChange({type:"merge_node"});return}console.log("[]slate/slate - removeSelectedTexts - merge node",n[v.path[0]-1]);let A={type:"merge_node",path:v.path,offset:v.offset,start:v,end:C};n=I.exec(n,A),t.apply([A]),e.$selection.methods.setStartAndEnd({start:v,end:v}),t.emitSelectionChange({type:"merge_node"});return}let D=g.text,F=[v.offset,C.offset],V=D.substring(F[0],F[1]),L={type:"remove_text",text:V,original_text:D,path:v.path,offset:F[0]};n=I.exec(n,L),t.apply([L]),e.$selection.methods.collapseToHead(),t.emitSelectionChange({type:"remove_text"})},handleBackward(g={}){let S=e.$selection.start,v=e.$selection.end,C=t.findNodeByPath(S.path);if(console.log("[]slate/slate - handleBackward - ",C,S.path),!C||C.type!=="text"){console.log("[ERROR]slate/slate - handleBackward");return}let T=C.text,_=ie.isSamePoint(S,v);if(console.log("[]slate/slate - handleBackward - ",_,T,S.offset,v.offset),_){if(ie.isAtLineHead(S)){if(ie.isAtFirstLineHead(S))return;if(C.text===""){let D=J(n,[S.path[0]-1,0]);if(console.log("[]slate/slate - handleBackward - is removeLines?",D),D&&D.type==="text"&&D.text===""){t.removeLines(S);return}}console.log("[]slate/slate - handleBackward - is mergeLines?"),t.mergeLines(S);return}console.log("[]slate/slate - handleBackward - is removeText?"),t.removeText(C,S)}t.removeSelectedTextsCrossNodes(C,{start:S,end:v})},mapNodeWithKey(g){return g?os(n,Number(g)):null},checkIsSelectAll(){},collapse(){},move(g){},getCaretPosition(){},setCaretPosition(g){},handleBeforeInput(g){g.preventDefault();let S=g.data;S&&s&&a&&i&&i.type==="text"||S!==null&&(console.log("[DOMAIN]slate/slate ------------------"),console.log("[DOMAIN]slate/slate - handleBeforeInput",S),t.insertText(S))},handleInput(g){g.preventDefault()},handleBlur(g){},handleFocus(g){},handleClick(){},handleCompositionEnd(g){g.preventDefault();let S=g.data;if(console.log("[]handleCompositionEnd",S),s=!1,S===""){o=!0;return}t.insertText(S)},handleCompositionUpdate(g){g.preventDefault(),!s&&(s=!0)},handleCompositionStart(g){g.preventDefault(),s=!0;let S=J(n,e.$selection.start.path);if(S&&(i=h({},S)),a=h({},e.$selection.start),u=h({},e.$selection.end),console.log("[BIZ]slate/slate - handleCompositionStart"),!ie.isSamePoint(e.$selection.start,e.$selection.end)){let C=J(n,e.$selection.start.path),T=J(n,e.$selection.end.path);if(C&&T&&C!==T&&C.type==="text"&&T.type==="text"){let _=C.text,D=T.text,F=_.slice(e.$selection.start.offset),V=D.slice(0,e.$selection.end.offset),L=[];console.log("[]handleCompositionStart nodes text",C.text,T.text);let A={type:"remove_text",text:F,original_text:_,path:e.$selection.start.path,offset:e.$selection.start.offset};L.push(A),n=I.exec(n,A);let K={type:"remove_text",text:V,original_text:D,path:e.$selection.end.path,offset:0};L.push(K),n=I.exec(n,K);let W=t.removeLinesCrossLines(e.$selection.start,e.$selection.end);W&&L.push(W.op_remove_lines);let P={type:"merge_node",path:e.$selection.start.path,offset:e.$selection.start.offset,start:e.$selection.end,end:W?W.end:e.$selection.end,compositing:!0};L.push(P),n=I.exec(n,P);let b=J(n,e.$selection.start.path);b&&(i=h({},b)),t.apply(L),e.$selection.methods.collapseToOffset({offset:a.offset}),t.emitSelectionChange({type:"unknown"})}}},handleKeyDown(g){e.$shortcut.methods.handleKeydown(g)},handleKeyUp(g){e.$shortcut.methods.handleKeyup(g)},handleSelectionChange(){e.$selection.dirty||t.getCaretPosition()}},e={$selection:ee(),$history:ma(),$shortcut:ns()},n=ya(r.defaultValue),s=!1,o=!1,i=null,a=null,u=null,p=!1,d=!1,c={get children(){return n},get isFocus(){return d},get JSON(){return JSON.stringify(n,null,2)}},f;(T=>(T[T.Action=0]="Action",T[T.SelectionChange=1]="SelectionChange",T[T.StateChange=2]="StateChange",T[T.Error=3]="Error"))(f||(f={}));let m=j();return e.$shortcut.methods.register({"MetaLeft+KeyZ"(){console.log("[]MetaLeft+KeyZ");let{operations:g,selection:S}=e.$history.methods.undo();for(let v=0;v<g.length;v+=1){let C=g[v];console.log("[]Undo op",v,C.type),n=I.exec(n,C)}m.emit(0,g),S&&m.emit(1,$(h({},S),{type:"unknown"}))},"MetaLeft+KeyV"(g){return N(this,null,function*(){g.preventDefault(),console.log("[]slate/slate - MetaLeft+KeyV")})},Enter(g){if(s)return;if(g.preventDefault(),ie.isAtLineHead(e.$selection.start)){t.insertLineBefore();return}let S=ee.isCaretAtLineEnd(n,e.$selection.start);if(console.log("[]slate/slate - Enter",S),S){t.insertLineAfter();return}t.splitLine()},Backspace(g){if(o||s){o=!1;return}g.preventDefault(),t.handleBackward()}}),{methods:t,ui:e,state:c,get isFocus(){return c.isFocus},ready(){},destroy(){m.destroy()},onAction(g){return m.on(0,g)},onSelectionChange(g){return m.on(1,g)},onStateChange(g){return m.on(2,g)},onError(g){return m.on(3,g)}}}var ot=ga();function ya(r){return!r||r.length===0?[{key:ot(),type:"paragraph",children:[{key:ot(),type:"text",text:""}]}]:r.map(t=>{let e=ot();return t.type==="text"?$(h({},t),{key:e}):t.type==="paragraph"?$(h({},t),{key:e,children:ya(t.children)}):$(h({},t),{key:e})})}var En={};Ue(En,{SlateDOMOperations:()=>He,buildInnerHTML:()=>ac,findInnerTextNode:()=>lc,findNodeByPathWithElement:()=>de,formatInnerHTML:()=>Sa,getNodePath:()=>uc,getNodeText:()=>it,refreshSelection:()=>hc,renderElement:()=>Rt,renderHTML:()=>Tn,renderLineNodesThenInsert:()=>Ea,renderNodeThenInsertLine:()=>Ta,renderText:()=>ls});var He={insertText(r,t){if(t.type!=="insert_text")return;let e=de(r,t.path);if(console.log("[op.dom]insertText 1.",e==null?void 0:e.nodeName,t.path,t.offset,t.text,t.original_text),!e)return;let n=it(e);console.log("[op.dom]insertText 2. content in current node",n);let s=st(n,t.text,t.offset);if(e.nodeName==="BR"&&e.parentNode){let o=document.createElement("span");o.textContent=s,e.parentNode.replaceChild(o,e)}else e.nodeName==="#text"&&e.parentElement?e.parentElement.innerHTML=`<span data-slate-node="text">${s}</span>`:e.textContent=s},replaceText(r,t){if(t.type!=="replace_text")return;let e=de(r,t.path);console.log("[op.dom]replaceText 1.",e==null?void 0:e.nodeName,t.path,t.offset,t.text,t.original_text),e&&(e.textContent=st(t.original_text,t.text,t.offset))},removeText(r,t){if(t.type!=="remove_text")return;let e=de(r,t.path);if(console.log("[op.dom]deleteText 1. find $target",t.original_text,t.text),!e||t.ignore)return;let n=it(e);console.log("[op.dom]deleteText 2. content in current node",n),e.innerHTML=Tn(yn(n,t.text,t.offset))},splitNode(r,t){if(t.type!=="split_node")return;let e=de(r,t.path);if(!e)return;let n=it(e);console.log("[op.dom]splitNode - 1. original text",n);let s=n.slice(0,t.offset),o=n.slice(t.offset);console.log("[op.dom]splitNode - 2. split",s,o),e.textContent=Tn(s),Ta(r,{node:{type:"paragraph",children:[{type:"text",text:o}]},path:[t.path[0]]})},mergeNode(r,t){if(t.type!=="merge_node")return;let e=de(r,t.path),n=de(r,t.end.path);if(console.log("[op.dom]mergeNode 0. find nodes",e,n),!e||!n)return;let s=it(e),o=it(n);if(n){let a=n.parentElement;n.remove(),a&&a.childNodes.length===0&&a.remove()}let i=s+o;e.textContent=i},insertLines(r,t){t.type==="insert_line"&&Ea(r,t)},removeLines(r,t){if(t.type!=="remove_lines")return;let e=de(r,[t.path[0]]);if(!e||!e.parentNode)return;let n=e.parentNode,s=t.node.length;console.log("[op.dom]removeLines - ",s);let o=t.path[0],i=[];for(let a=0;a<s;a+=1)console.log("[op.dom]removeLines - ",a,o,n),i.push(n.childNodes[o]),o+=1;for(let a=0;a<i.length;a+=1)i[a].remove()},exec(r,t){if(t.type==="insert_text"){He.insertText(r,t);return}if(t.type==="replace_text"){He.replaceText(r,t);return}if(t.type==="remove_text"){He.removeText(r,t);return}if(t.type==="insert_line"){He.insertLines(r,t);return}if(t.type==="remove_lines"){He.removeLines(r,t);return}if(t.type==="merge_node"){He.mergeNode(r,t);return}if(t.type==="split_node"){He.splitNode(r,t);return}}};function ls(r,t={}){if(r.type==="text"){let e=document.createElement("span");return e.setAttribute("data-slate-node","text"),r.key&&e.setAttribute("data-slate-node-key",String(r.key)),t.text?e.textContent=r.text:e.innerHTML=Tn(r.text),e}return null}function Rt(r,t={}){if(r.type!=="paragraph")return null;let e=document.createElement("p");e.setAttribute("data-slate-node","element"),r.key&&e.setAttribute("data-slate-node-key",String(r.key));let n=document.createDocumentFragment();for(let s=0;s<r.children.length;s+=1){let o=r.children[s];if(o.type==="text"){let i=ls(r.children[s],t);i&&n.appendChild(i)}if(o.type==="paragraph"){let i=Rt(r.children[s],t);i&&n.appendChild(i)}}return e.appendChild(n),e}function ac(r,t=[],e=0){let n=document.createDocumentFragment();for(let s=0;s<r.length;s+=1){let o=r[s];if(is(o)){let i=ls(o);i&&n.appendChild(i)}else if(as(o)){let i=Rt(o);i&&n.appendChild(i)}}return n}var va="<br>";function it(r){if(r.nodeName==="#text")return r;let t=r.textContent;return Sa(t)}function Sa(r){return r===va?"":r}function Tn(r){return r===""?va:r}function Ta(r,t){console.log("[SlateView]renderNodeThenInsertLine - ",t.node,t.path);let e=Rt(t.node);if(!e)return;let n=t.path[0]+1;n>r.children.length-1?r.appendChild(e):(console.log("[SlateView]renderNodeThenInsertLine - insertBefore",e,r.childNodes[n]),r.insertBefore(e,r.children[n]))}function Ea(r,t){console.log("[SlateView]renderNodeThenInsertLine - ",t.node,t.path);let e=document.createDocumentFragment();for(let s=0;s<t.node.length;s+=1){let o=Rt(t.node[s]);o&&e.appendChild(o)}let n=t.path[0]+1;n>r.children.length-1?r.appendChild(e):(console.log("[SlateView]renderNodeThenInsertLine - insertBefore",r.childNodes[n]),r.insertBefore(e,r.children[n]))}function lc(r){if(!r)return null;for(;r;){if(r.tagName==="SPAN")return r;if(r=r.childNodes[0],!r)return null}return null}function uc(r,t){let e=[],n=r;for(;n&&n!==t;){let s=n.parentNode;if(!s)break;let i=Array.from(s.children).indexOf(n);i!==-1&&e.unshift(i),n=s}return e}function de(r,t){if(t.length===0)return r;let e=r.childNodes[t[0]];return e?de(e,t.slice(1)):null}function hc(r,t,e){let n=de(r,t.path),s=de(r,e.path);if(!n||!s)return;let o=window.getSelection();if(!o)return;let i=document.createRange();if(console.log("[]refresh selection - start",n,n.childNodes[0],t.offset),console.log("[]refresh selection - end",s.childNodes[0],e.offset),n.textContent===""){let a=n.childNodes[0];console.log("[]refresh selection - find $br",n.parentElement,a),i.setStartBefore(a),i.setEndBefore(a)}else i.setStart(n.childNodes[0],t.offset),i.setEnd(s.childNodes[0],e.offset);o.removeAllRanges(),o.addRange(i)}return _a(cc);})();
window.Timeless=Timeless;
